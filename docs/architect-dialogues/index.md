# 架构师对话记录索引

> **创建时间**: 2026-01-29 00:35:00
> **维护者**: Claude Code AI Assistant

---

## 📋 对话列表

### 001 - Gazebo/RViz可视化问题诊断与修复

**主题**: Gazebo仿真、RViz可视化、TF坐标系
**对话时间**: 2026-01-29 00:30:00
**技术领域**: ROS系统集成、Sim2Real部署

**关键问题**:
- Gazebo显示白色圆柱堆叠
- RViz黑屏+TF报错
- LaserScan无数据显示

**架构师诊断**:
- 问题命名为"资源丢失与坐标系断裂综合症"
- 核心逻辑已活，只是外表和定位没接好
- 分三步修复：RViz配置 → 添加Gazebo插件 → 调整视觉

**核心方案**:
- 添加`libgazebo_ros_diff_drive.so`插件（修复TF）
- 添加`libgazebo_ros_laser.so`插件（发布/scan）
- RViz按F键聚焦摄像机
- 调整点云大小（0.01→0.1）和颜色

**关键经验**:
- "立刻执行'按F键'的操作，那是90%问题的答案"
- 差速驱动插件是移动机器人的"神经系统"
- 只要TF箭头在旋转，Sim-to-Real就成功了

**文档链接**: [dialogue-001-gazebo-rviz-diagnosis.md](./dialogue-001-gazebo-rviz-diagnosis.md)

---

### 002 - RViz盲区诊断与物理穿模修复

**主题**: RViz渲染引擎、Gazebo物理仿真、碰撞检测
**对话时间**: 2026-01-29 00:45:00
**技术领域**: ROS可视化、Gazebo物理引擎、Sim2Real部署
**前置对话**: dialogue-001

**关键问题**:
- RViz完全盲区（看不到模型、TF箭头、点云）
- 按F键和所有配置修改都无效
- 数据流健康（/scan 10Hz、/tf 200Hz+、/odom正常）

**架构师诊断**:
- "数据流非常健康！100%是RViz的'眼睛'（渲染/配置）有问题"
- 问题分类："听诊器检查数据脉诊"+"暴力重置配置"+"终极视觉补丁"

**核心方案**:
- **纯净版RViz测试**：`rosrun rviz rviz -f base_link`
- **物理骨科手术**：减小Collision半径（0.2→0.16）
- **雷达视觉矫正**：Style改为Points、Size改为0.1、Decay Time改为10

**关键经验**:
- "4步排查法"：Gazebo暂停 → 数据流检查 → 时间同步 → 暴力重置
- "听诊器检查"：`rostopic hz`是生与死的判决
- "不要为了一个皮肤卡在这里"：功能第一，视觉第二

**文档链接**: [dialogue-002-rviz-blind-diagnosis-physics-clipping.md](./dialogue-002-rviz-blind-diagnosis-physics-clipping.md)

---

## 📊 问题与解决方案分析

**综合分析文档**: [problem-solution-analysis.md](./problem-solution-analysis.md)

**内容概览**:
- 📋 6个核心问题的详细分析
- 🔍 每个问题的根本原因
- 💡 具体的解决方案和代码
- ✅ 验证方法和检查清单
- 🛠️ 快速诊断工具箱

**问题列表**:
| 编号 | 问题类型 | 严重程度 | 解决难度 |
|------|---------|---------|----------|
| P-001 | TF坐标系断裂 | 🔴 致命 | 低 |
| P-002 | 白色圆柱显示 | 🟢 提示 | 无需修复 |
| P-003 | LaserScan不可见 | 🟡 警告 | 低 |
| P-004 | RViz完全盲区 | 🔴 致命 | 中 |
| P-005 | 轮子穿模卡死 | 🟡 警告 | 中 |
| P-006 | 雷达点云太小 | 🟢 提示 | 低 |

**使用场景**:
- ✅ 快速查找具体问题的解决方案
- ✅ 获取代码片段和配置参数
- ✅ 使用诊断工具箱定位问题
- ✅ 学习架构师的诊断思维

---

## 🏷️ 标签索引

### 按技术领域

#### ROS系统集成
- **001** - TF坐标系断裂、robot_state_publisher、URDF配置
- **002** - 数据流验证、纯净版RViz测试

#### Gazebo仿真
- **001** - 差速驱动插件、激光雷达插件、物理仿真
- **002** - 碰撞体积设计、摩擦力调整、穿模问题

#### RViz可视化
- **001** - 摄像机视角、点云显示、配置优化
- **002** - 渲染引擎故障、OpenGL问题、缓存清理

#### Sim2Real部署
- **001** - 仿真环境配置、模型验证、部署调试
- **002** - 功能优先原则、快速迭代策略

---

### 按问题类型

#### 环境配置
- **001** - URDF缺少Gazebo插件、meshes文件夹缺失

#### 运行时错误
- **001** - TF断裂、RViz黑屏、LaserScan无数据
- **002** - RViz盲区、渲染失效、配置缓存

#### 物理问题
- **002** - 轮子卡死、原地空转、穿模（Clipping）

#### 最佳实践
- **001** - Focus Camera优先、分层诊断法、动态验证
- **002** - 数据流诊断优先、功能第一原则、听诊器检查法

#### 调试技巧
- **001** - 渐进式修复、三步手术法、盲测验证
- **002** - 4步排查法、纯净版RViz测试、物理骨科手术

---

### 按关键词

**Gazebo插件**:
- libgazebo_ros_diff_drive.so (001)
- libgazebo_ros_laser.so (001)
- publishOdomTF (001)

**Gazebo物理**:
- Collision体积 (002)
- 穿模/Clipping (002)
- mu1/mu2摩擦系数 (002)
- kp/kd刚度阻尼 (002)
- minDepth最小深度 (002)

**RViz配置**:
- Focus Camera (001)
- Fixed Frame (001)
- LaserScan Size (001, 002)
- LaserScan Style (002)
- Background Color (001)
- Decay Time (002)
- Alpha透明度 (002)
- 纯净版RViz (002)

**数据流验证**:
- rostopic hz (002)
- 听诊器检查法 (002)
- 数据脉诊 (002)

**TF坐标系**:
- odom→base_link (001)
- tf_echo (001)
- view_frames (001)
- TF骨架显示 (002)

**URDF设计**:
- Visual vs Collision分离 (002)
- 碰撞体积保守设计 (002)
- 间隙预留 (002)

---

## 🔍 快速查找

### 常见问题快速导航

**Gazebo相关问题**:
- 白色圆柱 → [001]
- 悬浮物体 → [001]
- TF断裂 → [001]

**RViz相关问题**:
- 黑屏 → [001] Focus Camera
- 看不到模型 → [001] 调整视角
- 点云太小 → [001] Size 0.01→0.1
- TF报错 → [001] 检查Gazebo插件

**开发调试相关**:
- 系统验证 → [001] 动态验证法
- 分层诊断 → [001] Layer 1/2/3
- 渐进修复 → [001] 三步手术法

---

## 📊 统计信息

**对话记录数**: 2
**技术领域数**: 4
**问题类型数**: 6
**关键词数**: 20
**分析文档数**: 1

**分类统计**:
- ROS系统集成: 2篇
- Gazebo仿真: 2篇
- RViz可视化: 2篇
- Sim2Real部署: 2篇

**问题类型统计**:
- 环境配置: 1篇
- 运行时错误: 2篇
- 物理问题: 1篇
- 最佳实践: 2篇
- 调试技巧: 2篇

**问题总数**: 6个（从2篇对话中提取）

---

## 🚀 使用建议

### 新手入门
1. 先阅读**问题背景**部分，了解现象
2. 再看**架构师诊断**部分，理解原因
3. 最后参考**解决方案**部分，执行修复

### 快速查阅
1. 使用**标签索引**或**关键词索引**定位问题
2. 直接跳转到对应的对话记录
3. 查看**关键经验**和**注意事项**

### 深入学习
1. 完整阅读对话记录
2. 理解**架构师思维模式**
3. 学习**调试技巧**和**最佳实践**

---

**最后更新**: 2026-01-29 00:35:00
**维护说明**: 每次添加新对话记录时更新此索引
