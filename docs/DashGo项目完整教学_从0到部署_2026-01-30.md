# DashGo RL Navigation é¡¹ç›®å®Œæ•´æ•™å­¦ - ä»0åˆ°éƒ¨ç½²

> **åˆ›å»ºæ—¶é—´**: 2026-01-30 10:00:00
> **é€‚ç”¨äººç¾¤**: 0åŸºç¡€å­¦ä¹ è€…ï¼ˆä¸éœ€è¦æ·±åº¦å­¦ä¹ ã€ROSã€æœºå™¨äººèƒŒæ™¯ï¼‰
> **ç›®æ ‡**: ä»é›¶å¼€å§‹ï¼Œé€æ­¥æŒæ¡æ·±åº¦å¼ºåŒ–å­¦ä¹ æœºå™¨äººå¯¼èˆªçš„å®Œæ•´æµç¨‹
> **é¡¹ç›®**: DashGo D1æœºå™¨äººå±€éƒ¨è·¯å¾„è§„åˆ’å™¨ï¼ˆLocal Plannerï¼‰

---

## ğŸ“š ç›®å½•

### ç¬¬ä¸€éƒ¨åˆ†ï¼šå‡†å¤‡ç¯‡ - ç¯å¢ƒæ­å»ºä¸åŸºç¡€æ¦‚å¿µ
1. [ç¡¬ä»¶ä¸è½¯ä»¶è¦æ±‚](#ç¬¬ä¸€ç« ç¡¬ä»¶ä¸è½¯ä»¶è¦æ±‚)
2. [æ“ä½œç³»ç»Ÿå®‰è£…](#ç¬¬äºŒç« æ“ä½œç³»ç»Ÿå®‰è£…ubuntu-2004-lts)
3. [æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®](#ç¬¬ä¸‰ç« æ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®)
4. [Isaac Sim 4.5 å®‰è£…](#ç¬¬å››ç« -isaac-sim-45-å®‰è£…)
5. [Isaac Lab é…ç½®](#ç¬¬äº”ç« -isaac-lab-é…ç½®)
6. [åŸºç¡€æ¦‚å¿µè®²è§£](#ç¬¬å…­ç« åŸºç¡€æ¦‚å¿µè®²è§£)

### ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€ç¯‡ - é¡¹ç›®ç»“æ„ä¸ä»£ç è¯¦è§£
7. [é¡¹ç›®æ•´ä½“ç»“æ„](#ç¬¬ä¸ƒç« é¡¹ç›®æ•´ä½“ç»“æ„)
8. [æ ¸å¿ƒä»£ç è¯¦è§£](#ç¬¬å…«ç« æ ¸å¿ƒä»£ç è¯¦è§£)
9. [é…ç½®æ–‡ä»¶è¯¦è§£](#ç¬¬ä¹ç« é…ç½®æ–‡ä»¶è¯¦è§£)
10. [æœºå™¨äººå‚æ•°å¯¹é½](#ç¬¬åç« æœºå™¨äººå‚æ•°å¯¹é½)

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®­ç»ƒç¯‡ - ä»é›¶è®­ç»ƒä½ çš„ç¬¬ä¸€ä¸ªæ¨¡å‹
11. [è®­ç»ƒæµç¨‹è¯¦è§£](#ç¬¬åä¸€ç« è®­ç»ƒæµç¨‹è¯¦è§£)
12. [å‚æ•°è°ƒä¼˜æŒ‡å—](#ç¬¬åäºŒç« å‚æ•°è°ƒä¼˜æŒ‡å—)
13. [è®­ç»ƒç›‘æ§ä¸è°ƒè¯•](#ç¬¬åä¸‰ç« è®­ç»ƒç›‘æ§ä¸è°ƒè¯•)
14. [å¸¸è§è®­ç»ƒé—®é¢˜](#ç¬¬åå››ç« å¸¸è§è®­ç»ƒé—®é¢˜)

### ç¬¬å››éƒ¨åˆ†ï¼šéƒ¨ç½²ç¯‡ - Sim2Realå®ç‰©éƒ¨ç½²
15. [æ¨¡å‹å¯¼å‡º](#ç¬¬åäº”ç« æ¨¡å‹å¯¼å‡º)
16. [ROSç¯å¢ƒæ­å»º](#ç¬¬åå…­ç« rosç¯å¢ƒæ­å»º)
17. [éƒ¨ç½²æµç¨‹è¯¦è§£](#ç¬¬åä¸ƒç« éƒ¨ç½²æµç¨‹è¯¦è§£)
18. [å®ç‰©æµ‹è¯•ä¸éªŒè¯](#ç¬¬åå…«ç« å®ç‰©æµ‹è¯•ä¸éªŒè¯)

### ç¬¬äº”éƒ¨åˆ†ï¼šé—®é¢˜ç¯‡ - FAQä¸è§£å†³æ–¹æ¡ˆ
19. [ç¯å¢ƒé…ç½®é—®é¢˜](#ç¬¬åä¹ç« ç¯å¢ƒé…ç½®é—®é¢˜)
20. [è®­ç»ƒé—®é¢˜](#ç¬¬äºŒåç« è®­ç»ƒé—®é¢˜)
21. [éƒ¨ç½²é—®é¢˜](#ç¬¬äºŒåä¸€ç« éƒ¨ç½²é—®é¢˜)
22. [æœ€ä½³å®è·µä¸æŠ€å·§](#ç¬¬äºŒåäºŒç« æœ€ä½³å®è·µä¸æŠ€å·§)

---

## ğŸ¯ å­¦ä¹ è·¯çº¿å›¾

```
é›¶åŸºç¡€å­¦ä¹ è€…è·¯çº¿å›¾ï¼ˆé¢„è®¡å­¦ä¹ æ—¶é—´ï¼š2-3å‘¨ï¼‰

ç¬¬1å‘¨ï¼šå‡†å¤‡ç¯‡ + åŸºç¡€ç¯‡
  â”œâ”€ Day 1-2: ç¯å¢ƒæ­å»ºï¼ˆUbuntu + Isaac Sim + Isaac Labï¼‰
  â”œâ”€ Day 3-4: åŸºç¡€æ¦‚å¿µå­¦ä¹ ï¼ˆå¼ºåŒ–å­¦ä¹ ã€ROSã€æœºå™¨äººï¼‰
  â”œâ”€ Day 5-7: é¡¹ç›®ç»“æ„ä¸ä»£ç ç†è§£

ç¬¬2å‘¨ï¼šè®­ç»ƒç¯‡
  â”œâ”€ Day 8-9: ç¬¬ä¸€æ¬¡è®­ç»ƒï¼ˆç®€å•é…ç½®ï¼‰
  â”œâ”€ Day 10-11: å‚æ•°è°ƒä¼˜ä¸ç›‘æ§
  â”œâ”€ Day 12-14: æ·±å…¥è®­ç»ƒä¸é—®é¢˜æ’æŸ¥

ç¬¬3å‘¨ï¼šéƒ¨ç½²ç¯‡
  â”œâ”€ Day 15-16: ROSç¯å¢ƒä¸æ¨¡å‹å¯¼å‡º
  â”œâ”€ Day 17-18: Sim2Realéƒ¨ç½²æµç¨‹
  â”œâ”€ Day 19-21: å®ç‰©æµ‹è¯•ä¸ä¼˜åŒ–
```

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šå‡†å¤‡ç¯‡ - ç¯å¢ƒæ­å»ºä¸åŸºç¡€æ¦‚å¿µ

---

# ç¬¬ä¸€ç« ï¼šç¡¬ä»¶ä¸è½¯ä»¶è¦æ±‚

## 1.1 ç¡¬ä»¶è¦æ±‚

### å¿…éœ€ç¡¬ä»¶ï¼ˆæœ€ä½é…ç½®ï¼‰

| ç»„ä»¶ | æœ€ä½è¦æ±‚ | æ¨èé…ç½® | è¯´æ˜ |
|------|---------|---------|------|
| **CPU** | Intel i5-8250U / AMD Ryzen 5 | Intel i7-9750H / AMD Ryzen 7 | è®­ç»ƒæ—¶CPUè´Ÿè½½è¾ƒé«˜ |
| **GPU** | NVIDIA RTX 4060 Laptop (8GB) | RTX 4070 / RTX 3080 (10GB+) | **å¿…é¡»æ”¯æŒCUDA** |
| **å†…å­˜** | 16GB DDR4 | 32GB DDR4 | è®­ç»ƒæ—¶å†…å­˜å ç”¨~10GB |
| **ç¡¬ç›˜** | 50GB SSDå¯ç”¨ç©ºé—´ | 100GB NVMe SSD | Isaac Simå ç”¨~30GB |
| **ç½‘ç»œ** | ç¨³å®šçš„äº’è”ç½‘è¿æ¥ | - | ä¸‹è½½ä¾èµ–ã€æ¨¡å‹ |

### å¯é€‰ç¡¬ä»¶ï¼ˆå®ç‰©éƒ¨ç½²ï¼‰

| ç»„ä»¶ | å‹å·/è§„æ ¼ | ç”¨é€” |
|------|----------|------|
| **æœºå™¨äºº** | DashGo D1 | éƒ¨ç½²ç›®æ ‡å¹³å° |
| **æœºè½½ç”µè„‘** | Jetson Nano 4GB | è¾¹ç¼˜æ¨ç† |
| **LiDAR** | EAI F4 Flash | 360Â°æ‰«æï¼ˆå·²é›†æˆï¼‰ |

### ç¡¬ä»¶å…¼å®¹æ€§æ£€æŸ¥

```bash
# æ£€æŸ¥GPUå‹å·
lspci | grep -i nvidia

# æ£€æŸ¥CUDAæ”¯æŒ
nvidia-smi

# æ£€æŸ¥å†…å­˜å¤§å°
free -h

# æ£€æŸ¥ç¡¬ç›˜ç©ºé—´
df -h
```

**é¢„æœŸè¾“å‡ºç¤ºä¾‹**ï¼š
```
nvidia-smiè¾“å‡ºï¼š
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 525.125.06   Driver Version: 525.125.06   CUDA Version: 12.0 |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  NVIDIA RTX 4060    Off  | 00000000:01:00.0 Off |                  N/A |
| N/A   45C    P8    12W / N/A |      0MiB /  8192MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
```

## 1.2 è½¯ä»¶è¦æ±‚

### æ ¸å¿ƒè½¯ä»¶ï¼ˆä¸¥æ ¼ç‰ˆæœ¬é”å®šï¼‰

> âš ï¸ **é‡è¦æç¤º**ï¼šæœ¬é¡¹ç›®ä¸¥æ ¼é”å®šä»¥ä¸‹ç‰ˆæœ¬ï¼Œä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å¯èƒ½å¯¼è‡´ä¸å…¼å®¹é—®é¢˜

| è½¯ä»¶ | ç‰ˆæœ¬ | ä¸‹è½½åœ°å€ | ç”¨é€” |
|------|------|---------|------|
| **æ“ä½œç³»ç»Ÿ** | Ubuntu 20.04 LTS | https://ubuntu.com/download/desktop | å¼€å‘ç¯å¢ƒ |
| **Isaac Sim** | 4.5.0 | NVIDIAå®˜ç½‘ï¼ˆéœ€æ³¨å†Œï¼‰ | ä»¿çœŸç¯å¢ƒ |
| **Isaac Lab** | 0.46.4 | GitHub | RLæ¡†æ¶ |
| **Python** | 3.10 | éšIsaac Simå®‰è£… | ç¼–ç¨‹è¯­è¨€ |
| **PyTorch** | 2.6.0 | éšIsaac Simå®‰è£… | æ·±åº¦å­¦ä¹ æ¡†æ¶ |
| **CUDA** | 12.0 | NVIDIAå®˜ç½‘ | GPUåŠ é€Ÿ |

### è¾…åŠ©è½¯ä»¶

| è½¯ä»¶ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Git** | 2.25+ | ç‰ˆæœ¬æ§åˆ¶ |
| **VSCode** | æœ€æ–° | ä»£ç ç¼–è¾‘ï¼ˆå¯é€‰ï¼‰ |
| **ROS Noetic** | 1.15.14 | å®ç‰©éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰ |

## 1.3 ç‰ˆæœ¬é”å®šçš„é‡è¦æ€§

### ä¸ºä»€ä¹ˆå¿…é¡»ä¸¥æ ¼é”å®šç‰ˆæœ¬ï¼Ÿ

**æ¡ˆä¾‹1ï¼šIsaac Simç‰ˆæœ¬ä¸å…¼å®¹**
```
âŒ é”™è¯¯ï¼šä½¿ç”¨Isaac Sim 4.0
åæœï¼šç¼ºå°‘å…³é”®APIï¼Œå¯¼è‡´ä¼ æ„Ÿå™¨é…ç½®å¤±è´¥
è§£å†³ï¼šå¿…é¡»é™çº§åˆ°4.5æˆ–å‡çº§åˆ°4.5+

âœ… æ­£ç¡®ï¼šä½¿ç”¨Isaac Sim 4.5
ç»“æœï¼šæ‰€æœ‰APIæ­£å¸¸å·¥ä½œ
```

**æ¡ˆä¾‹2ï¼šPythonç‰ˆæœ¬ä¸åŒ¹é…**
```
âŒ é”™è¯¯ï¼šä½¿ç”¨Python 3.8
åæœï¼šè¯­æ³•é”™è¯¯ï¼Œç±»å‹æç¤ºä¸æ”¯æŒ
è§£å†³ï¼šå¿…é¡»ä½¿ç”¨Python 3.10

âœ… æ­£ç¡®ï¼šä½¿ç”¨Python 3.10
ç»“æœï¼šæ‰€æœ‰ç°ä»£Pythonç‰¹æ€§å¯ç”¨
```

**æ¡ˆä¾‹3ï¼šUbuntuç‰ˆæœ¬å·®å¼‚**
```
âŒ é”™è¯¯ï¼šä½¿ç”¨Ubuntu 22.04
åæœï¼šROSç‰ˆæœ¬å†²çªï¼ˆNoetic vs Humbleï¼‰
è§£å†³ï¼šå¿…é¡»ä½¿ç”¨Ubuntu 20.04

âœ… æ­£ç¡®ï¼šä½¿ç”¨Ubuntu 20.04
ç»“æœï¼šROS Noeticå®Œç¾å…¼å®¹
```

### ç‰ˆæœ¬éªŒè¯æ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹ç‰ˆæœ¬ï¼š

```bash
# [å¿…æ£€] Ubuntuç‰ˆæœ¬
lsb_release -a
# é¢„æœŸï¼šDistributor ID: Ubuntu / Release: 20.04

# [å¿…æ£€] Pythonç‰ˆæœ¬
python3 --version
# é¢„æœŸï¼šPython 3.10.x

# [å¿…æ£€] CUDAç‰ˆæœ¬
nvidia-smi
# é¢„æœŸï¼šCUDA Version: 12.0

# [å¿…æ£€] Isaac Simç‰ˆæœ¬ï¼ˆå®‰è£…åéªŒè¯ï¼‰
cat ~/.nvsim/logs/isaac_sim_version.txt
# é¢„æœŸï¼šIsaac Sim 4.5.0

# [å¿…æ£€] Isaac Labç‰ˆæœ¬ï¼ˆå®‰è£…åéªŒè¯ï¼‰
cd ~/IsaacLab && git describe --tags
# é¢„æœŸï¼šv0.46.4
```

---

# ç¬¬äºŒç« ï¼šæ“ä½œç³»ç»Ÿå®‰è£…ï¼ˆUbuntu 20.04 LTSï¼‰

## 2.1 åˆ¶ä½œå¯åŠ¨ç›˜

### 2.1.1 ä¸‹è½½Ubuntué•œåƒ

```bash
# å®˜æ–¹ä¸‹è½½åœ°å€
https://ubuntu.com/download/desktop

# é€‰æ‹©ç‰ˆæœ¬ï¼šUbuntu 20.04.6 LTS (Focal Fossa)
# æ–‡ä»¶åï¼šubuntu-20.04.6-desktop-amd64.iso
# å¤§å°ï¼š~3.6GB
```

### 2.1.2 åˆ¶ä½œå¯åŠ¨ç›˜ï¼ˆRufus - Windowsï¼‰

1. **ä¸‹è½½Rufus**: https://rufus.ie/
2. **æ’å…¥USBç›˜**ï¼ˆâ‰¥8GBï¼‰
3. **è¿è¡ŒRufus**ï¼š
   - è®¾å¤‡ï¼šé€‰æ‹©ä½ çš„USBç›˜
   - å¼•å¯¼ç±»å‹ï¼šGPT
   - ç›®æ ‡ç³»ç»Ÿï¼šUEFIï¼ˆéCSMï¼‰
   - æ–‡ä»¶ç³»ç»Ÿï¼šFAT32
   - é›†ç°‡å¤§å°ï¼šé»˜è®¤
4. **é€‰æ‹©ISOé•œåƒ**ï¼šç‚¹å‡»"é€‰æ‹©"ï¼Œæµè§ˆåˆ°Ubuntu ISOæ–‡ä»¶
5. **å¼€å§‹å†™å…¥**ï¼šç‚¹å‡»"å¼€å§‹"ï¼Œç­‰å¾…å®Œæˆï¼ˆ~10åˆ†é’Ÿï¼‰

### 2.1.3 åˆ¶ä½œå¯åŠ¨ç›˜ï¼ˆbalenaEtcher - macOS/Linuxï¼‰

1. **ä¸‹è½½balenaEtcher**: https://www.balena.io/etcher/
2. **æ’å…¥USBç›˜**ï¼ˆâ‰¥8GBï¼‰
3. **æ‰“å¼€balenaEtcher**
4. **é€‰æ‹©ISOé•œåƒ**
5. **é€‰æ‹©ç›®æ ‡é©±åŠ¨å™¨**ï¼ˆUSBç›˜ï¼‰
6. **å¼€å§‹çƒ§å½•**ï¼šç‚¹å‡»"Flash!"ï¼Œç­‰å¾…å®Œæˆï¼ˆ~10åˆ†é’Ÿï¼‰

## 2.2 å®‰è£…Ubuntu 20.04

### 2.2.1 å¯åŠ¨åˆ°å®‰è£…ç•Œé¢

1. **æ’å…¥å¯åŠ¨ç›˜**åˆ°ç›®æ ‡ç”µè„‘
2. **å¼€æœº**ï¼Œç«‹å³è¿›å…¥BIOSï¼ˆé€šå¸¸æŒ‰F2ã€F12ã€æˆ–Delé”®ï¼‰
3. **è®¾ç½®å¯åŠ¨é¡ºåº**ï¼šUSB â†’ HDD
4. **ä¿å­˜å¹¶é€€å‡º**ï¼ˆF10ï¼‰
5. **é€‰æ‹©"Install Ubuntu"**è¿›å…¥å®‰è£…å‘å¯¼

### 2.2.2 åˆ†åŒºæ–¹æ¡ˆï¼ˆæ¨èï¼‰

**æ–¹æ¡ˆAï¼šè‡ªåŠ¨åˆ†åŒºï¼ˆæ–°æ‰‹æ¨èï¼‰**
```
é€‰æ‹©"Install Ubuntu alongside Windows Boot Manager"ï¼ˆåŒç³»ç»Ÿï¼‰
æˆ–
é€‰æ‹©"Erase disk and install Ubuntu"ï¼ˆå•ç³»ç»Ÿï¼Œä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼‰
```

**æ–¹æ¡ˆBï¼šæ‰‹åŠ¨åˆ†åŒºï¼ˆé«˜çº§ç”¨æˆ·ï¼‰**

| æŒ‚è½½ç‚¹ | å¤§å° | ç±»å‹ | è¯´æ˜ |
|--------|------|------|------|
| `/boot/efi` | 512MB | FAT32 | EFIç³»ç»Ÿåˆ†åŒº |
| `swap` | 16GB | swap | äº¤æ¢ç©ºé—´ï¼ˆ=å†…å­˜å¤§å°ï¼‰ |
| `/` | 50GB | ext4 | æ ¹åˆ†åŒº |
| `/home` | å‰©ä½™ç©ºé—´ | ext4 | ç”¨æˆ·æ•°æ®åˆ†åŒº |

### 2.2.3 å®‰è£…é€‰é¡¹

**æ¨èé…ç½®**ï¼š
```
æ—¶åŒºï¼šAsia/Shanghai
è¯­è¨€ï¼šEnglishï¼ˆæ¨èï¼‰/ ä¸­æ–‡ï¼ˆä¹Ÿå¯ä»¥ï¼‰
é”®ç›˜å¸ƒå±€ï¼šUS English
ä¸»æœºåï¼šdashgo-rl
ç”¨æˆ·åï¼šyourname
å¯†ç ï¼šï¼ˆè®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼‰
è‡ªåŠ¨ç™»å½•ï¼šç¦ç”¨ï¼ˆæ¨èï¼‰
```

### 2.2.4 å®‰è£…åæ›´æ–°ç³»ç»Ÿ

```bash
# æ›´æ–°è½¯ä»¶æº
sudo apt update

# å‡çº§æ‰€æœ‰åŒ…
sudo apt upgrade -y

# å®‰è£…å¸¸ç”¨å·¥å…·
sudo apt install -y build-essential git cmake htop
```

---

# ç¬¬ä¸‰ç« ï¼šæ·±åº¦å­¦ä¹ ç¯å¢ƒé…ç½®

## 3.1 NVIDIAé©±åŠ¨å®‰è£…

### 3.1.1 æ£€æŸ¥GPUå‹å·

```bash
lspci | grep -i nvidia
```

**é¢„æœŸè¾“å‡º**ï¼š
```
01:00.0 VGA compatible controller: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q] (rev a1)
```

### 3.1.2 å®‰è£…NVIDIAé©±åŠ¨

```bash
# æ·»åŠ NVIDIA PPA
sudo add-apt-repository ppa:graphics-drivers/ppa
sudo apt update

# æŸ¥çœ‹æ¨èé©±åŠ¨ç‰ˆæœ¬
ubuntu-drivers devices

# å®‰è£…æ¨èé©±åŠ¨ï¼ˆé€šå¸¸æ˜¯nvidia-driver-525ï¼‰
sudo apt install -y nvidia-driver-525

# é‡å¯ç³»ç»Ÿ
sudo reboot
```

### 3.1.3 éªŒè¯é©±åŠ¨å®‰è£…

```bash
# é‡å¯åè¿è¡Œ
nvidia-smi
```

**é¢„æœŸè¾“å‡º**ï¼š
```
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 525.125.06   Driver Version: 525.125.06   CUDA Version: 12.0 |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  NVIDIA RTX 4060    Off  | 00000000:01:00.0 Off |                  N/A |
| N/A   45C    P8    12W / N/A |      0MiB /  8192MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
```

## 3.2 CUDA Toolkit 12.0å®‰è£…

### 3.2.1 ä¸‹è½½CUDA Toolkit

```bash
# å®˜æ–¹ä¸‹è½½åœ°å€
https://developer.nvidia.com/cuda-downloads

# é€‰æ‹©é…ç½®ï¼š
# Operating System: Linux
# Architecture: x86_64
# Distribution: Ubuntu
# Version: 20.04
# Installer Type: runfile(local)
```

### 3.2.2 å®‰è£…CUDA Toolkit

```bash
# ä¸‹è½½.runfile
wget https://developer.download.nvidia.com/compute/cuda/12.0.0/local_installers/cuda_12.0.0_525.60.13_linux.run

# å®‰è£…ï¼ˆåªå®‰è£…Toolkitï¼Œä¸å®‰è£…é©±åŠ¨ï¼‰
sudo sh cuda_12.0.0_525.60.13_linux.run --toolkit --silent --override

# é…ç½®ç¯å¢ƒå˜é‡
echo 'export CUDA_PATH=/usr/local/cuda-12.0' >> ~/.bashrc
echo 'export PATH=$CUDA_PATH/bin:$PATH' >> ~/.bashrc
echo 'export LD_LIBRARY_PATH=$CUDA_PATH/lib64:$LD_LIBRARY_PATH' >> ~/.bashrc

# é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡
source ~/.bashrc

# éªŒè¯å®‰è£…
nvcc --version
```

**é¢„æœŸè¾“å‡º**ï¼š
```
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2023 NVIDIA Corporation
Built on Wed_Feb__8_16:40:15_PST_2023
Cuda compilation tools, release 12.0, V12.0.140
Build cuda_12.0.r12.0/compiler.32496178_0
```

## 3.3 Pythonç¯å¢ƒé…ç½®

### 3.3.1 Python 3.10å®‰è£…

```bash
# Ubuntu 20.04é»˜è®¤Python 3.8ï¼Œéœ€è¦å‡çº§åˆ°3.10
sudo apt update
sudo apt install -y software-properties-common
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install -y python3.10 python3.10-venv python3.10-dev

# è®¾ç½®é»˜è®¤Pythonç‰ˆæœ¬
sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.10 1

# éªŒè¯ç‰ˆæœ¬
python3 --version
```

**é¢„æœŸè¾“å‡º**ï¼š
```
Python 3.10.12
```

### 3.3.2 pipå®‰è£…

```bash
# å®‰è£…pip
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python3.10 get-pip.py --user

# é…ç½®ç¯å¢ƒå˜é‡
echo 'export PATH=$HOME/.local/bin:$PATH' >> ~/.bashrc
source ~/.bashrc

# éªŒè¯pip
pip --version
```

**é¢„æœŸè¾“å‡º**ï¼š
```
pip 23.0.1 from ... (python 3.10)
```

---

# ç¬¬å››ç« ï¼šIsaac Sim 4.5 å®‰è£…

## 4.1 ä¸‹è½½Isaac Sim 4.5

### 4.1.1 æ³¨å†ŒNVIDIAè´¦å·

1. è®¿é—®ï¼šhttps://developer.nvidia.com/isaac-sim
2. ç‚¹å‡»"Join Now"æ³¨å†Œè´¦å·
3. éªŒè¯é‚®ç®±
4. ç™»å½•åè®¿é—®ä¸‹è½½é¡µé¢

### 4.1.2 ä¸‹è½½Isaac Sim 4.5

```bash
# åˆ›å»ºå®‰è£…ç›®å½•
mkdir -p ~/IsaacSim
cd ~/IsaacSim

# ä¸‹è½½Isaac Sim 4.5ï¼ˆé€šè¿‡NVIDIAå®˜ç½‘ä¸‹è½½ï¼‰
# æ–‡ä»¶åï¼šIsaac-Sim-4.5.0-linux.run
# å¤§å°ï¼š~5GB

# æˆ–è€…ä½¿ç”¨wgetç›´æ¥ä¸‹è½½ï¼ˆéœ€è¦NVIDIAè´¦å·tokenï¼‰
wget -O Isaac-Sim-4.5.0-linux.run \
  "https://install.launcher.omniverse.nvidia.com/installers/omniverse-launcher-linux.AppImage"
```

## 4.2 å®‰è£…Isaac Sim 4.5

### 4.2.1 è¿è¡Œå®‰è£…ç¨‹åº

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x Isaac-Sim-4.5.0-linux.run

# è¿è¡Œå®‰è£…ç¨‹åºï¼ˆGUIæ¨¡å¼ï¼‰
./Isaac-Sim-4.5.0-linux.run

# æˆ–ï¼ˆæ— GUIæ¨¡å¼ï¼‰
./Isaac-Sim-4.5.0-linux.run --accept-license --no-window
```

### 4.2.2 å®‰è£…é€‰é¡¹

**æ¨èé…ç½®**ï¼š
```
å®‰è£…è·¯å¾„ï¼š~/IsaacSimï¼ˆé»˜è®¤ï¼‰
å®‰è£…ç»„ä»¶ï¼š
  [âœ“] Isaac Sim Core
  [âœ“] Python Support
  [âœ“] CUDA Support
  [âœ“] PhysX SDK
  [ ] Example Environmentsï¼ˆå¯é€‰ï¼ŒèŠ‚çœç©ºé—´ï¼‰
```

**é¢„è®¡å®‰è£…æ—¶é—´**ï¼š~20åˆ†é’Ÿ

## 4.3 é…ç½®Isaac Simç¯å¢ƒ

### 4.3.1 è®¾ç½®ç¯å¢ƒå˜é‡

```bash
# æ·»åŠ åˆ°~/.bashrc
cat >> ~/.bashrc << 'EOF'
# Isaac Sim 4.5
export ISAACSIM_PATH=~/IsaacSim
export EXP_PATH=$ISAACSIM/apps/omni.isaac.sim.python.kit
export PYTHONPATH=$ISAACSIM:$PYTHONPATH
export LD_LIBRARY_PATH=$ISAACSIM/libs:$LD_LIBRARY_PATH
EOF

# é‡æ–°åŠ è½½
source ~/.bashrc
```

### 4.3.2 éªŒè¯å®‰è£…

```bash
# è¿è¡ŒIsaac Simï¼ˆGUIæ¨¡å¼ï¼‰
cd ~/IsaacSim
./python.sh.sh Isaac-Sim/scripts/addons examples/basic_hello_world.py

# é¢„æœŸç»“æœï¼šæ‰“å¼€Isaac Simçª—å£ï¼Œæ˜¾ç¤º"Hello World"åœºæ™¯
```

---

# ç¬¬äº”ç« ï¼šIsaac Lab é…ç½®

## 5.1 å…‹éš†Isaac Labä»“åº“

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p ~/Projects
cd ~/Projects

# å…‹éš†Isaac Labä»“åº“ï¼ˆv0.46.4ï¼‰
git clone https://github.com/NVIDIA-Omniverse/IsaacLab.git
cd IsaacLab

# åˆ‡æ¢åˆ°v0.46.4æ ‡ç­¾
git checkout v0.46.4
```

## 5.2 å®‰è£…Isaac Labä¾èµ–

```bash
# åœ¨IsaacSimè™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…
cd ~/IsaacLab
~/IsaacSim/python.sh.sh -m pip install -e .

# é¢„è®¡å®‰è£…æ—¶é—´ï¼š~10åˆ†é’Ÿ
```

## 5.3 é…ç½®Isaac Lab

### 5.3.1 è®¾ç½®Isaac Labç¯å¢ƒ

```bash
# åˆ›å»ºIsaac Labå¯åŠ¨è„šæœ¬
cat >> ~/.bashrc << 'EOF'
# Isaac Lab
export ISAACLAB_PATH=~/Projects/IsaacLab
alias isaaclab="cd $ISAACLAB_PATH && $ISAACSIM_PATH/python.sh.sh"
EOF

# é‡æ–°åŠ è½½
source ~/.bashrc
```

### 5.3.2 éªŒè¯Isaac Labå®‰è£…

```bash
# è¿è¡ŒIsaac Labç¤ºä¾‹
cd ~/Projects/IsaacLab
~/IsaacSim/python.sh.sh isaaclab/python/examples/hello_world.py

# é¢„æœŸç»“æœï¼šæ‰“å¼€Isaac Simçª—å£ï¼Œæ˜¾ç¤ºæœºå™¨äººåœ¨åœºæ™¯ä¸­
```

## 5.4 å…‹éš†DashGo RLé¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
cd ~/
git clone https://github.com/your-username/dashgo_rl_project.git
cd dashgo_rl_project

# æˆ–ä»æœ¬åœ°å¤åˆ¶
# cp -r /path/to/source/dashgo_rl_project ~/
```

---

# ç¬¬å…­ç« ï¼šåŸºç¡€æ¦‚å¿µè®²è§£

## 6.1 ä»€ä¹ˆæ˜¯å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰ï¼Ÿ

### 6.1.1 å¼ºåŒ–å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µ

**å¼ºåŒ–å­¦ä¹ **æ˜¯ä¸€ç§æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡**è¯•é”™**å’Œ**å¥–åŠ±**æœºåˆ¶è®­ç»ƒæ™ºèƒ½ä½“ï¼ˆAgentï¼‰åœ¨ç¯å¢ƒä¸­åšå‡ºæœ€ä¼˜å†³ç­–ã€‚

**æ ¸å¿ƒè¦ç´ **ï¼š
- **Agentï¼ˆæ™ºèƒ½ä½“ï¼‰**ï¼šæœºå™¨äººï¼Œè´Ÿè´£åšå‡ºå†³ç­–
- **Environmentï¼ˆç¯å¢ƒï¼‰**ï¼šæœºå™¨äººæ‰€å¤„çš„ä¸–ç•Œ
- **Stateï¼ˆçŠ¶æ€ï¼‰**ï¼šç¯å¢ƒå½“å‰çš„æƒ…å†µ
- **Actionï¼ˆåŠ¨ä½œï¼‰**ï¼šAgentå¯ä»¥åšçš„äº‹æƒ…
- **Rewardï¼ˆå¥–åŠ±ï¼‰**ï¼šç¯å¢ƒå¯¹AgentåŠ¨ä½œçš„åé¦ˆ

### 6.1.2 ç”Ÿæ´»ä¸­çš„ä¾‹å­

**è®­ç»ƒå°ç‹—**ï¼š
```
State: å°ç‹—çœ‹åˆ°é£ç›˜
Action: è·³èµ·æ¥æ¥ä½ / æ— åŠ¨äºè¡·
Reward:
  - æ¥ä½äº†ï¼šå¥–åŠ±éª¨å¤´ï¼ˆæ­£å¥–åŠ±ï¼‰
  - æ²¡æ¥ï¼šæ²¡æœ‰éª¨å¤´ï¼ˆé›¶å¥–åŠ±ï¼‰
  - å’¬åˆ°äººï¼šæƒ©ç½šï¼ˆè´Ÿå¥–åŠ±ï¼‰

ç›®æ ‡ï¼šå­¦ä¼šæ¥é£ç›˜ä»¥è·å¾—æ›´å¤šéª¨å¤´
```

**DashGoæœºå™¨äººå¯¼èˆª**ï¼š
```
State: LiDARä¼ æ„Ÿå™¨æ•°æ® + ç›®æ ‡ä½ç½®
Action: å‰è¿›é€Ÿåº¦ + è½¬å‘è§’é€Ÿåº¦
Reward:
  - åˆ°è¾¾ç›®æ ‡ï¼š+2000åˆ†ï¼ˆå¤§å¥–ï¼‰
  - é è¿‘ç›®æ ‡ï¼š+0.75åˆ†ï¼ˆå¼•å¯¼ï¼‰
  - ç¢°åˆ°éšœç¢ï¼š-200åˆ†ï¼ˆæƒ©ç½šï¼‰
  - åŠ¨ä½œå¹³æ»‘ï¼š-0.01åˆ†ï¼ˆé˜²æŠ–åŠ¨ï¼‰

ç›®æ ‡ï¼šå­¦ä¼šé¿å¼€éšœç¢ç‰©åˆ°è¾¾ç›®æ ‡
```

### 6.1.3 å¼ºåŒ–å­¦ä¹  vs ä¼ ç»Ÿæ–¹æ³•

| å¯¹æ¯”é¡¹ | å¼ºåŒ–å­¦ä¹  | ä¼ ç»Ÿæ–¹æ³•ï¼ˆPID/DWAï¼‰ |
|--------|---------|-------------------|
| **è§„åˆ™** | è‡ªåŠ¨å­¦ä¹  | æ‰‹å·¥è®¾è®¡ |
| **é€‚åº”æ€§** | å¼ºï¼ˆè‡ªåŠ¨ä¼˜åŒ–ï¼‰ | å¼±ï¼ˆå›ºå®šå‚æ•°ï¼‰ |
| **å¤æ‚ç¯å¢ƒ** | è¡¨ç°å¥½ | è¡¨ç°ä¸€èˆ¬ |
| **è®­ç»ƒæˆæœ¬** | é«˜ï¼ˆéœ€å¤§é‡è®­ç»ƒï¼‰ | ä½ï¼ˆç›´æ¥ä½¿ç”¨ï¼‰ |
| **ç»´æŠ¤æˆæœ¬** | ä½ï¼ˆè‡ªé€‚åº”ï¼‰ | é«˜ï¼ˆæ‰‹åŠ¨è°ƒå‚ï¼‰ |

## 6.2 ä»€ä¹ˆæ˜¯PPOç®—æ³•ï¼Ÿ

### 6.2.1 PPOå…¨ç§°

**PPO** = **Proximal Policy Optimization**ï¼ˆè¿‘ç«¯ç­–ç•¥ä¼˜åŒ–ï¼‰

### 6.2.2 ä¸ºä»€ä¹ˆé€‰æ‹©PPOï¼Ÿ

**ä¼˜ç‚¹**ï¼š
1. **ç¨³å®šæ€§å¥½**ï¼šä¸å®¹æ˜“å´©æºƒ
2. **æ ·æœ¬æ•ˆç‡é«˜**ï¼šæ¯”å…¶ä»–ç®—æ³•éœ€è¦æ›´å°‘çš„è®­ç»ƒæ•°æ®
3. **å®ç°ç®€å•**ï¼šä»£ç å®¹æ˜“ç†è§£å’Œè°ƒè¯•
4. **æ€§èƒ½ä¼˜ç§€**ï¼šåœ¨å¾ˆå¤šä»»åŠ¡ä¸Šè¾¾åˆ°æˆ–è¶…è¿‡äººç±»æ°´å¹³

**ç¼ºç‚¹**ï¼š
1. **è®­ç»ƒæ—¶é—´é•¿**ï¼šéœ€è¦å¤§é‡è®¡ç®—èµ„æº
2. **è¶…å‚æ•°æ•æ„Ÿ**ï¼šå‚æ•°è®¾ç½®ä¸å½“ä¼šå½±å“æ€§èƒ½

### 6.2.3 PPOå·¥ä½œåŸç†ï¼ˆç®€åŒ–ç‰ˆï¼‰

```
åˆå§‹åŒ–ï¼šéšæœºç­–ç•¥ï¼ˆæœºå™¨äººéšæœºä¹±åŠ¨ï¼‰
å¾ªç¯ï¼š
  1. æœºå™¨äººæŒ‰ç…§å½“å‰ç­–ç•¥è¡ŒåŠ¨ï¼ˆä¸ç¯å¢ƒäº¤äº’ï¼‰
  2. æ”¶é›†ç»éªŒï¼ˆçŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±ï¼‰
  3. è®¡ç®—æ¯ä¸ªåŠ¨ä½œçš„ä»·å€¼ï¼ˆå¥½çš„åŠ¨ä½œè¿˜æ˜¯åçš„åŠ¨ä½œï¼Ÿï¼‰
  4. æ›´æ–°ç­–ç•¥ï¼ˆå¤šåšå¥½çš„åŠ¨ä½œï¼Œå°‘åšåçš„åŠ¨ä½œï¼‰
  5. é‡å¤ç›´åˆ°æ”¶æ•›ï¼ˆæœºå™¨äººå­¦ä¼šæœ€ä¼˜ç­–ç•¥ï¼‰
```

**æ¯”å–»**ï¼šå°±åƒç©æ¸¸æˆ
```
åˆæœŸï¼šä¹±æŒ‰é”®ï¼Œä¸çŸ¥é“æ€ä¹ˆç©
ä¸­æœŸï¼šå‘ç°æŸäº›æ“ä½œèƒ½å¾—åˆ†ï¼Œå¼€å§‹è®°ä½
åæœŸï¼šæŒæ¡æŠ€å·§ï¼Œè·å¾—é«˜åˆ†

PPOçš„ä¼˜åŠ¿ï¼š
  - ä¸ä¼š"èµ°æç«¯"ï¼ˆé™åˆ¶ç­–ç•¥æ›´æ–°å¹…åº¦ï¼‰
  - æŒç»­æ”¹è¿›ï¼ˆæ¯æ¬¡è¿­ä»£éƒ½æ¯”ä¸Šæ¬¡å¥½ä¸€ç‚¹ç‚¹ï¼‰
  - å……åˆ†åˆ©ç”¨ç»éªŒï¼ˆé‡å¤ä½¿ç”¨è®­ç»ƒæ•°æ®ï¼‰
```

## 6.3 ä»€ä¹ˆæ˜¯Isaac Simï¼Ÿ

### 6.3.1 Isaac Simç®€ä»‹

**Isaac Sim**æ˜¯NVIDIAå¼€å‘çš„æœºå™¨äººä»¿çœŸå™¨ï¼ŒåŸºäº**NVIDIA Omniverse**å¹³å°ã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- **ç‰©ç†ä»¿çœŸ**ï¼šçœŸå®çš„ç‰©ç†å¼•æ“ï¼ˆPhysX 5ï¼‰
- **æ¸²æŸ“**ï¼šåŸºäºå…‰çº¿è¿½è¸ªçš„é«˜ä¿çœŸæ¸²æŸ“
- **ä¼ æ„Ÿå™¨ä»¿çœŸ**ï¼šLiDARã€ç›¸æœºã€IMUç­‰
- **å¹¶è¡Œè®­ç»ƒ**ï¼šåŒæ—¶è®­ç»ƒæ•°åƒä¸ªæœºå™¨äºº

### 6.3.2 ä¸ºä»€ä¹ˆéœ€è¦ä»¿çœŸï¼Ÿ

**å®ç‰©è®­ç»ƒçš„é—®é¢˜**ï¼š
1. **æˆæœ¬é«˜**ï¼šæœºå™¨äººå¯èƒ½æŸå
2. **é€Ÿåº¦æ…¢**ï¼šå®ç‰©æµ‹è¯•è€—æ—¶é•¿
3. **å±é™©**ï¼šæœºå™¨äººå¤±æ§å¯èƒ½ä¼¤äºº
4. **éš¾ä»¥å¤ç°**ï¼šç¯å¢ƒå˜åŒ–å¯¼è‡´ç»“æœä¸ä¸€è‡´

**ä»¿çœŸçš„ä¼˜åŠ¿**ï¼š
1. **æˆæœ¬ä½**ï¼šè™šæ‹Ÿæœºå™¨äººä¸ä¼šå
2. **é€Ÿåº¦å¿«**ï¼šå¯ä»¥åŠ é€Ÿæ—¶é—´ã€å¹¶è¡Œè®­ç»ƒ
3. **å®‰å…¨**ï¼šè™šæ‹Ÿç¯å¢ƒä¸ä¼šä¼¤äºº
4. **å¯æ§**ï¼šå¯ä»¥é‡å¤ç›¸åŒçš„å®éªŒ

### 6.3.3 ä»¿çœŸä¸å®ç‰©çš„å·®è·ï¼ˆSim2Realï¼‰

**Sim2Real Gap**ï¼šä»¿çœŸè®­ç»ƒçš„ç­–ç•¥åœ¨å®ç‰©ä¸Šè¡¨ç°ä¸å¥½

**åŸå› **ï¼š
- ä»¿çœŸç‰©ç†å¼•æ“ä¸å®Œç¾
- ä¼ æ„Ÿå™¨æ¨¡å‹ä¸å‡†ç¡®
- ç¯å¢ƒå™ªå£°ä¸åŒ
- æœºå™¨äººåˆ¶é€ è¯¯å·®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **å‚æ•°å¯¹é½**ï¼šä»¿çœŸå‚æ•°ä¸¥æ ¼åŒ¹é…å®ç‰©
2. **åŸŸéšæœºåŒ–**ï¼šéšæœºåŒ–ä»¿çœŸç¯å¢ƒï¼Œå¢åŠ æ³›åŒ–èƒ½åŠ›
3. **ä¼ æ„Ÿå™¨å™ªå£°**ï¼šæ¨¡æ‹ŸçœŸå®ä¼ æ„Ÿå™¨çš„å™ªå£°
4. **æ¸è¿›éƒ¨ç½²**ï¼šå…ˆåœ¨å®‰å…¨ç¯å¢ƒæµ‹è¯•ï¼Œå†é€æ­¥å¢åŠ éš¾åº¦

## 6.4 ä»€ä¹ˆæ˜¯ROSï¼Ÿ

### 6.4.1 ROSç®€ä»‹

**ROS** = **Robot Operating System**ï¼ˆæœºå™¨äººæ“ä½œç³»ç»Ÿï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- **èŠ‚ç‚¹é—´é€šä¿¡**ï¼šä¸åŒçš„ç¨‹åºå¯ä»¥äº’ç›¸é€šä¿¡
- **è®¾å¤‡é©±åŠ¨**ï¼šç»Ÿä¸€çš„ç¡¬ä»¶æ¥å£
- **å·¥å…·åº“**ï¼šå¯¼èˆªã€SLAMã€è·¯å¾„è§„åˆ’ç­‰

### 6.4.2 ROSæ ¸å¿ƒæ¦‚å¿µ

**èŠ‚ç‚¹ï¼ˆNodeï¼‰**ï¼š
```
ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºï¼Œè´Ÿè´£ç‰¹å®šä»»åŠ¡
ä¾‹å¦‚ï¼š
  - lidar_nodeï¼šè¯»å–LiDARæ•°æ®
  - navigation_nodeï¼šè§„åˆ’è·¯å¾„
  - control_nodeï¼šæ§åˆ¶ç”µæœº
```

**è¯é¢˜ï¼ˆTopicï¼‰**ï¼š
```
èŠ‚ç‚¹é—´é€šä¿¡çš„ç®¡é“
ä¾‹å¦‚ï¼š
  /scanï¼šLiDARæ•°æ®æµ
  /cmd_velï¼šé€Ÿåº¦å‘½ä»¤
  /odomï¼šé‡Œç¨‹è®¡æ•°æ®
```

**æ¶ˆæ¯ï¼ˆMessageï¼‰**ï¼š
```
è¯é¢˜ä¸Šä¼ é€’çš„æ•°æ®æ ¼å¼
ä¾‹å¦‚ï¼š
  sensor_msgs/LaserScanï¼šLiDARæ¶ˆæ¯
  geometry_msgs/Twistï¼šé€Ÿåº¦æ¶ˆæ¯
```

### 6.4.3 ROSä¸Isaac Simçš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          DashGo RLé¡¹ç›®æ•´ä½“æ¶æ„                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  è®­ç»ƒé˜¶æ®µï¼ˆIsaac Simï¼‰ï¼š                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚Isaac Sim â”‚ â†’ â”‚PPOè®­ç»ƒ   â”‚ â†’ ç­–ç•¥æ–‡ä»¶    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                             â”‚
â”‚  éƒ¨ç½²é˜¶æ®µï¼ˆROSï¼‰ï¼š                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ç­–ç•¥æ–‡ä»¶  â”‚ â†’ â”‚ROSèŠ‚ç‚¹   â”‚ â†’ æœºå™¨äººæ§åˆ¶  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœ¬é¡¹ç›®å®šä½**ï¼ˆé‡è¦ï¼ï¼‰ï¼š
```
âœ… æœ¬é¡¹ç›®å±äºï¼šå±€éƒ¨è·¯å¾„è§„åˆ’å™¨ï¼ˆLocal Plannerï¼‰
  - èŒè´£ï¼š3-8ç±³èŒƒå›´å†…çš„é¿éšœå’Œå¯¼èˆª
  - è¾“å…¥ï¼šLiDARæ•°æ® + ç›®æ ‡ä½ç½®
  - è¾“å‡ºï¼šçº¿é€Ÿåº¦ + è§’é€Ÿåº¦

âŒ æœ¬é¡¹ç›®ä¸å±äºï¼šå…¨å±€è·¯å¾„è§„åˆ’å™¨ï¼ˆGlobal Plannerï¼‰
  - èŒè´£ï¼šè·¨æˆ¿é—´ã€é•¿è·ç¦»è·¯å¾„è§„åˆ’
  - å·¥å…·ï¼šROS move_baseã€Dijkstraã€A*

ğŸ”— éƒ¨ç½²æ¶æ„ï¼š
  å…¨å±€è§„åˆ’ï¼ˆROSï¼‰ â†’ å±€éƒ¨è§„åˆ’ï¼ˆæœ¬é¡¹ç›®ï¼‰ â†’ ç”µæœºæ§åˆ¶ï¼ˆåº•å±‚ï¼‰
```

---

# ç¬¬ä¸€éƒ¨åˆ†æ€»ç»“

## å®Œæˆæ£€æŸ¥æ¸…å•

### ç¯å¢ƒæ­å»º
- [ ] Ubuntu 20.04 LTSå·²å®‰è£…
- [ ] NVIDIAé©±åŠ¨å·²å®‰è£…ï¼ˆnvidia-smiå¯è¿è¡Œï¼‰
- [ ] CUDA Toolkit 12.0å·²å®‰è£…ï¼ˆnvcc --versionæ­£ç¡®ï¼‰
- [ ] Python 3.10å·²å®‰è£…ï¼ˆpython3 --versionæ­£ç¡®ï¼‰
- [ ] Isaac Sim 4.5å·²å®‰è£…ï¼ˆå¯è¿è¡Œç¤ºä¾‹ï¼‰
- [ ] Isaac Lab 0.46.4å·²é…ç½®ï¼ˆå¯è¿è¡Œç¤ºä¾‹ï¼‰
- [ ] DashGo RLé¡¹ç›®å·²å…‹éš†ï¼ˆls ~/dashgo_rl_projectï¼‰

### åŸºç¡€æ¦‚å¿µç†è§£
- [ ] ç†è§£å¼ºåŒ–å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µ
- [ ] ç†è§£PPOç®—æ³•çš„åŸºæœ¬åŸç†
- [ ] ç†è§£Isaac Simçš„ä½œç”¨
- [ ] ç†è§£ROSçš„åŸºæœ¬æ¦‚å¿µ
- [ ] æ˜ç¡®æœ¬é¡¹ç›®æ˜¯å±€éƒ¨è·¯å¾„è§„åˆ’å™¨

## ä¸‹ä¸€æ­¥

è¿›å…¥**ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€ç¯‡**ï¼Œæ·±å…¥ç†è§£é¡¹ç›®ç»“æ„å’Œæ ¸å¿ƒä»£ç ã€‚

---

**ç¼–å†™è¿›åº¦**ï¼šç¬¬ä¸€ç« -ç¬¬å…­ç« å®Œæˆï¼ˆçº¦15%ï¼‰
**ä¸‹ä¸€æ­¥**ï¼šç¼–å†™ç¬¬ä¸ƒç« -ç¬¬åç« ï¼ˆé¡¹ç›®ç»“æ„ä¸ä»£ç è¯¦è§£ï¼‰


---

## ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€ç¯‡ - é¡¹ç›®ç»“æ„ä¸ä»£ç è¯¦è§£

---

# ç¬¬ä¸ƒç« ï¼šé¡¹ç›®æ•´ä½“ç»“æ„

## 7.1 é¡¹ç›®ç›®å½•æ ‘

```
dashgo_rl_project/
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒä»£ç æ–‡ä»¶ï¼ˆ8ä¸ªï¼‰
â”‚   â”œâ”€â”€ train_v2.py                 # è®­ç»ƒè„šæœ¬å…¥å£ï¼ˆ387è¡Œï¼‰
â”‚   â”œâ”€â”€ train_cfg_v2.yaml           # è®­ç»ƒé…ç½®ï¼ˆv5.0 Ultimateï¼‰
â”‚   â”œâ”€â”€ dashgo_env_v2.py            # RLç¯å¢ƒå®šä¹‰ï¼ˆ1485è¡Œï¼‰â­æœ€é‡è¦
â”‚   â”œâ”€â”€ dashgo_assets.py            # æœºå™¨äººèµ„äº§é…ç½®ï¼ˆ71è¡Œï¼‰
â”‚   â”œâ”€â”€ dashgo_config.py            # ROSå‚æ•°åŠ è½½ï¼ˆ480è¡Œï¼‰
â”‚   â”œâ”€â”€ geo_nav_policy.py           # è½»é‡çº§ç½‘ç»œv3.1ï¼ˆ300Kå‚æ•°ï¼‰
â”‚   â”œâ”€â”€ play.py                     # æ¼”ç¤ºè„šæœ¬
â”‚   â””â”€â”€ verify_complete_v3.py       # è¯Šæ–­å·¥å…·
â”‚
â”œâ”€â”€ ğŸ“ config/                      # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ dashgo.urdf                 # æœºå™¨äººURDFæ¨¡å‹
â”‚
â”œâ”€â”€ ğŸ“ dashgo/                      # å®ç‰©ROSåŒ…ï¼ˆåªè¯»ï¼Œä¸¥ç¦ä¿®æ”¹ï¼‰
â”‚   â””â”€â”€ EAIé©±åŠ¨/
â”‚       â””â”€â”€ dashgo_bringup/
â”‚           â”œâ”€â”€ config/             # ROSå‚æ•°ï¼ˆSim2Realå¯¹é½ï¼‰
â”‚           â”œâ”€â”€ launch/             # ROSå¯åŠ¨æ–‡ä»¶
â”‚           â””â”€â”€ scripts/            # æµ‹è¯•è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ catkin_ws/                   # ROSå·¥ä½œç©ºé—´
â”‚   â””â”€â”€ src/dashgo_rl/
â”‚       â”œâ”€â”€ launch/
â”‚       â”‚   â””â”€â”€ sim2real_golden.launch  # ä¸»å¯åŠ¨æ–‡ä»¶
â”‚       â”œâ”€â”€ scripts/
â”‚       â”‚   â””â”€â”€ geo_nav_node.py         # RLå¯¼èˆªèŠ‚ç‚¹
â”‚       â””â”€â”€ param/                    # ROSå‚æ•°
â”‚
â”œâ”€â”€ ğŸ“ docs/                        # æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ Geo-Distill-V2.2-å®Œæ•´æ–¹æ¡ˆè¯´æ˜_2026-01-27.md
â”‚   â””â”€â”€ dashgo-robot-specifications_2026-01-24.md
â”‚
â”œâ”€â”€ ğŸ“ issues/                      # é—®é¢˜è®°å½•ï¼ˆ70+æ–‡æ¡£ï¼‰
â”‚   â”œâ”€â”€ 2024-01-24_*
â”‚   â”œâ”€â”€ 2024-01-25_*
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ ğŸ“ logs/                        # è®­ç»ƒæ—¥å¿—ï¼ˆ.gitignoreï¼‰
â”‚   â””â”€â”€ dashgo_v5_auto/
â”‚       â”œâ”€â”€ model_*.pt              # è®­ç»ƒå¾—åˆ°çš„æ¨¡å‹
â”‚       â””â”€â”€ log.txt                 # è®­ç»ƒæ—¥å¿—
â”‚
â”œâ”€â”€ ğŸ“ .claude/                     # Claude AIé…ç½®
â”‚   â””â”€â”€ rules/                      # å¼€å‘è§„åˆ™
â”‚
â””â”€â”€ ğŸ“„ README.md                    # é¡¹ç›®è¯´æ˜
```

## 7.2 æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 7.2.1 train_v2.py - è®­ç»ƒè„šæœ¬

**ä½œç”¨**ï¼šPPOè®­ç»ƒçš„ä¸»å…¥å£è„šæœ¬

**å…³é”®åŠŸèƒ½**ï¼š
1. å¯åŠ¨Isaac Simä»¿çœŸç¯å¢ƒ
2. åŠ è½½è®­ç»ƒé…ç½®ï¼ˆtrain_cfg_v2.yamlï¼‰
3. åˆ›å»ºRLç¯å¢ƒ
4. æ‰§è¡ŒPPOè®­ç»ƒå¾ªç¯
5. å®šæœŸä¿å­˜æ¨¡å‹

**ä»£ç ç»“æ„**ï¼š
```python
# 1. å¯¼å…¥AppLauncherï¼ˆé“å¾‹ï¼šå¿…é¡»æœ€å…ˆå¯¼å…¥ï¼‰
from isaaclab.app import AppLauncher

# 2. è§£æå‘½ä»¤è¡Œå‚æ•°
parser = argparse.ArgumentParser()
AppLauncher.add_app_launcher_args(parser)  # å¿…é¡»æ·»åŠ ï¼
args_cli = parser.parse_args()

# 3. å¯åŠ¨ä»¿çœŸå™¨
app_launcher = AppLauncher(args_cli)
simulation_app = app_launcher.app

# 4. åªæœ‰åœ¨è¿™é‡Œæ‰èƒ½å¯¼å…¥å…¶ä»–åº“
import torch
from isaaclab.envs import ManagerBasedRLEnv

# 5. åŠ è½½é…ç½®
agent_cfg = load_cfg("train_cfg_v2.yaml")

# 6. é…ç½®æ‰å¹³åŒ–ï¼ˆRSL-RLè¦æ±‚ï¼‰
if "runner" in agent_cfg:
    runner_cfg = agent_cfg.pop("runner")
    agent_cfg.update(runner_cfg)

# 7. åˆ›å»ºç¯å¢ƒ
env = ManagerBasedRLEnv(cfg=env_cfg)

# 8. åˆ›å»ºè®­ç»ƒå™¨
runner = OnPolicyRunner(env, agent_cfg)

# 9. å¼€å§‹è®­ç»ƒ
runner.learn(...)
```

**ä¸ºä»€ä¹ˆAppLauncherå¿…é¡»æœ€å…ˆå¯¼å…¥ï¼Ÿ**
```
Isaac SimåŸºäºOmniverse Kitï¼Œéœ€è¦åœ¨å¯¼å…¥å…¶ä»–æ¨¡å—ä¹‹å‰åˆå§‹åŒ–ã€‚

âŒ é”™è¯¯é¡ºåºï¼š
import torch  # å…ˆå¯¼å…¥torch
from isaaclab.app import AppLauncher  # åå¯¼å…¥Isaac Lab
# ç»“æœï¼š--headlesså‚æ•°å¤±æ•ˆï¼Œçª—å£å¼¹å‡º

âœ… æ­£ç¡®é¡ºåºï¼š
from isaaclab.app import AppLauncher  # å…ˆå¯¼å…¥Isaac Lab
app_launcher = AppLauncher(args_cli)
import torch  # åå¯¼å…¥torch
# ç»“æœï¼šä¸€åˆ‡æ­£å¸¸
```

### 7.2.2 dashgo_env_v2.py - RLç¯å¢ƒå®šä¹‰

**ä½œç”¨**ï¼šå®šä¹‰æœºå™¨äººå¯¼èˆªç¯å¢ƒå’Œå¥–åŠ±å‡½æ•°

**ä¸ºä»€ä¹ˆæœ€é‡è¦ï¼Ÿ**
```
è¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„æ ¸å¿ƒï¼Œå†³å®šäº†ï¼š
1. æœºå™¨äººèƒ½çœ‹åˆ°ä»€ä¹ˆï¼ˆè§‚æµ‹ç©ºé—´ï¼‰
2. æœºå™¨äººèƒ½åšä»€ä¹ˆï¼ˆåŠ¨ä½œç©ºé—´ï¼‰
3. æœºå™¨äººå­¦å¾—å¿«æ…¢ï¼ˆå¥–åŠ±å‡½æ•°ï¼‰
4. è®­ç»ƒæ˜¯å¦ç¨³å®šï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰
```

**ä»£ç ç»“æ„**ï¼š
```python
# 1. è®­ç»ƒè¶…å‚æ•°å¸¸é‡
PPO_CONFIG = {...}           # PPOç®—æ³•å‚æ•°
NETWORK_CONFIG = {...}       # ç½‘ç»œæ¶æ„å‚æ•°
ALGORITHM_CONFIG = {...}     # å­¦ä¹ ç‡ã€ä¼˜åŒ–å™¨ç­‰
MOTION_CONFIG = {...}        # è¿åŠ¨é™åˆ¶ï¼ˆå¯¹é½ROSï¼‰
REWARD_CONFIG = {...}        # å¥–åŠ±æƒé‡

# 2. è‡ªå®šä¹‰åŠ¨ä½œç±»
class UniDiffDriveAction:
    """å°†[çº¿é€Ÿåº¦,è§’é€Ÿåº¦]è½¬æ¢ä¸º[å·¦è½®é€Ÿåº¦,å³è½®é€Ÿåº¦]"""
    def __init__(self, wheel_radius, track_width):
        self.wheel_radius = wheel_radius  # 0.0632mï¼ˆä»ROSè¯»å–ï¼‰
        self.track_width = track_width    # 0.342mï¼ˆä»ROSè¯»å–ï¼‰
    
    def process(self, actions):
        """å·®é€Ÿé©±åŠ¨è¿åŠ¨å­¦"""
        v = actions[:, 0]  # çº¿é€Ÿåº¦
        w = actions[:, 1]  # è§’é€Ÿåº¦
        
        v_left = (v - w * self.track_width / 2.0) / self.wheel_radius
        v_right = (v + w * self.track_width / 2.0) / self.wheel_radius
        
        return torch.stack([v_left, v_right], dim=-1)

# 3. è§‚æµ‹å¤„ç†å‡½æ•°
def process_stitched_lidar(env):
    """4å‘ç›¸æœºæ‹¼æ¥ â†’ 72ç»´LiDAR"""
    # è·å–4ä¸ªç›¸æœºæ•°æ®ï¼ˆæ¯ä¸ª90Â°ï¼‰
    d_front = env.scene["camera_front"].data.output["..."]
    d_left = env.scene["camera_left"].data.output["..."]
    d_back = env.scene["camera_back"].data.output["..."]
    d_right = env.scene["camera_right"].data.output["..."]
    
    # æ‹¼æ¥360Â°ï¼ˆé€†æ—¶é’ˆï¼šFrontâ†’Leftâ†’Backâ†’Rightï¼‰
    full_scan = torch.cat([d_front, d_left, d_back, d_right], dim=1)
    
    # é™é‡‡æ ·ï¼š360 â†’ 72
    downsampled = full_scan[:, ::5]
    
    # å½’ä¸€åŒ–åˆ°[0, 1]
    return downsampled / 12.0

# 4. å¥–åŠ±å‡½æ•°
def reward_navigation_sota(env):
    """SOTAå¯¼èˆªå¥–åŠ±ï¼ˆv5.0 Ultimateï¼‰"""
    # [1] è¿›åº¦å¥–åŠ±ï¼šforward_vel * cos(angle_error)
    reward_progress = forward_vel * torch.cos(angle_error)
    
    # [2] æé€Ÿå¥–åŠ±ï¼šé€Ÿåº¦>0.25ä¸”æœå‘æ­£ç¡®
    reward_high_speed = (forward_vel > 0.25) * is_facing_target * 0.2
    
    # [3] å€’è½¦æƒ©ç½š
    reward_backward = -5.0 * torch.abs(min(forward_vel, 0))
    
    # [4] é¿éšœæƒ©ç½šï¼ˆåŸºäºLiDARè·ç¦»ï¼‰
    reward_collision = -500.0 * torch.exp(4.0 * (safe_dist - min_dist))
    
    # [5] è§’é€Ÿåº¦æƒ©ç½šï¼ˆé˜²æ­¢è½¬åœˆï¼‰
    reward_angular = -0.5 * torch.abs(ang_vel)
    
    # [6] åœè½¦è¯±å¯¼ï¼ˆåŠ¿èƒ½äº•ï¼‰
    is_at_goal = (dist < 0.25) & (vel < 0.1)
    reward_terminal = torch.where(is_at_goal, 100.0, 0.0)
    
    total_reward = sum([ä¸Šè¿°æ‰€æœ‰é¡¹])
    return torch.clamp(total_reward, -20.0, 120.0)

# 5. ç»ˆæ­¢æ¡ä»¶å‡½æ•°
def check_reach_goal(env):
    """æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç›®æ ‡"""
    command_term = env.command_manager._terms[command_name]
    target_pos_w = command_term.pose_command_w[:, :2]
    robot_pos = env.scene[asset_cfg.name].data.root_pos_w[:, :2]
    dist = torch.norm(target_pos_w - robot_pos, dim=-1)
    return (dist < 1.0)  # é˜ˆå€¼1.0m

def check_collision_simple(env):
    """æ£€æŸ¥æ˜¯å¦ç¢°æ’"""
    sensor = env.scene[sensor_cfg_base.name]
    forces = torch.norm(sensor.data.net_forces_w, dim=-1)
    is_safe = env.episode_length_buf < 50  # å‰50æ­¥å®‰å…¨æœŸ
    return (forces > 50.0) & (~is_safe)  # 50Né˜ˆå€¼

# 6. é…ç½®ç±»
@configclass
class DashgoEnvCfg:
    """ç¯å¢ƒé…ç½®"""
    # ä¼ æ„Ÿå™¨
    camera_front = CameraCfg(...)
    camera_left = CameraCfg(...)
    camera_back = CameraCfg(...)
    camera_right = CameraCfg(...)
    
    # å¥–åŠ±
    reach_goal = RewardTermCfg(func=reward_near_goal, weight=2000.0)
    shaping_distance = RewardTermCfg(func=log_distance_to_goal, weight=0.75)
    collision = RewardTermCfg(func=penalty_collision_force, weight=-200.0)
    
    # è¯¾ç¨‹å­¦ä¹ 
    curriculum = CurriculumCfg(...)
```

### 7.2.3 geo_nav_policy.py - è½»é‡çº§ç½‘ç»œ

**ä½œç”¨**ï¼šå®ç°è½»é‡çº§CNN+MLPç½‘ç»œæ¶æ„ï¼ˆv3.1ï¼‰

**ä¸ºä»€ä¹ˆå«"è½»é‡çº§"ï¼Ÿ**
```
ä¼ ç»Ÿæ–¹æ¡ˆï¼š
  å‚æ•°é‡ï¼š500K
  æ˜¾å­˜ï¼š150MB
  æ¨ç†é€Ÿåº¦ï¼š50Hz
  é€‚é…æ€§ï¼šéœ€è¦ä¼˜åŒ–æ‰èƒ½éƒ¨ç½²åˆ°Jetson Nano

v3.1æ–¹æ¡ˆï¼š
  å‚æ•°é‡ï¼š300Kï¼ˆâ¬‡ï¸ 40%ï¼‰
  æ˜¾å­˜ï¼š100MBï¼ˆâ¬‡ï¸ 33%ï¼‰
  æ¨ç†é€Ÿåº¦ï¼š80Hzï¼ˆâ¬†ï¸ 60%ï¼‰
  é€‚é…æ€§ï¼šâœ… å¯ç›´æ¥éƒ¨ç½²åˆ°Jetson Nano 4GB
```

**ç½‘ç»œæ¶æ„**ï¼š
```python
class GeoNavPolicy(ActorCritic):
    """è½»é‡çº§å‡ ä½•å¯¼èˆªç­–ç•¥"""
    
    def __init__(self, num_actor_obs, num_critic_obs, ...):
        # [Geo-Encoder] å‡ ä½•ç‰¹å¾æå–
        self.geo_encoder = nn.Sequential(
            nn.Conv1d(1, 16, kernel_size=5, stride=2),  # 72 â†’ 34
            nn.LayerNorm(16),
            nn.ELU(),
            nn.Conv1d(16, 32, kernel_size=3, stride=2),  # 34 â†’ 16
            nn.LayerNorm(32),
            nn.ELU(),
            nn.Flatten(),
            nn.Linear(544, 64),  # 32 * 17 = 544
            nn.LayerNorm(64),
            nn.ELU(),
        )
        
        # [Fusion Layer] ç‰¹å¾èåˆ
        self.fusion_layer = nn.Sequential(
            nn.Linear(64 + 30, 128),  # 64(LiDAR) + 30(å…¶ä»–)
            nn.LayerNorm(128),
            nn.ELU(),
        )
        
        # [Memory Layer] æ—¶åºè®°å¿†
        self.memory_layer = nn.Sequential(
            nn.Linear(128, 128),
            nn.LayerNorm(128),
            nn.ELU(),
        )
        
        # [Actor Head] è½»é‡çº§åŠ¨ä½œè¾“å‡º
        self.actor_mean = nn.Sequential(
            nn.Linear(128, 64),
            nn.LayerNorm(64),
            nn.ELU(),
            nn.Linear(64, 2),  # [v_norm, w_norm]
        )
        
        # [Critic Head] å¼ºåŠ›å€¼å‡½æ•°
        self.critic = nn.Sequential(
            nn.Linear(246, 512),
            nn.LayerNorm(512),
            nn.ELU(),
            nn.Linear(512, 256),
            nn.LayerNorm(256),
            nn.ELU(),
            nn.Linear(256, 128),
            nn.LayerNorm(128),
            nn.ELU(),
            nn.Linear(128, 1),  # çŠ¶æ€ä»·å€¼
        )
    
    def forward(self, obs_dict):
        """å‰å‘ä¼ æ’­"""
        # 1. æå–LiDARå†å²ï¼ˆ3å¸§ Ã— 72ç»´ = 216ç»´ï¼‰
        lidar_history = obs_dict["lidar"]  # shape: (N, 216)
        lidar_history = lidar_history.reshape(N, 3, 72)  # (N, 3, 72)
        
        # 2. Geo-Encoder
        geo_features = self.geo_encoder(lidar_history)  # (N, 64)
        
        # 3. æ‹¼æ¥å…¶ä»–è§‚æµ‹
        goal_vec = obs_dict["goal_vec"]  # (N, 3)
        last_action = obs_dict["last_action"]  # (N, 2)
        robot_state = obs_dict["robot_state"]  # (N, 25)
        other_features = torch.cat([goal_vec, last_action, robot_state], dim=-1)  # (N, 30)
        
        # 4. Fusion Layer
        fused = self.fusion_layer(torch.cat([geo_features, other_features], dim=-1))  # (N, 128)
        
        # 5. Memory Layer
        memory = self.memory_layer(fused)  # (N, 128)
        
        # 6. Actor Headï¼ˆåŠ¨ä½œè¾“å‡ºï¼‰
        action_mean = self.actor_mean(memory)  # (N, 2) âˆˆ [-1, 1]
        
        # 7. Critic Headï¼ˆçŠ¶æ€ä»·å€¼ï¼‰
        value = self.critic(obs_dict["policy"])  # (N, 1)
        
        return action_mean, value
```

**æ¢¯åº¦çˆ†ç‚¸é˜²æŠ¤ï¼ˆv3.1æ–°å¢ï¼‰**ï¼š
```python
# âŒ æ—§æ–¹æ¡ˆï¼ˆv3.0ï¼‰ï¼šæ¢¯åº¦çˆ†ç‚¸
self.fc = nn.Linear(64, 128)
x = self.fc(x)  # å¯èƒ½äº§ç”ŸInf/NaN

# âœ… æ–°æ–¹æ¡ˆï¼ˆv3.1ï¼‰ï¼šä¸‰å±‚é˜²æŠ¤
# 1. LayerNormï¼ˆå½’ä¸€åŒ–ï¼‰
self.fc = nn.Linear(64, 128)
self.ln = nn.LayerNorm(128)
x = self.fc(x)
x = self.ln(x)  # å½’ä¸€åŒ–ï¼Œé˜²æ­¢æ¢¯åº¦çˆ†ç‚¸

# 2. Input Clampï¼ˆè¾“å…¥æˆªæ–­ï¼‰
x = torch.clamp(x, -10.0, 10.0)  # æˆªæ–­æå€¼

# 3. Orthogonal Initï¼ˆæ­£äº¤åˆå§‹åŒ–ï¼‰
nn.init.orthogonal_(self.fc.weight, gain=np.sqrt(2))
```

### 7.2.4 train_cfg_v2.yaml - è®­ç»ƒé…ç½®

**ä½œç”¨**ï¼šå®šä¹‰PPOç®—æ³•è¶…å‚æ•°å’Œç½‘ç»œé…ç½®

**å†…å®¹è§£è¯»**ï¼š
```yaml
# [ç‰ˆæœ¬ä¿¡æ¯]
# DashGo v5.0 Ultimate - 2026-01-25
# ç­–ç•¥: ä½å­¦ä¹ ç‡ + è‡ªåŠ¨è¯¾ç¨‹ + æ··åˆå¥–åŠ±

# [è¿è¡Œç¯å¢ƒé…ç½®]
runner:
  policy_class_name: "ActorCritic"  # ç­–ç•¥ç±»å‹
  algorithm_class_name: "PPO"       # ç®—æ³•ç±»å‹
  num_steps_per_env: 24             # æ¯ä¸ªç¯å¢ƒé‡‡æ ·24æ­¥
  max_iterations: 9000              # æœ€å¤§è®­ç»ƒè½®æ•°
  empirical_normalization: True     # âœ… è‡ªåŠ¨å½’ä¸€åŒ–è§‚æµ‹
  save_interval: 100                # æ¯100è½®ä¿å­˜æ¨¡å‹
  experiment_name: "dashgo_v5_auto"
  run_name: "v5_ultimate_auto"

# [ç­–ç•¥ç½‘ç»œé…ç½®]
policy:
  class_name: "GeoNavPolicy"        # âœ… ä½¿ç”¨è‡ªå®šä¹‰è½»é‡ç½‘ç»œ
  init_noise_std: 1.0               # åˆå§‹åŒ–å™ªå£°
  actor_hidden_dims: [128, 64]      # âœ… è½»é‡çº§Actor
  critic_hidden_dims: [512, 256, 128]  # âœ… å¼ºåŠ›Critic
  activation: 'elu'                 # æ¿€æ´»å‡½æ•°

# [PPOç®—æ³•é…ç½®]
algorithm:
  class_name: "PPO"
  clip_param: 0.2                   # PPOè£å‰ªå‚æ•°
  value_loss_coef: 1.0              # å€¼å‡½æ•°æŸå¤±ç³»æ•°
  use_clipped_value_loss: True
  entropy_coef: 0.01                # âœ… ç†µç³»æ•°ï¼ˆæ¢ç´¢æ§åˆ¶ï¼‰
  num_learning_epochs: 5            # æ¯æ¬¡æ›´æ–°å­¦ä¹ 5è½®
  num_mini_batches: 4               # å°æ‰¹é‡æ•°é‡
  learning_rate: 3.0e-4             # âœ… å­¦ä¹ ç‡
  schedule: "adaptive"              # âœ… è‡ªé€‚åº”å­¦ä¹ ç‡è°ƒæ•´
  gamma: 0.99                       # æŠ˜æ‰£å› å­ï¼ˆå…³æ³¨é•¿è¿œï¼‰
  lam: 0.95                         # GAE(lambda)å‚æ•°
  desired_kl: 0.01                  # ç›®æ ‡KLæ•£åº¦
  max_grad_norm: 1.0                # æ¢¯åº¦è£å‰ª

# [ç¯å¢ƒé…ç½®]
num_envs: 32                        # å¹¶è¡Œç¯å¢ƒæ•°é‡ï¼ˆé»˜è®¤ï¼‰
```

## 7.3 é¡¹ç›®å·¥ä½œæµç¨‹

### 7.3.1 è®­ç»ƒæµç¨‹

```
1. å¯åŠ¨Isaac Simä»¿çœŸç¯å¢ƒ
   â””â”€> åŠ è½½æœºå™¨äººURDFã€åœ°å½¢ã€ä¼ æ„Ÿå™¨

2. åˆ›å»ºRLç¯å¢ƒ
   â””â”€> åˆå§‹åŒ–è§‚æµ‹ç©ºé—´ã€åŠ¨ä½œç©ºé—´ã€å¥–åŠ±å‡½æ•°

3. åˆ›å»ºPPOè®­ç»ƒå™¨
   â””â”€> åŠ è½½ç½‘ç»œæ¶æ„ã€è¶…å‚æ•°

4. å¼€å§‹è®­ç»ƒå¾ªç¯
   â”œâ”€> é‡‡é›†ç»éªŒï¼ˆæœºå™¨äººä¸ç¯å¢ƒäº¤äº’ï¼‰
   â”œâ”€> è®¡ç®—å¥–åŠ±ï¼ˆæ ¹æ®å¥–åŠ±å‡½æ•°ï¼‰
   â”œâ”€> æ›´æ–°ç½‘ç»œï¼ˆPPOç®—æ³•ï¼‰
   â”œâ”€> ä¿å­˜æ¨¡å‹ï¼ˆæ¯100è½®ï¼‰
   â””â”€> é‡å¤ç›´åˆ°max_iterations

5. è®­ç»ƒå®Œæˆ
   â””â”€> æœ€ç»ˆæ¨¡å‹ï¼šlogs/dashgo_v5_auto/model_9000.pt
```

### 7.3.2 éƒ¨ç½²æµç¨‹

```
1. å¯¼å‡ºæ¨¡å‹
   â””â”€> python export_torchscript.py --checkpoint model_9000.pt
   â””â”€> è¾“å‡ºï¼špolicy_torchscript.pt

2. ä¸Šä¼ åˆ°Jetson
   â””â”€> scp policy_torchscript.pt jetson@dashgo:~/catkin_ws/.../

3. å®ç‰©æµ‹è¯•
   â”œâ”€> å¯åŠ¨æœºå™¨äººåº•ç›˜ï¼šroslaunch dashgo_bringup minimal.launch
   â”œâ”€> å¯åŠ¨RLèŠ‚ç‚¹ï¼špython geo_nav_node.py
   â””â”€> å‘é€ç›®æ ‡ç‚¹ï¼šrostopic pub /move_base_simple/goal ...
```

---

# ç¬¬å…«ç« ï¼šæ ¸å¿ƒä»£ç è¯¦è§£

## 8.1 è§‚æµ‹ç©ºé—´è¯¦è§£

### 8.1.1 è§‚æµ‹ç©ºé—´ç»„æˆ

```python
# æ€»è§‚æµ‹ç©ºé—´ï¼š246ç»´
observation_space = {
    "lidar": 216ç»´,        # 3å¸§å†å² Ã— 72ç»´LiDAR
    "goal_vec": 3ç»´,       # [distance, sin(Î¸), cos(Î¸)]
    "last_action": 2ç»´,    # [ä¸Šä¸€å¸§v, ä¸Šä¸€å¸§w]
    "robot_state": 25ç»´,   # [ä½ç½®ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦ç­‰]
}
total = 216 + 3 + 2 + 25 = 246ç»´
```

### 8.1.2 LiDARå†å²ï¼ˆ216ç»´ï¼‰

**ä¸ºä»€ä¹ˆéœ€è¦å†å²ï¼Ÿ**
```
å•å¸§LiDARï¼ˆ72ç»´ï¼‰ï¼š
  - åªèƒ½çŸ¥é“å½“å‰éšœç¢ç‰©ä½ç½®
  - æ— æ³•åˆ¤æ–­éšœç¢ç‰©è¿åŠ¨è¶‹åŠ¿
  - æ— æ³•åˆ¤æ–­æœºå™¨äººè¿åŠ¨çŠ¶æ€

3å¸§å†å²ï¼ˆ216ç»´ï¼‰ï¼š
  - å¯ä»¥åˆ¤æ–­éšœç¢ç‰©æ˜¯é™æ­¢/è¿åŠ¨
  - å¯ä»¥åˆ¤æ–­æœºå™¨äººæ˜¯å‰è¿›/åé€€
  - æä¾›çŸ­æ—¶è®°å¿†ï¼ˆç±»ä¼¼çŸ­æœŸè®°å¿†ï¼‰
```

**å®ç°æ–¹å¼**ï¼š
```python
# åœ¨ç¯å¢ƒä¸­ç»´æŠ¤å†å²ç¼“å†²åŒº
self.history_buffer = []

# æ¯ä¸ªæ—¶é—´æ­¥æ›´æ–°
current_lidar = process_stitched_lidar(env)  # 72ç»´
self.history_buffer.append(current_lidar)

# ä¿æŒæœ€è¿‘3å¸§
if len(self.history_buffer) > 3:
    self.history_buffer.pop(0)

# æ‹¼æ¥å†å²
lidar_history = np.concatenate(self.history_buffer)  # 216ç»´
```

### 8.1.3 ç›®æ ‡å‘é‡ï¼ˆ3ç»´ï¼‰

**ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨åæ ‡ï¼Ÿ**
```
åŸå§‹åæ ‡ï¼ˆx, yï¼‰ï¼š
  - ä¾èµ–äºåæ ‡ç³»åŸç‚¹
  - è·ç¦»ç›®æ ‡è¿œæ—¶æ•°å€¼å¾ˆå¤§
  - è·ç¦»ç›®æ ‡è¿‘æ—¶æ•°å€¼å¾ˆå°
  - ç½‘ç»œéš¾ä»¥å­¦ä¹ 

ç›®æ ‡å‘é‡ï¼ˆdistance, sinÎ¸, cosÎ¸ï¼‰ï¼š
  - distanceï¼šå½’ä¸€åŒ–è·ç¦»
  - sinÎ¸, cosÎ¸ï¼šå½’ä¸€åŒ–è§’åº¦ï¼ˆé¿å…-Ï€~Ï€çš„ä¸è¿ç»­ï¼‰
  - æ•°å€¼èŒƒå›´å›ºå®šï¼Œæ˜“äºå­¦ä¹ 
```

**è®¡ç®—æ–¹æ³•**ï¼š
```python
def compute_goal_vector(robot_pos, robot_yaw, goal_pos):
    """è®¡ç®—ç›®æ ‡å‘é‡"""
    # 1. è®¡ç®—ç›¸å¯¹ä½ç½®
    dx = goal_pos[0] - robot_pos[0]
    dy = goal_pos[1] - robot_pos[1]
    
    # 2. è®¡ç®—è·ç¦»å’Œè§’åº¦
    distance = np.sqrt(dx**2 + dy**2)
    angle = np.arctan2(dy, dx) - robot_yaw
    
    # 3. å½’ä¸€åŒ–è§’åº¦ï¼ˆsinÎ¸, cosÎ¸ï¼‰
    angle_sin = np.sin(angle)
    angle_cos = np.cos(angle)
    
    return [distance, angle_sin, angle_cos]
```

### 8.1.4 æœºå™¨äººçŠ¶æ€ï¼ˆ25ç»´ï¼‰

**åŒ…å«ä¿¡æ¯**ï¼š
```python
robot_state = [
    # ä½ç½®ï¼ˆ3ç»´ï¼‰
    pos_x, pos_y, pos_z,
    
    # å§¿æ€ï¼ˆ4ç»´å››å…ƒæ•°ï¼‰
    quat_x, quat_y, quat_z, quat_w,
    
    # çº¿é€Ÿåº¦ï¼ˆ3ç»´ï¼‰
    vel_x, vel_y, vel_z,
    
    # è§’é€Ÿåº¦ï¼ˆ3ç»´ï¼‰
    ang_vel_x, ang_vel_y, ang_vel_z,
    
    # çº¿åŠ é€Ÿåº¦ï¼ˆ3ç»´ï¼‰
    acc_x, acc_y, acc_z,
    
    # è§’åŠ é€Ÿåº¦ï¼ˆ3ç»´ï¼‰
    ang_acc_x, ang_acc_y, ang_acc_z,
    
    # å…¶ä»–ï¼ˆ6ç»´ï¼‰
    forward_vel,  # å‰è¿›é€Ÿåº¦
    lateral_vel,  # æ¨ªå‘é€Ÿåº¦
    ...,
]
total = 3 + 4 + 3 + 3 + 3 + 3 + 3 + 3 = 25ç»´
```

## 8.2 åŠ¨ä½œç©ºé—´è¯¦è§£

### 8.2.1 åŠ¨ä½œç©ºé—´ç»„æˆ

```python
# åŠ¨ä½œç©ºé—´ï¼š2ç»´è¿ç»­åŠ¨ä½œ
action_space = Box(
    low=-1.0,
    high=1.0,
    shape=(2,),
    dtype=np.float32
)

# åŠ¨ä½œå«ä¹‰ï¼š
action[0] = v_norm  # å½’ä¸€åŒ–çº¿é€Ÿåº¦ âˆˆ [-1, 1]
action[1] = w_norm  # å½’ä¸€åŒ–è§’é€Ÿåº¦ âˆˆ [-1, 1]
```

### 8.2.2 åŠ¨ä½œè½¬æ¢ï¼ˆå½’ä¸€åŒ– â†’ çœŸå®é€Ÿåº¦ï¼‰

```python
def process_action(action):
    """å°†å½’ä¸€åŒ–åŠ¨ä½œè½¬æ¢ä¸ºçœŸå®é€Ÿåº¦"""
    # 1. è¯»å–å½’ä¸€åŒ–åŠ¨ä½œ
    v_norm = action[0]  # âˆˆ [-1, 1]
    w_norm = action[1]  # âˆˆ [-1, 1]
    
    # 2. åå½’ä¸€åŒ–
    max_v = MOTION_CONFIG["max_lin_vel"]  # 0.3 m/s
    max_w = MOTION_CONFIG["max_ang_vel"]  # 1.0 rad/s
    
    v = v_norm * max_v  # âˆˆ [-0.3, 0.3]
    w = w_norm * max_w  # âˆˆ [-1.0, 1.0]
    
    # 3. é€Ÿåº¦é™åˆ¶ï¼ˆç¡¬è£æ–­ï¼‰
    v = np.clip(v, -max_v, max_v)
    w = np.clip(w, -max_w, max_w)
    
    # 4. å·®é€Ÿé©±åŠ¨è½¬æ¢
    v_left = (v - w * track_width / 2.0) / wheel_radius
    v_right = (v + w * track_width / 2.0) / wheel_radius
    
    return v_left, v_right
```

### 8.2.3 åŠ¨ä½œå¹³æ»‘

**ä¸ºä»€ä¹ˆéœ€è¦å¹³æ»‘ï¼Ÿ**
```
ç›´æ¥è¾“å‡ºï¼š
  action_0 = [0.5, 0.0]    # å‰è¿›
  action_1 = [-0.5, 0.0]   # ç«‹å³åé€€
  ç»“æœï¼šç”µæœºçªå˜ï¼Œæœºå™¨äººæŠ–åŠ¨

å¹³æ»‘åï¼š
  action_0 = [0.5, 0.0]
  action_1 = [0.4, 0.0]    # å¹³æ»‘è¿‡æ¸¡
  action_2 = [0.3, 0.0]
  action_3 = [0.2, 0.0]
  resultï¼šè¿åŠ¨å¹³æ»‘ï¼Œæ— æŠ–åŠ¨
```

**å®ç°æ–¹å¼**ï¼š
```python
# åœ¨ç¯å¢ƒä¸­ç»´æŠ¤ä¸Šä¸€å¸§åŠ¨ä½œ
self.last_action = np.zeros(2)

# è®¡ç®—åŠ¨ä½œå˜åŒ–ç‡
action_rate = action - self.last_action

# æƒ©ç½šå¤§å¹…å˜åŒ–
penalty = -0.01 * np.linalg.norm(action_rate)

# æ›´æ–°ä¸Šä¸€å¸§åŠ¨ä½œ
self.last_action = action
```

## 8.3 å¥–åŠ±å‡½æ•°è¯¦è§£

### 8.3.1 å¥–åŠ±è®¾è®¡åŸåˆ™

**åŸåˆ™1ï¼šSparse + Denseç»“åˆ**
```
Sparse Rewardï¼ˆç¨€ç–å¥–åŠ±ï¼‰ï¼š
  - reach_goal: +2000ï¼ˆåˆ°è¾¾ç›®æ ‡ï¼‰
  - ä¼˜ç‚¹ï¼šæ˜ç¡®ç›®æ ‡
  - ç¼ºç‚¹ï¼šè®­ç»ƒåˆæœŸéš¾ä»¥å­¦ä¹ 

Dense Rewardï¼ˆå¯†é›†å¥–åŠ±ï¼‰ï¼š
  - shaping_distance: é è¿‘ç›®æ ‡+0.75
  - ä¼˜ç‚¹ï¼šå¼•å¯¼å­¦ä¹ 
  - ç¼ºç‚¹ï¼šå¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜

æœ€ä½³å®è·µï¼šSparseä¸»å¯¼ + Denseè¾…åŠ©
  reach_goal: 2000.0ï¼ˆç»å¯¹ä¸»å¯¼ï¼‰
  shaping_distance: 0.75ï¼ˆå¼•å¯¼ï¼‰
```

**åŸåˆ™2ï¼šå¤šç›®æ ‡å¹³è¡¡**
```
ç›®æ ‡1ï¼šåˆ°è¾¾ç›®æ ‡ï¼ˆ+2000ï¼‰
ç›®æ ‡2ï¼šå¿«é€Ÿåˆ°è¾¾ï¼ˆ+high_speedï¼‰
ç›®æ ‡3ï¼šé¿å¼€éšœç¢ï¼ˆ-collisionï¼‰
ç›®æ ‡4ï¼šåŠ¨ä½œå¹³æ»‘ï¼ˆ-action_smoothnessï¼‰
ç›®æ ‡5ï¼šé¿å…è½¬åœˆï¼ˆ-angular_penaltyï¼‰
```

### 8.3.2 v5.0 Ultimateå¥–åŠ±å‡½æ•°

```python
# [ä¸»å¯¼å¥–åŠ±] åˆ°è¾¾ç›®æ ‡
reach_goal = RewardTermCfg(
    func=reward_near_goal,
    weight=2000.0,  # â­ ç»å¯¹ä¸»å¯¼
    params={"threshold": 1.0}
)

# [å¼•å¯¼å¥–åŠ±] é è¿‘ç›®æ ‡ï¼ˆåŠ¿èƒ½å‡½æ•°ï¼‰
shaping_distance = RewardTermCfg(
    func=log_distance_to_goal,
    weight=0.75,
    params={"std": 2.0}  # tanhé™åˆ¶
)

# [å¯¼èˆªå¥–åŠ±] ç»¼åˆå¯¼èˆªï¼ˆVelodyneé£æ ¼ï¼‰
velodyne_style = RewardTermCfg(
    func=reward_navigation_sota,
    weight=1.0,
    params={
        "high_speed_threshold": 0.25,  # m/s
        "safe_dist": 0.3,              # m
    }
)

# [çº¦æŸå¥–åŠ±] åŠ¨ä½œå¹³æ»‘
action_smoothness = RewardTermCfg(
    func=reward_action_smoothness,
    weight=-0.01,
)

# [æƒ©ç½š] ç¢°æ’
collision = RewardTermCfg(
    func=penalty_collision_force,
    weight=-200.0,
    params={"threshold": 50.0}  # 50N
)

# [æƒ©ç½š] æ“¦ç¢°
undesired_contacts = RewardTermCfg(
    func=penalty_undesired_contacts,
    weight=-2.0,
)

# [æƒ©ç½š] è¿‘è·ç¦»è¶…é€Ÿ
unsafe_speed = RewardTermCfg(
    func=penalty_unsafe_speed,
    weight=-5.0,
    params={"safe_dist": 0.3, "threshold": 0.2}
)

# [å‹åŠ›å¥–åŠ±] ç”Ÿå­˜å‹åŠ›ï¼ˆé¼“åŠ±å¿«é€Ÿå®Œæˆï¼‰
alive_penalty = RewardTermCfg(
    func=reward_alive,
    weight=-0.1,  # æ¯æ­¥-0.1
)
```

### 8.3.3 å¥–åŠ±è°ƒè¯•æŠ€å·§

**é—®é¢˜1ï¼šå¥–åŠ±å€¼è¿‡å¤§/è¿‡å°**
```bash
# æŸ¥çœ‹å¥–åŠ±ç»Ÿè®¡
tail -f logs/*/log.txt | grep "Mean reward"

# æ­£å¸¸èŒƒå›´ï¼š
Mean reward: 50 ~ 150ï¼ˆè®­ç»ƒåˆæœŸï¼‰
Mean reward: 500 ~ 1500ï¼ˆè®­ç»ƒåæœŸï¼‰

# å¼‚å¸¸ï¼š
Mean reward: nanï¼ˆæ¢¯åº¦çˆ†ç‚¸ï¼‰
Mean reward: 0ï¼ˆå¥–åŠ±é»‘å®¢ï¼‰
Mean reward: -infï¼ˆé…ç½®é”™è¯¯ï¼‰
```

**é—®é¢˜2ï¼šå¥–åŠ±é»‘å®¢**
```
ç°è±¡ï¼šæœºå™¨äººæ‰¾åˆ°æ¼æ´åˆ·åˆ†
ä¾‹å­ï¼šåœ¨ç›®æ ‡é™„è¿‘ä¸åœè½¬åœˆåˆ·"æœå‘ç›®æ ‡"å¥–åŠ±

è§£å†³ï¼š
1. ç§»é™¤å¯è¢«åˆ©ç”¨çš„å¥–åŠ±ï¼ˆæœå‘å¥–åŠ±ï¼‰
2. æ·»åŠ ç»å¯¹ä¸»å¯¼å¥–åŠ±ï¼ˆreach_goal: 2000.0ï¼‰
3. æ·»åŠ å¥–åŠ±è£å‰ªï¼ˆtorch.clampï¼‰
```

## 8.4 ç»ˆæ­¢æ¡ä»¶è¯¦è§£

### 8.4.1 ç»ˆæ­¢æ¡ä»¶ç±»å‹

```python
# [æˆåŠŸç»ˆæ­¢] åˆ°è¾¾ç›®æ ‡
check_reach_goal(
    threshold=1.0  # è·ç¦»ç›®æ ‡<1.0m
)

# [å¤±è´¥ç»ˆæ­¢] ç¢°æ’
check_collision_simple(
    threshold=50.0  # ç¢°æ’åŠ›>50N
)

# [å¤±è´¥ç»ˆæ­¢] è¶…æ—¶
max_episode_length = 900  # 90ç§’ï¼ˆ@10Hzï¼‰
```

### 8.4.2 Episode Lengthç»Ÿè®¡

```python
# æ­£å¸¸èŒƒå›´ï¼š
episode_length: 100 ~ 300æ­¥ï¼ˆ10-30ç§’ï¼‰
  - çŸ­episodeï¼šç›®æ ‡è¿‘ã€è·¯å¾„ç›´
  - é•¿episodeï¼šç›®æ ‡è¿œã€éšœç¢å¤š

# å¼‚å¸¸ï¼š
episode_length < 50æ­¥ï¼šå¯èƒ½ç¢°æ’æˆ–å­¦ä¹ å›°éš¾
episode_length > 900æ­¥ï¼šè¶…æ—¶ï¼Œç­–ç•¥å¯èƒ½"èººå¹³"
```

---

**ç¬¬äºŒéƒ¨åˆ†è¿›åº¦**ï¼šç¬¬ä¸ƒç« -ç¬¬å…«ç« å®Œæˆï¼ˆçº¦30%ï¼‰
**ä¸‹ä¸€æ­¥**ï¼šç¼–å†™ç¬¬ä¹ç« -ç¬¬åç« ï¼ˆé…ç½®æ–‡ä»¶è¯¦è§£ã€æœºå™¨äººå‚æ•°å¯¹é½ï¼‰


---

# ç¬¬ä¹ç« ï¼šé…ç½®æ–‡ä»¶è¯¦è§£

## 9.1 train_cfg_v2.yaml é€é¡¹è§£è¯»

### 9.1.1 å®Œæ•´é…ç½®æ–‡ä»¶

```yaml
# ============================================================================
# DashGo v5.0 Ultimate - 2026-01-25
# ç­–ç•¥: ä½å­¦ä¹ ç‡ + è‡ªåŠ¨è¯¾ç¨‹ + æ··åˆå¥–åŠ±
# ============================================================================

seed: 42                  # éšæœºç§å­ï¼ˆä¿è¯å¯é‡å¤æ€§ï¼‰
device: 'cuda:0'          # GPUè®¾å¤‡

# ----------------------------------------------------------------------------
# è¿è¡Œç¯å¢ƒé…ç½®
# ----------------------------------------------------------------------------
runner:
  policy_class_name: "ActorCritic"    # ç­–ç•¥ç±»å‹
  algorithm_class_name: "PPO"         # ç®—æ³•ç±»å‹
  
  # é‡‡æ ·é…ç½®
  num_steps_per_env: 24               # æ¯ä¸ªç¯å¢ƒé‡‡æ ·24æ­¥ï¼ˆ~2.4ç§’@10Hzï¼‰
  max_iterations: 9000                # æœ€å¤§è®­ç»ƒè½®æ•°
  save_interval: 100                  # æ¯100è½®ä¿å­˜æ¨¡å‹
  experiment_name: "dashgo_v5_auto"   # å®éªŒåç§°
  run_name: "v5_ultimate_auto"        # è¿è¡Œåç§°
  
  # ç»éªŒå½’ä¸€åŒ–
  empirical_normalization: True       # âœ… è‡ªåŠ¨å½’ä¸€åŒ–è§‚æµ‹æ•°æ®

# ----------------------------------------------------------------------------
# ç­–ç•¥ç½‘ç»œé…ç½®
# ----------------------------------------------------------------------------
policy:
  class_name: "GeoNavPolicy"          # âœ… è‡ªå®šä¹‰è½»é‡ç½‘ç»œ
  init_noise_std: 1.0                 # åˆå§‹åŒ–å™ªå£°æ ‡å‡†å·®
  
  # ç½‘ç»œæ¶æ„ï¼ˆéå¯¹ç§°è®¾è®¡ï¼‰
  actor_hidden_dims: [128, 64]        # âœ… è½»é‡çº§Actorï¼ˆéƒ¨ç½²å‹å¥½ï¼‰
  critic_hidden_dims: [512, 256, 128] # âœ… å¼ºåŠ›Criticï¼ˆå­¦ä¹ å‡†ç¡®ï¼‰
  activation: 'elu'                   # æ¿€æ´»å‡½æ•°

# ----------------------------------------------------------------------------
# PPOç®—æ³•é…ç½®
# ----------------------------------------------------------------------------
algorithm:
  class_name: "PPO"
  
  # PPOæ ¸å¿ƒå‚æ•°
  clip_param: 0.2                     # PPOè£å‰ªå‚æ•°ï¼ˆæ ‡å‡†å€¼ï¼‰
  value_loss_coef: 1.0                # å€¼å‡½æ•°æŸå¤±ç³»æ•°
  use_clipped_value_loss: True        # ä½¿ç”¨è£å‰ªå€¼å‡½æ•°
  
  # ç†µç³»æ•°ï¼ˆæ§åˆ¶æ¢ç´¢ï¼‰
  entropy_coef: 0.01                  # âœ… æ ‡å‡†å€¼ï¼ˆå¹³è¡¡æ¢ç´¢/åˆ©ç”¨ï¼‰
  
  # å­¦ä¹ å‚æ•°
  num_learning_epochs: 5              # æ¯æ¬¡æ›´æ–°å­¦ä¹ 5è½®
  num_mini_batches: 4                 # å°æ‰¹é‡æ•°é‡ï¼ˆæ˜¾å­˜ä¸å¤Ÿå¯æ”¹ä¸º8ï¼‰
  learning_rate: 3.0e-4               # âœ… å­¦ä¹ ç‡ï¼ˆæ ‡å‡†å€¼ï¼‰
  schedule: "adaptive"                # âœ… è‡ªé€‚åº”å­¦ä¹ ç‡è°ƒæ•´
  
  # GAEå‚æ•°
  gamma: 0.99                         # æŠ˜æ‰£å› å­ï¼ˆå…³æ³¨é•¿è¿œï¼‰
  lam: 0.95                           # GAE(lambda)å‚æ•°
  desired_kl: 0.01                    # ç›®æ ‡KLæ•£åº¦
  
  # æ¢¯åº¦è£å‰ª
  max_grad_norm: 1.0                  # é˜²æ­¢æ¢¯åº¦çˆ†ç‚¸

# ----------------------------------------------------------------------------
# ç¯å¢ƒé…ç½®
# ----------------------------------------------------------------------------
num_envs: 32                          # é»˜è®¤ç¯å¢ƒæ•°ï¼ˆå®é™…ç”±CLIå‚æ•°è¦†ç›–ï¼‰
```

### 9.1.2 å…³é”®å‚æ•°è¯´æ˜

**learning_rateï¼ˆå­¦ä¹ ç‡ï¼‰**
```yaml
learning_rate: 3.0e-4  # 0.0003
```
- **ä½œç”¨**ï¼šæ§åˆ¶ç½‘ç»œæ›´æ–°æ­¥é•¿
- **å½±å“**ï¼š
  - å¤ªé«˜ï¼ˆ>1e-3ï¼‰ï¼šè®­ç»ƒä¸ç¨³å®šï¼Œå¯èƒ½å‘æ•£
  - å¤ªä½ï¼ˆ<1e-5ï¼‰ï¼šæ”¶æ•›ææ…¢
  - æ ‡å‡†å€¼ï¼ˆ3e-4ï¼‰ï¼šPPOæ¨èå€¼
- **è°ƒæ•´å»ºè®®**ï¼š
  - è®­ç»ƒä¸ç¨³å®š â†’ é™ä½å­¦ä¹ ç‡ï¼ˆ1e-4ï¼‰
  - æ”¶æ•›å¤ªæ…¢ â†’ æé«˜å­¦ä¹ ç‡ï¼ˆ5e-4ï¼‰

**entropy_coefï¼ˆç†µç³»æ•°ï¼‰**
```yaml
entropy_coef: 0.01
```
- **ä½œç”¨**ï¼šæ§åˆ¶æ¢ç´¢ç¨‹åº¦
- **å½±å“**ï¼š
  - å¤ªé«˜ï¼ˆ>0.05ï¼‰ï¼šçº¯éšæœºæ¢ç´¢ï¼Œæ— æ³•å­¦ä¹ 
  - å¤ªä½ï¼ˆ<0.001ï¼‰ï¼šè¿‡æ—©æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜
  - æ ‡å‡†å€¼ï¼ˆ0.01ï¼‰ï¼šå¹³è¡¡æ¢ç´¢å’Œåˆ©ç”¨
- **è°ƒæ•´å»ºè®®**ï¼š
  - æœºå™¨äºº"èººå¹³" â†’ æé«˜ç†µç³»æ•°ï¼ˆ0.02ï¼‰
  - æœºå™¨äººä¹±åŠ¨ â†’ é™ä½ç†µç³»æ•°ï¼ˆ0.005ï¼‰

**num_steps_per_envï¼ˆé‡‡æ ·æ­¥æ•°ï¼‰**
```yaml
num_steps_per_env: 24
```
- **ä½œç”¨**ï¼šæ¯ä¸ªç¯å¢ƒé‡‡æ ·å¤šå°‘æ­¥åæ›´æ–°ä¸€æ¬¡
- **è®¡ç®—**ï¼š
  - æ§åˆ¶é¢‘ç‡ï¼š10Hzï¼ˆdt=0.1sï¼‰
  - é‡‡æ ·æ—¶é•¿ï¼š24æ­¥ Ã— 0.1s = 2.4ç§’
  - æ€»é‡‡æ ·ï¼š32ç¯å¢ƒ Ã— 24æ­¥ = 768æ­¥/è¿­ä»£
- **å½±å“**ï¼š
  - å¤ªå°‘ï¼ˆ<16ï¼‰ï¼šç»éªŒä¸è¶³ï¼Œæ ·æœ¬æ•ˆç‡ä½
  - å¤ªå¤šï¼ˆ>480ï¼‰ï¼šæ›´æ–°æ…¢ï¼Œæ˜¾å­˜å ç”¨å¤§
  - æ ‡å‡†å€¼ï¼ˆ24ï¼‰ï¼šå¹³è¡¡

**max_iterationsï¼ˆè®­ç»ƒè½®æ•°ï¼‰**
```yaml
max_iterations: 9000
```
- **ä½œç”¨**ï¼šæœ€å¤šè®­ç»ƒå¤šå°‘è½®
- **è®¡ç®—**ï¼š
  - æ€»ç‰©ç†æ­¥æ•°ï¼š32 Ã— 9000 Ã— 24 = 6,912,000æ­¥
  - é¢„è®¡æ—¶é—´ï¼š50-70å°æ—¶ï¼ˆRTX 4060ï¼‰
- **è°ƒæ•´å»ºè®®**ï¼š
  - å¿«é€ŸéªŒè¯ï¼š1000è½®
  - å®Œæ•´è®­ç»ƒï¼š9000è½®

**empirical_normalizationï¼ˆç»éªŒå½’ä¸€åŒ–ï¼‰**
```yaml
empirical_normalization: True
```
- **ä½œç”¨**ï¼šè‡ªåŠ¨å½’ä¸€åŒ–è§‚æµ‹æ•°æ®
- **ä¸ºä»€ä¹ˆéœ€è¦**ï¼š
  - LiDARæ•°æ®èŒƒå›´ï¼š[0, 12]ç±³
  - é€Ÿåº¦æ•°æ®èŒƒå›´ï¼š[-0.3, 0.3] m/s
  - æ•°å€¼å·®å¼‚å¤§ â†’ è®­ç»ƒä¸ç¨³å®š
- **æ•ˆæœ**ï¼šè‡ªåŠ¨ç¼©æ”¾åˆ°æ ‡å‡†æ­£æ€åˆ†å¸ƒ

## 9.2 é…ç½®æ–‡ä»¶ä¿®æ”¹æŒ‡å—

### 9.2.1 ä¿®æ”¹è®­ç»ƒè½®æ•°

```yaml
# train_cfg_v2.yaml
runner:
  max_iterations: 9000  # æ”¹ä¸ºä½ éœ€è¦çš„è½®æ•°
```

### 9.2.2 è°ƒæ•´ç¯å¢ƒæ•°é‡

```yaml
# train_cfg_v2.yamlï¼ˆé»˜è®¤å€¼ï¼‰
num_envs: 32

# å®é™…è¿è¡Œæ—¶ï¼ˆæ¨èå‘½ä»¤è¡ŒæŒ‡å®šï¼‰
~/IsaacLab/isaaclab.sh -p train_v2.py --headless --num_envs 64
```

**ç¯å¢ƒæ•°é€‰æ‹©æŒ‡å—**ï¼š
| æ˜¾å­˜ | ç¯å¢ƒæ•° | é€‚ç”¨åœºæ™¯ |
|------|--------|----------|
| 6GB | 16-32 | ä¿å®ˆé…ç½® |
| 8GB | 32-64 | å¹³è¡¡é…ç½®ï¼ˆæ¨èï¼‰ |
| 12GB+ | 64-128 | æ¿€è¿›é…ç½® |

### 9.2.3 ä¿®æ”¹å­¦ä¹ ç‡

```yaml
# train_cfg_v2.yaml
algorithm:
  learning_rate: 3.0e-4  # æ ‡å‡†å€¼
  
  # è®­ç»ƒä¸ç¨³å®š â†’ é™ä½
  # learning_rate: 1.0e-4
  
  # æ”¶æ•›å¤ªæ…¢ â†’ æé«˜
  # learning_rate: 5.0e-4
```

### 9.2.4 å¼€å¯/å…³é—­å¥–åŠ±é¡¹

```python
# dashgo_env_v2.py

# å¼€å¯reach_goalå¥–åŠ±
reach_goal = RewardTermCfg(
    func=reward_near_goal,
    weight=2000.0,  # âœ… å¯ç”¨
)

# å…³é—­reach_goalå¥–åŠ±
reach_goal = RewardTermCfg(
    func=reward_near_goal,
    weight=0.0,  # âŒ ç¦ç”¨
)
```

---

# ç¬¬åç« ï¼šæœºå™¨äººå‚æ•°å¯¹é½

## 10.1 Sim2Realå¯¹é½çš„é‡è¦æ€§

### 10.1.1 ä»€ä¹ˆæ˜¯å¯¹é½ï¼Ÿ

**Sim2Realå¯¹é½**ï¼šç¡®ä¿ä»¿çœŸç¯å¢ƒä¸å®ç‰©æœºå™¨äººçš„å‚æ•°å®Œå…¨ä¸€è‡´

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
```
âŒ ä¸å¯¹é½ï¼š
  ä»¿çœŸè½®å¾„ï¼š0.06m
  å®ç‰©è½®å¾„ï¼š0.0632m
  è¯¯å·®ï¼š5.3%
  ç»“æœï¼šç­–ç•¥æ— æ³•éƒ¨ç½²ï¼Œæœºå™¨äººèµ°å

âœ… å¯¹é½ï¼š
  ä»¿çœŸè½®å¾„ï¼š0.0632mï¼ˆä»ROSè¯»å–ï¼‰
  å®ç‰©è½®å¾„ï¼š0.0632m
  è¯¯å·®ï¼š0%
  ç»“æœï¼šç­–ç•¥æˆåŠŸéƒ¨ç½²
```

### 10.1.2 éœ€è¦å¯¹é½çš„å‚æ•°

| å‚æ•°ç±»åˆ« | å‚æ•°å | ä»¿çœŸå€¼ | å®ç‰©å€¼ | å¯¹é½çŠ¶æ€ |
|---------|--------|--------|--------|----------|
| **è½®å­** | wheel_diameter | 0.1264m | 0.1264m | âœ… |
| | wheel_radius | 0.0632m | 0.0632m | âœ… |
| | wheel_track | 0.342m | 0.342m | âœ… |
| **é€Ÿåº¦** | max_lin_vel | 0.3 m/s | 0.3 m/s | âœ… |
| | max_ang_vel | 1.0 rad/s | 1.0 rad/s | âœ… |
| **åŠ é€Ÿåº¦** | max_lin_acc | 1.0 m/sÂ² | 1.0 m/sÂ² | âœ… |
| | max_ang_acc | 0.6 rad/sÂ² | 0.6 rad/sÂ² | âœ… |
| **LiDAR** | max_range | 12m | 12m | âœ… |
| | update_rate | 10 Hz | 10 Hz | âœ… |

## 10.2 å‚æ•°æ¥æº

### 10.2.1 ROSé…ç½®æ–‡ä»¶

**ä½ç½®**ï¼š`dashgo/EAIé©±åŠ¨/dashgo_bringup/config/my_dashgo_params.yaml`

```yaml
# ä¼ åŠ¨å‚æ•°
wheel_diameter: 0.1264     # âœ… è½®å­ç›´å¾„ï¼ˆç±³ï¼‰
wheel_track: 0.3420        # âœ… è½®è·ï¼ˆç±³ï¼‰
encoder_resolution: 1200   # ç¼–ç å™¨çº¿æ•°

# PIDæ§åˆ¶å‚æ•°
Kp: 50     # æ¯”ä¾‹å¢ç›Š
Kd: 20     # å¾®åˆ†å¢ç›Š
Ki: 0      # ç§¯åˆ†å¢ç›Šï¼ˆæœªä½¿ç”¨ï¼‰
Ko: 50     # å‰é¦ˆå¢ç›Š
accel_limit: 1.0  # åŠ é€Ÿåº¦é™åˆ¶
```

### 10.2.2 å¯¼èˆªè§„åˆ’å™¨å‚æ•°

**ä½ç½®**ï¼š`dashgo/1/1/nav/param/base_local_planner_params.yaml`

```yaml
# é€Ÿåº¦é™åˆ¶
max_vel_x: 0.3          # âœ… æœ€å¤§çº¿é€Ÿåº¦ï¼ˆm/sï¼‰
min_vel_x: 0.05         # æœ€å°çº¿é€Ÿåº¦ï¼ˆm/sï¼‰
max_vel_theta: 1.0      # âœ… æœ€å¤§è§’é€Ÿåº¦ï¼ˆrad/sï¼‰
min_vel_theta: -1.0     # æœ€å°è§’é€Ÿåº¦ï¼ˆrad/sï¼‰

# åŠ é€Ÿåº¦é™åˆ¶
acc_lim_x: 1.0          # âœ… çº¿åŠ é€Ÿåº¦ï¼ˆm/sÂ²ï¼‰
acc_lim_theta: 0.6      # âœ… è§’åŠ é€Ÿåº¦ï¼ˆrad/sÂ²ï¼‰

# ç›®æ ‡å…¬å·®
xy_goal_tolerance: 0.2   # ä½ç½®å…¬å·®ï¼ˆç±³ï¼‰
yaw_goal_tolerance: 0.1  # å§¿æ€å…¬å·®ï¼ˆå¼§åº¦ï¼‰
```

### 10.2.3 å‚æ•°åŠ è½½ä»£ç 

**dashgo_config.py**ï¼š
```python
class DashGoROSParams:
    """DashGo ROSå‚æ•°é…ç½®ç±»"""
    
    @classmethod
    def from_yaml(cls, yaml_path="dashgo/EAIé©±åŠ¨/dashgo_bringup/config/my_dashgo_params.yaml"):
        """ä»YAMLæ–‡ä»¶åŠ è½½å‚æ•°"""
        with open(yaml_path, 'r') as f:
            params = yaml.safe_load(f)
        
        # æå–ç‰©ç†å‚æ•°
        physical = DashGoPhysicalSpecs(
            wheel_diameter=params.get("wheel_diameter", 0.1264),
            wheel_track=params.get("wheel_track", 0.3420),
        )
        
        # æå–è¿åŠ¨å‚æ•°
        motion = DashGoMotionSpecs(
            max_lin_vel=0.3,
            max_ang_vel=1.0,
            max_lin_acc=1.0,
            max_ang_acc=0.6,
        )
        
        return cls(physical=physical, motion=motion, ...)
```

## 10.3 å‚æ•°éªŒè¯

### 10.3.1 éªŒè¯è„šæœ¬

```python
# scripts/verify_params.py
"""éªŒè¯Sim2Realå‚æ•°å¯¹é½"""

import yaml
from dashgo_config import DashGoROSParams

def verify_params():
    # 1. åŠ è½½ROSå‚æ•°
    ros_params = DashGoROSParams.from_yaml()
    
    # 2. è¯»å–ä»¿çœŸå‚æ•°
    sim_params = load_sim_params()
    
    # 3. å¯¹æ¯”éªŒè¯
    print("å‚æ•°å¯¹é½éªŒè¯ï¼š")
    print(f"è½®å¾„: ROS={ros_params.wheel_radius:.4f}, Sim={sim_params.wheel_radius:.4f}")
    print(f"è½®è·: ROS={ros_params.wheel_track:.4f}, Sim={sim_params.wheel_track:.4f}")
    
    # 4. æ£€æŸ¥è¯¯å·®
    radius_error = abs(ros_params.wheel_radius - sim_params.wheel_radius)
    track_error = abs(ros_params.wheel_track - sim_params.wheel_track)
    
    if radius_error > 0.001:
        print(f"âŒ è½®å¾„è¯¯å·®è¿‡å¤§: {radius_error*1000:.1f}mm")
    else:
        print(f"âœ… è½®å¾„å¯¹é½")
    
    if track_error > 0.001:
        print(f"âŒ è½®è·è¯¯å·®è¿‡å¤§: {track_error*1000:.1f}mm")
    else:
        print(f"âœ… è½®è·å¯¹é½")

if __name__ == "__main__":
    verify_params()
```

### 10.3.2 å®ç‰©æµ‹é‡éªŒè¯

**å¦‚ä½•æµ‹é‡å®é™…è½®å¾„ï¼Ÿ**
```bash
# æ–¹æ³•1ï¼šç›´æ¥æµ‹é‡
1. å°†æœºå™¨äººæ”¾åœ¨å¹³åœ°ä¸Š
2. ç”¨å°ºå­æµ‹é‡è½®å­ç›´å¾„
3. å¤šæ¬¡æµ‹é‡å–å¹³å‡å€¼
4. æ›´æ–°ROSé…ç½®æ–‡ä»¶

# æ–¹æ³•2ï¼šé‡Œç¨‹è®¡æ ‡å®š
1. è®©æœºå™¨äººç›´çº¿å‰è¿›10ç±³
2. è®°å½•ç¼–ç å™¨è¯»æ•°
3. è®¡ç®—å®é™…è½®å¾„
4. æ›´æ–°é…ç½®æ–‡ä»¶
```

**å¦‚ä½•æµ‹é‡å®é™…è½®è·ï¼Ÿ**
```bash
# æ–¹æ³•1ï¼šç›´æ¥æµ‹é‡
1. æµ‹é‡å·¦å³è½®ä¸­å¿ƒè·ç¦»
2. å¤šæ¬¡æµ‹é‡å–å¹³å‡å€¼
3. æ›´æ–°ROSé…ç½®æ–‡ä»¶

# æ–¹æ³•2ï¼šæ—‹è½¬æ ‡å®š
1. è®©æœºå™¨äººåŸåœ°æ—‹è½¬10åœˆ
2. æµ‹é‡å®é™…æ—‹è½¬è§’åº¦
3. è®¡ç®—å®é™…è½®è·
4. æ›´æ–°é…ç½®æ–‡ä»¶
```

## 10.4 å‚æ•°ä¸å¯¹é½çš„åæœ

### 10.4.1 æ¡ˆä¾‹1ï¼šè½®å¾„è¯¯å·®5%

```
ä»¿çœŸè½®å¾„ï¼š0.06m
å®é™…è½®å¾„ï¼š0.063m
è¯¯å·®ï¼š5%

ç»“æœï¼š
  - æŒ‡ä»¤å‰è¿›1m
  - ä»¿çœŸï¼š1.0m
  - å®ç‰©ï¼š1.05m
  - ç´¯ç§¯è¯¯å·®ï¼šæ¯å‰è¿›10mè¯¯å·®50cm
  - ç»“è®ºï¼šç­–ç•¥æ— æ³•ä½¿ç”¨
```

### 10.4.2 æ¡ˆä¾‹2ï¼šé€Ÿåº¦é™åˆ¶ä¸å¯¹é½

```
ä»¿çœŸæœ€å¤§é€Ÿåº¦ï¼š0.5 m/s
å®é™…æœ€å¤§é€Ÿåº¦ï¼š0.3 m/s
è¯¯å·®ï¼š67%

ç»“æœï¼š
  - ç­–ç•¥è¾“å‡º0.4 m/s
  - ä»¿çœŸï¼šæ­£å¸¸
  - å®ç‰©ï¼šè¶…é€Ÿï¼Œè§¦å‘ä¿æŠ¤ï¼Œæœºå™¨äººåœæ­¢
  - ç»“è®ºï¼šç­–ç•¥æ— æ³•éƒ¨ç½²
```

---

# ç¬¬äºŒéƒ¨åˆ†æ€»ç»“

## å®Œæˆæ£€æŸ¥æ¸…å•

### é¡¹ç›®ç»“æ„ç†è§£
- [ ] ç†è§£é¡¹ç›®ç›®å½•æ ‘
- [ ] çŸ¥é“æ¯ä¸ªæ ¸å¿ƒæ–‡ä»¶çš„ä½œç”¨
- [ ] ç†è§£è®­ç»ƒåˆ°éƒ¨ç½²çš„å®Œæ•´æµç¨‹

### ä»£ç ç†è§£
- [ ] ç†è§£è§‚æµ‹ç©ºé—´ï¼ˆ246ç»´ï¼‰çš„ç»„æˆ
- [ ] ç†è§£åŠ¨ä½œç©ºé—´ï¼ˆ2ç»´ï¼‰çš„å«ä¹‰
- [ ] ç†è§£å¥–åŠ±å‡½æ•°çš„è®¾è®¡åŸç†
- [ ] ç†è§£ç½‘ç»œæ¶æ„ï¼ˆGeoNavPolicy v3.1ï¼‰

### é…ç½®æ–‡ä»¶
- [ ] ç†è§£train_cfg_v2.yamlçš„æ¯ä¸ªå‚æ•°
- [ ] çŸ¥é“å¦‚ä½•ä¿®æ”¹è®­ç»ƒå‚æ•°
- [ ] çŸ¥é“å¦‚ä½•å¼€å¯/å…³é—­å¥–åŠ±é¡¹

### Sim2Realå¯¹é½
- [ ] ç†è§£å‚æ•°å¯¹é½çš„é‡è¦æ€§
- [ ] çŸ¥é“å‚æ•°æ¥æºï¼ˆROSé…ç½®æ–‡ä»¶ï¼‰
- [ ] çŸ¥é“å¦‚ä½•éªŒè¯å‚æ•°å¯¹é½
- [ ] çŸ¥é“å¦‚ä½•æµ‹é‡å®ç‰©å‚æ•°

## ä¸‹ä¸€æ­¥

è¿›å…¥**ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®­ç»ƒç¯‡**ï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡è®­ç»ƒï¼

---

**ç¼–å†™è¿›åº¦**ï¼šç¬¬ä¸ƒç« -ç¬¬åç« å®Œæˆï¼ˆçº¦35%ï¼‰
**ä¸‹ä¸€æ­¥**ï¼šç¼–å†™ç¬¬åä¸€ç« -ç¬¬åå››ç« ï¼ˆè®­ç»ƒæµç¨‹è¯¦è§£ï¼‰


---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®­ç»ƒç¯‡ - ä»é›¶è®­ç»ƒä½ çš„ç¬¬ä¸€ä¸ªæ¨¡å‹

---

# ç¬¬åä¸€ç« ï¼šè®­ç»ƒæµç¨‹è¯¦è§£

## 11.1 è®­ç»ƒå‰å‡†å¤‡

### 11.1.1 ç¯å¢ƒéªŒè¯æ¸…å•

```bash
# [1] æ£€æŸ¥Isaac Labç¯å¢ƒ
cd ~/IsaacLab
source isaaclab.sh

# [2] æ£€æŸ¥GPUå¯ç”¨æ€§
python -c "import torch; print('CUDA available:', torch.cuda.is_available())"
# é¢„æœŸè¾“å‡ºï¼šCUDA available: True

# [3] æ£€æŸ¥Isaac Simç‰ˆæœ¬
cat ~/.nvsim/logs/isaac_sim_version.txt
# é¢„æœŸè¾“å‡ºï¼šIsaac Sim 4.5.0

# [4] æ£€æŸ¥é¡¹ç›®ç›®å½•
cd ~/dashgo_rl_project
ls -la train_v2.py dashgo_env_v2.py train_cfg_v2.yaml
# é¢„æœŸï¼šæ‰€æœ‰æ–‡ä»¶éƒ½å­˜åœ¨
```

### 11.1.2 é¦–æ¬¡è®­ç»ƒé…ç½®

**æ¨èé…ç½®ï¼ˆç¬¬ä¸€æ¬¡è®­ç»ƒï¼‰**ï¼š
```yaml
# train_cfg_v2.yaml
runner:
  max_iterations: 1000  # é¦–æ¬¡è®­ç»ƒ1000è½®ï¼ˆçº¦5-8å°æ—¶ï¼‰
  save_interval: 100     # æ¯100è½®ä¿å­˜
  
num_envs: 32           # 32ä¸ªå¹¶è¡Œç¯å¢ƒï¼ˆRTX 4060å®‰å…¨å€¼ï¼‰

algorithm:
  learning_rate: 3.0e-4   # æ ‡å‡†å­¦ä¹ ç‡
  entropy_coef: 0.01      # æ ‡å‡†ç†µç³»æ•°
```

**åŸå› **ï¼š
- 1000è½®è¶³å¤Ÿçœ‹åˆ°æ•ˆæœï¼ˆå¥–åŠ±æ›²çº¿ä¸Šå‡ï¼‰
- æ—¶é—´å¯æ§ï¼ˆ5-8å°æ—¶ï¼‰
- å¦‚æœæ•ˆæœä¸å¥½ï¼Œå¯ä»¥åŠæ—¶è°ƒæ•´å‚æ•°

### 11.1.3 æ£€æŸ¥ç£ç›˜ç©ºé—´

```bash
# æ£€æŸ¥å¯ç”¨ç©ºé—´
df -h ~/dashgo_rl_project

# é¢„æœŸéœ€æ±‚ï¼š
# - æ¨¡å‹æ–‡ä»¶ï¼š~500MBï¼ˆæ¯100è½®ä¸€ä¸ªcheckpointï¼‰
# - è®­ç»ƒæ—¥å¿—ï¼š~100MB
# - TensorBoardæ—¥å¿—ï¼š~200MB
# æ€»è®¡ï¼š~1GB

# å¦‚æœç©ºé—´ä¸è¶³ï¼Œæ¸…ç†æ—§æ—¥å¿—
rm -rf logs/dashgo_v5_auto/*
```

## 11.2 å¯åŠ¨è®­ç»ƒ

### 11.2.1 è®­ç»ƒå‘½ä»¤

```bash
# [æ–¹æ³•1] Headlessæ¨¡å¼ï¼ˆæ¨èï¼Œæ— GUIï¼‰
cd ~/dashgo_rl_project
~/IsaacLab/isaaclab.sh -p train_v2.py --headless --enable_cameras --num_envs 32

# [æ–¹æ³•2] GUIæ¨¡å¼ï¼ˆè°ƒè¯•ç”¨ï¼Œå¯çœ‹åˆ°ä»¿çœŸï¼‰
~/IsaacLab/isaaclab.sh -p train_v2.py --num_envs 16

# [æ–¹æ³•3] æŒ‡å®šcheckpointç»§ç»­è®­ç»ƒ
~/IsaacLab/isaaclab.sh -p train_v2.py --headless --resume --load_run latest
```

**å‘½ä»¤å‚æ•°è¯´æ˜**ï¼š
- `--headless`ï¼šæ— GUIæ¨¡å¼ï¼ˆèŠ‚çœæ˜¾å­˜ï¼‰
- `--enable_cameras`ï¼šå¯ç”¨ç›¸æœºï¼ˆæœ¬é¡¹ç›®éœ€è¦ï¼‰
- `--num_envs 32`ï¼šå¹¶è¡Œç¯å¢ƒæ•°é‡
- `--resume`ï¼šä»æœ€æ–°checkpointæ¢å¤
- `--load_run latest`ï¼šåŠ è½½æœ€æ–°è®­ç»ƒ

### 11.2.2 é¦–æ¬¡è®­ç»ƒé¢„æœŸè¾“å‡º

```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Isaac Lab
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[INFO]: Hello World!
[INFO]: Isaac Sim Version: 4.5.0
[INFO]: Isaac Lab Version: 0.46.4
[INFO]: Device: cuda:0
[INFO]: CPU: Intel i7-9750H
[INFO]: GPU: NVIDIA RTX 4060

Loading environment...
Loading config from: train_cfg_v2.yaml
Creating RL environment...
  - num_envs: 32
  - num_actions: 2
  - num_obs: 246

Loading policy: GeoNavPolicy
  - Actor parameters: 300K
  - Critic parameters: 500K

Starting training...
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Iteration: 1/1000
  Mean reward: -15.3
  Mean episode length: 45
  Mean value_function loss: 15.2
  Learning rate: 3.0e-4

Iteration: 100/1000
  Mean reward: 85.7
  Mean episode length: 120
  Mean value_function loss: 8.5
  Learning rate: 3.0e-4
...
```

### 11.2.3 è®­ç»ƒæˆåŠŸæ ‡å¿—

**âœ… æ­£å¸¸è®­ç»ƒçš„ç‰¹å¾**ï¼š
```
1. å¥–åŠ±æ›²çº¿ï¼ˆMean rewardï¼‰é€æ¸ä¸Šå‡
   - åˆæœŸï¼š-50 ~ -10ï¼ˆæ¢ç´¢é˜¶æ®µï¼‰
   - ä¸­æœŸï¼š50 ~ 200ï¼ˆå­¦ä¹ é˜¶æ®µï¼‰
   - åæœŸï¼š500 ~ 1500ï¼ˆç†Ÿç»ƒé˜¶æ®µï¼‰

2. Episodeé•¿åº¦é€æ¸å¢åŠ 
   - åˆæœŸï¼š50-100æ­¥ï¼ˆç»å¸¸ç¢°æ’ï¼‰
   - ä¸­æœŸï¼š100-200æ­¥ï¼ˆå¼€å§‹å­¦ä¼šé¿éšœï¼‰
   - åæœŸï¼š200-400æ­¥ï¼ˆç†Ÿç»ƒå¯¼èˆªï¼‰

3. value_function_lossä¿æŒæœ‰é™å€¼
   - æ­£å¸¸ï¼š5-20
   - å¼‚å¸¸ï¼šinfæˆ–nanï¼ˆæ¢¯åº¦çˆ†ç‚¸ï¼‰

4. GPUåˆ©ç”¨ç‡>80%
   - æ£€æŸ¥ï¼šnvidia-smi
   - æ­£å¸¸ï¼šGPU-Util: 80-95%
```

**âŒ å¼‚å¸¸è®­ç»ƒçš„ç‰¹å¾**ï¼š
```
1. å¥–åŠ±æ›²çº¿ä¸ä¸Šå‡ï¼ˆä¸€ç›´åœ¨0é™„è¿‘ï¼‰
   - åŸå› ï¼šå­¦ä¹ ç‡å¤ªä½ã€å¥–åŠ±å‡½æ•°è®¾è®¡é—®é¢˜

2. å¥–åŠ±æ›²çº¿éœ‡è¡ï¼ˆå‰§çƒˆæ³¢åŠ¨ï¼‰
   - åŸå› ï¼šå­¦ä¹ ç‡å¤ªé«˜ã€ç†µç³»æ•°å¤ªé«˜

3. Mean episode lengthæŒç»­å¾ˆçŸ­ï¼ˆ<50æ­¥ï¼‰
   - åŸå› ï¼šæœºå™¨äººç«‹å³ç¢°æ’ã€ç»ˆæ­¢æ¡ä»¶å¤ªä¸¥æ ¼

4. value_function_loss = infæˆ–nan
   - åŸå› ï¼šæ¢¯åº¦çˆ†ç‚¸ï¼ˆv3.1å·²ä¿®å¤ï¼‰
```

## 11.3 è®­ç»ƒç›‘æ§

### 11.3.1 å®æ—¶ç›‘æ§å‘½ä»¤

```bash
# [ç»ˆç«¯1] è¿è¡Œè®­ç»ƒ
~/IsaacLab/isaaclab.sh -p train_v2.py --headless --num_envs 32

# [ç»ˆç«¯2] ç›‘æ§GPU
watch -n 1 nvidia-smi

# [ç»ˆç«¯3] ç›‘æ§è®­ç»ƒæ—¥å¿—
tail -f logs/dashgo_v5_auto/*/log.txt | grep "Mean reward"

# [ç»ˆç«¯4] ç›‘æ§TensorBoard
tensorboard --logdir logs/dashgo_v5_auto/
# ç„¶ååœ¨æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:6006
```

### 11.3.2 å…³é”®æŒ‡æ ‡ç›‘æ§

**æŒ‡æ ‡1ï¼šMean rewardï¼ˆå¹³å‡å¥–åŠ±ï¼‰**
```bash
# æŸ¥çœ‹å¹³å‡å¥–åŠ±
tail -f logs/*/log.txt | grep "Mean reward"

# æ­£å¸¸è¶‹åŠ¿ï¼š
Iter   1:   -15.3  (æ¢ç´¢é˜¶æ®µï¼Œéšæœºä¹±åŠ¨)
Iter   100:   85.7   (å¼€å§‹å­¦ä¹ )
Iter   500:   456.2  (å¿«é€Ÿè¿›æ­¥)
Iter   1000:  1250.8  (è¶‹äºæ”¶æ•›)

# å¼‚å¸¸è¶‹åŠ¿ï¼š
Iter   1:   -15.3
Iter   100:  -18.2   (æ²¡å­¦åˆ°ä¸œè¥¿)
Iter   500:  -22.1   (ç»§ç»­è®­ç»ƒæ— æ„ä¹‰)
```

**æŒ‡æ ‡2ï¼šMean episode lengthï¼ˆå¹³å‡episodeé•¿åº¦ï¼‰**
```bash
# æŸ¥çœ‹å¹³å‡episodeé•¿åº¦
tail -f logs/*/log.txt | grep "Mean episode length"

# æ­£å¸¸è¶‹åŠ¿ï¼š
Iter   1:   45   (æ—©æœŸç¢°æ’)
Iter   100:  120  (å­¦ä¼šé¿éšœ)
Iter   500:  250  (é•¿è·ç¦»å¯¼èˆª)

# å¼‚å¸¸è¶‹åŠ¿ï¼š
Iter   1:   45
Iter   100:  38   (åè€Œå˜çŸ­ï¼Œå¯èƒ½é—®é¢˜)
```

**æŒ‡æ ‡3ï¼šæˆåŠŸç‡ï¼ˆSuccess Rateï¼‰**
```python
# è®¡ç®—æˆåŠŸç‡
æˆåŠŸç‡ = (åˆ°è¾¾ç›®æ ‡æ¬¡æ•° / æ€»episodeæ•°) Ã— 100%

# æ­£å¸¸èŒƒå›´ï¼š
åˆæœŸï¼ˆ1-100è½®ï¼‰ï¼š0-10%
ä¸­æœŸï¼ˆ100-500è½®ï¼‰ï¼š10-50%
åæœŸï¼ˆ500-1000è½®ï¼‰ï¼š50-80%
```

### 11.3.3 TensorBoardå¯è§†åŒ–

```bash
# å¯åŠ¨TensorBoard
tensorboard --logdir logs/dashgo_v5_auto/ --port 6006

# æµè§ˆå™¨è®¿é—®
http://localhost:6006

# å¯è§†åŒ–å†…å®¹ï¼š
1. SCALARSï¼ˆæ ‡é‡ï¼‰
   - train/mean_rewardï¼šå¥–åŠ±æ›²çº¿
   - train/mean_episode_lengthï¼šepisodeé•¿åº¦æ›²çº¿
   - train/learning_rateï¼šå­¦ä¹ ç‡å˜åŒ–
   - train/entropy_coefï¼šç†µç³»æ•°å˜åŒ–

2. æŸ¥çœ‹æ›²çº¿è¶‹åŠ¿
   - ä¸Šå‡è¶‹åŠ¿ = å­¦ä¹ è¿›è¡Œä¸­
   - å¹³ç¨³ = è¶‹äºæ”¶æ•›
   - ä¸‹é™ = å¯èƒ½å‡ºé—®é¢˜
```

## 11.4 è®­ç»ƒä¸­æ–­æ¢å¤

### 11.4.1 æ­£å¸¸ä¸­æ–­ï¼ˆç”¨æˆ·æ‰‹åŠ¨åœæ­¢ï¼‰

```bash
# æŒ‰ Ctrl+C åœæ­¢è®­ç»ƒ
# è®­ç»ƒå™¨ä¼šè‡ªåŠ¨ä¿å­˜å½“å‰æ¨¡å‹

# æŸ¥çœ‹ä¿å­˜çš„æ¨¡å‹
ls -lh logs/dashgo_v5_auto/model_*.pt

# ä»checkpointæ¢å¤è®­ç»ƒ
~/IsaacLab/isaaclab.sh -p train_v2.py --headless --resume --load_run logs/dashgo_v5_auto
```

### 11.4.2 å¼‚å¸¸ä¸­æ–­ï¼ˆå´©æºƒ/æ–­ç”µï¼‰

```bash
# RSL-RLè‡ªåŠ¨ä¿å­˜æœºåˆ¶
# æ¯100è½®è‡ªåŠ¨ä¿å­˜ï¼šmodel_100.pt, model_200.pt, ...

# æŸ¥æ‰¾æœ€æ–°çš„checkpoint
ls -lt logs/dashgo_v5_auto/model_*.pt | head -1

# ä»ç‰¹å®šcheckpointæ¢å¤
~/IsaacLab/isaaclab.sh -p train_v2.py \
  --headless \
  --resume \
  --checkpoint logs/dashgo_v5_auto/model_500.pt
```

### 11.4.3 ä¿®æ”¹å‚æ•°åç»§ç»­è®­ç»ƒ

```python
# åœºæ™¯ï¼šè®­ç»ƒ500è½®åå‘ç°å­¦ä¹ ç‡å¤ªé«˜
# 1. ä¿®æ”¹train_cfg_v2.yaml
learning_rate: 3.0e-4 â†’ 1.0e-4

# 2. ä»checkpointç»§ç»­
~/IsaacLab/isaaclab.sh -p train_v2.py \
  --headless \
  --resume \
  --load_run logs/dashgo_v5_auto
```

---

# ç¬¬åäºŒç« ï¼šå‚æ•°è°ƒä¼˜æŒ‡å—

## 12.1 æ ¸å¿ƒå‚æ•°è°ƒä¼˜

### 12.1.1 å­¦ä¹ ç‡è°ƒä¼˜

**ä½œç”¨**ï¼šæ§åˆ¶ç½‘ç»œæ›´æ–°æ­¥é•¿

**ç—‡çŠ¶è¯Šæ–­**ï¼š
```python
# [ç—‡çŠ¶1] å­¦ä¹ ç‡å¤ªé«˜
å¥–åŠ±æ›²çº¿å‰§çƒˆéœ‡è¡
Mean reward:
  Iter 100: 500.2
  Iter 101: -234.1  (çªç„¶ä¸‹é™)
  Iter 102: 678.3   (çªç„¶ä¸Šå‡)
  Iter 103: -123.5

# è§£å†³ï¼šé™ä½å­¦ä¹ ç‡
learning_rate: 3.0e-4 â†’ 1.0e-4

# [ç—‡çŠ¶2] å­¦ä¹ ç‡å¤ªä½
å¥–åŠ±æ›²çº¿å‡ ä¹ä¸ä¸Šå‡
Mean reward:
  Iter 100: 15.3
  Iter 500: 18.7   (400è½®åªæ¶¨äº†3.4)
  Iter 1000: 20.1

# è§£å†³ï¼šæé«˜å­¦ä¹ ç‡
learning_rate: 3.0e-4 â†’ 5.0e-4

# [ç—‡çŠ¶3] å­¦ä¹ ç‡åˆšåˆšå¥½
å¥–åŠ±æ›²çº¿å¹³ç¨³ä¸Šå‡
Mean reward:
  Iter 100: 85.7
  Iter 200: 234.1
  Iter 300: 456.8
  Iter 400: 678.2

# ä¿æŒä¸å˜
learning_rate: 3.0e-4 âœ…
```

**è°ƒä¼˜ç­–ç•¥**ï¼š
```
åˆå§‹å€¼ï¼š3.0e-4ï¼ˆPPOæ ‡å‡†å€¼ï¼‰

è°ƒæ•´è§„åˆ™ï¼š
- å¥–åŠ±éœ‡è¡ï¼ˆæ–¹å·®å¤§ï¼‰ â†’ é™ä½å­¦ä¹ ç‡ï¼ˆÃ·2ï¼‰
- æ”¶æ•›å¤ªæ…¢ï¼ˆæ–œç‡å°ï¼‰ â†’ æé«˜å­¦ä¹ ç‡ï¼ˆÃ—2ï¼‰
- è®­ç»ƒç¨³å®šä¸”æ”¶æ•›å¿« â†’ ä¿æŒä¸å˜

è°ƒæ•´èŒƒå›´ï¼š
- æœ€å°å€¼ï¼š1.0e-5ï¼ˆå†å°å¯èƒ½ä¸æ”¶æ•›ï¼‰
- æœ€å¤§å€¼ï¼š1.0e-3ï¼ˆå†å¤§å¯èƒ½ä¸ç¨³å®šï¼‰
```

### 12.1.2 ç†µç³»æ•°è°ƒä¼˜

**ä½œç”¨**ï¼šæ§åˆ¶æ¢ç´¢ç¨‹åº¦

**ç—‡çŠ¶è¯Šæ–­**ï¼š
```python
# [ç—‡çŠ¶1] ç†µç³»æ•°å¤ªé«˜ï¼ˆè¿‡åº¦æ¢ç´¢ï¼‰
æœºå™¨äººè¡Œä¸ºï¼šéšæœºä¹±åŠ¨ï¼Œåƒ"å–é†‰äº†"
Mean reward: é•¿æœŸä¿æŒåœ¨0é™„è¿‘

# è§£å†³ï¼šé™ä½ç†µç³»æ•°
entropy_coef: 0.01 â†’ 0.005

# [ç—‡çŠ¶2] ç†µç³»æ•°å¤ªä½ï¼ˆæ¢ç´¢ä¸è¶³ï¼‰
æœºå™¨äººè¡Œä¸ºï¼šè¿‡æ—©æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜
è¡¨ç°ï¼šæ¯æ¬¡éƒ½æ˜¯ç›¸åŒçš„è·¯çº¿ï¼Œå³ä½¿æœ‰æ›´ä¼˜è·¯å¾„

# è§£å†³ï¼šæé«˜ç†µç³»æ•°
entropy_coef: 0.01 â†’ 0.02

# [ç—‡çŠ¶3] ç†µç³»æ•°åˆšåˆšå¥½
æœºå™¨äººè¡Œä¸ºï¼šæœ‰æ¢ç´¢ä¹Ÿæœ‰åˆ©ç”¨
è¡¨ç°ï¼šæˆåŠŸç‡æŒç»­ä¸Šå‡

# ä¿æŒä¸å˜
entropy_coef: 0.01 âœ…
```

**è°ƒä¼˜ç­–ç•¥**ï¼š
```
åˆå§‹å€¼ï¼š0.01ï¼ˆPPOæ ‡å‡†å€¼ï¼‰

è°ƒæ•´è§„åˆ™ï¼š
- è¿‡åº¦æ¢ç´¢ï¼ˆéšæœºä¹±åŠ¨ï¼‰ â†’ é™ä½ç†µç³»æ•°ï¼ˆÃ·2ï¼‰
- æ¢ç´¢ä¸è¶³ï¼ˆé‡å¤è·¯å¾„ï¼‰ â†’ æé«˜ç†µç³»æ•°ï¼ˆÃ—2ï¼‰
- å¹³è¡¡æ¢ç´¢/åˆ©ç”¨ â†’ ä¿æŒä¸å˜

è°ƒæ•´èŒƒå›´ï¼š
- æœ€å°å€¼ï¼š0.001ï¼ˆå†å°å‡ ä¹ä¸æ¢ç´¢ï¼‰
- æœ€å¤§å€¼ï¼š0.05ï¼ˆå†å¤§çº¯éšæœºï¼‰
```

### 12.1.3 ç½‘ç»œæ¶æ„è°ƒä¼˜

**Actor vs Criticä¸å¹³è¡¡**ï¼š
```python
# [ç—‡çŠ¶] Criticå¤ªå¼±
value_function_loss: æŒç»­å¾ˆé«˜ï¼Œä¸æ”¶æ•›
Mean reward: æ³¢åŠ¨å¤§

# è§£å†³ï¼šå¢å¼ºCritic
critic_hidden_dims: [256, 128] â†’ [512, 256, 128]

# [ç—‡çŠ¶] Actorå¤ªå¼±
action: å‡ ä¹ä¸å˜ï¼Œæ€»æ˜¯è¾“å‡ºåŒä¸€ä¸ªåŠ¨ä½œ

# è§£å†³ï¼šå¢å¼ºActor
actor_hidden_dims: [64, 32] â†’ [128, 64]

# [ç—‡çŠ¶] åˆšåˆšå¥½
è®­ç»ƒç¨³å®šï¼Œæ”¶æ•›å¿«

# ä¿æŒä¸å˜
actor_hidden_dims: [128, 64] âœ…
critic_hidden_dims: [512, 256, 128] âœ…
```

**éå¯¹ç§°æ¶æ„ä¼˜åŠ¿**ï¼š
```
ä¸ºä»€ä¹ˆActorå°ã€Criticå¤§ï¼Ÿ

Actorï¼ˆåŠ¨ä½œè¾“å‡ºï¼‰ï¼š
- ç›®æ ‡ï¼šé€‰æ‹©åŠ¨ä½œ
- éœ€è¦ï¼šè½»é‡ã€å¿«é€Ÿï¼ˆéƒ¨ç½²å‹å¥½ï¼‰
- å‚æ•°ï¼š128, 64ï¼ˆè½»é‡çº§ï¼‰

Criticï¼ˆä»·å€¼è¯„ä¼°ï¼‰ï¼š
- ç›®æ ‡ï¼šè¯„ä¼°çŠ¶æ€ä»·å€¼
- éœ€è¦ï¼šå‡†ç¡®ã€å…¨é¢
- å‚æ•°ï¼š512, 256, 128ï¼ˆå¼ºåŠ›ç½‘ç»œï¼‰

ä¼˜åŠ¿ï¼š
1. Actorå° â†’ æ¨ç†å¿« â†’ é€‚é…Jetson Nano
2. Criticå¤§ â†’ è¯„ä¼°å‡† â†’ è®­ç»ƒç¨³å®š
3. éå¯¹ç§°è®¾è®¡ â†’ ä¼˜åŒ–ç›®æ ‡æ˜ç¡®
```

## 12.2 å¥–åŠ±å‡½æ•°è°ƒä¼˜

### 12.2.1 å¥–åŠ±æƒé‡è°ƒæ•´

**é—®é¢˜1ï¼šæœºå™¨äººä¸ç§»åŠ¨**
```python
# åŸå› ï¼šå‰è¿›å¥–åŠ±å¤ªå¼±
velodyne_style = RewardTermCfg(weight=0.5)  # å¤ªå¼±

# è§£å†³ï¼šæé«˜å‰è¿›å¥–åŠ±
velodyne_style = RewardTermCfg(weight=1.0)  # æé«˜åˆ°1.0

# æˆ–æ·»åŠ alive penaltyï¼ˆç”Ÿå­˜å‹åŠ›ï¼‰
alive_penalty = RewardTermCfg(
    func=reward_alive,
    weight=-0.1  # æ¯æ­¥-0.1ï¼Œé¼“åŠ±å¿«é€Ÿå®Œæˆ
)
```

**é—®é¢˜2ï¼šæœºå™¨äººåªè½¬åœˆä¸å‰è¿›**
```python
# åŸå› ï¼šæœå‘å¥–åŠ±æƒé‡å¤ªé«˜
facing_goal = RewardTermCfg(weight=1.0)  # å¤ªé«˜

# è§£å†³ï¼šé™ä½æœå‘å¥–åŠ±
facing_goal = RewardTermCfg(weight=0.1)  # é™ä½åˆ°0.1

# æˆ–å®Œå…¨ç§»é™¤æœå‘å¥–åŠ±
# facing_goal = RewardTermCfg(weight=0.0)  # v5.0é‡‡ç”¨æ­¤æ–¹æ¡ˆ
```

**é—®é¢˜3ï¼šæœºå™¨äºº"èººå¹³"**
```python
# åŸå› ï¼šå¥–åŠ±ä¿¡å·å¤ªå¼±
reach_goal = RewardTermCfg(weight=500.0)  # ä¸å¤Ÿå¸å¼•

# è§£å†³ï¼šå¤§å¹…æé«˜åˆ°è¾¾å¥–åŠ±
reach_goal = RewardTermCfg(weight=2000.0)  # æé«˜åˆ°2000.0
```

### 12.2.2 å¥–åŠ±è£å‰ªè°ƒæ•´

**é—®é¢˜ï¼šå¥–åŠ±å€¼è¿‡å¤§/è¿‡å°**
```python
# å¥–åŠ±è£å‰ªèŒƒå›´
reward_clip_min = -20.0
reward_clip_max = 120.0

# [ç—‡çŠ¶] å¥–åŠ±ç»å¸¸è¢«è£æ–­åˆ°ä¸Šé™
å¾ˆå¤šreward = 120.0ï¼ˆè¾¾åˆ°ä¸Šé™ï¼‰

# è§£å†³ï¼šæé«˜ä¸Šé™
reward_clip_max = 120.0 â†’ 200.0

# [ç—‡çŠ¶] å¥–åŠ±ç»å¸¸è¢«è£æ–­åˆ°ä¸‹é™
å¾ˆå¤šreward = -20.0ï¼ˆè¾¾åˆ°ä¸‹é™ï¼‰

# è§£å†³ï¼šé™ä½ä¸‹é™
reward_clip_min = -20.0 â†’ -50.0
```

## 12.3 è¯¾ç¨‹å­¦ä¹ è°ƒä¼˜

### 12.3.1 éš¾åº¦æ›²çº¿è°ƒæ•´

**å½“å‰é…ç½®ï¼ˆv5.0ï¼‰**ï¼š
```python
# è‡ªåŠ¨è¯¾ç¨‹å­¦ä¹ 
curriculum:
  target_expansion:
    min_limit: 1.5   # åˆå§‹è·ç¦»ï¼ˆå¹¼å„¿å›­ï¼‰
    max_limit: 8.0    # æœ€ç»ˆè·ç¦»ï¼ˆä¸“å®¶åŒºï¼‰
    start_step: 0
    end_step: è‡ªåŠ¨è®¡ç®— # æ€»æ­¥æ•°çš„75%
```

**é—®é¢˜1ï¼šéš¾åº¦æå‡å¤ªå¿«**
```
ç—‡çŠ¶ï¼š
- åˆæœŸæˆåŠŸç‡å¾ˆé«˜ï¼ˆ>60%ï¼‰
- ä¸­æœŸçªç„¶ä¸‹é™ï¼ˆ<20%ï¼‰
- åæœŸæ¢å¤ç¼“æ…¢

è§£å†³ï¼šæ”¾æ…¢éš¾åº¦æå‡
end_step: æ€»æ­¥æ•°Ã—0.75 â†’ æ€»æ­¥æ•°Ã—0.9
```

**é—®é¢˜2ï¼šéš¾åº¦æå‡å¤ªæ…¢**
```
ç—‡çŠ¶ï¼š
- åˆæœŸæˆåŠŸç‡å¾ˆä½ï¼ˆ<10%ï¼‰
- é•¿æ—¶é—´åœç•™åœ¨ç®€å•ä»»åŠ¡
- æœ€ç»ˆæ•ˆæœä¸å¥½

è§£å†³ï¼šåŠ å¿«éš¾åº¦æå‡
end_step: æ€»æ­¥æ•°Ã—0.75 â†’ æ€»æ­¥æ•°Ã—0.5
```

**é—®é¢˜3ï¼šéš¾åº¦æ›²çº¿åˆšåˆšå¥½**
```
ç—‡çŠ¶ï¼š
- æˆåŠŸç‡å¹³ç¨³ä¸Šå‡
- æœ€ç»ˆæˆåŠŸç‡>70%
- æ— æ˜æ˜¾åœæ»

ä¿æŒä¸å˜ âœ…
```

### 12.3.2 åˆå§‹/æœ€ç»ˆè·ç¦»è°ƒæ•´

```python
# [ä¿å®ˆæ–¹æ¡ˆ] é€‚åˆ0åŸºç¡€è®­ç»ƒ
min_limit: 1.0   # æ›´ç®€å•
max_limit: 5.0    # æ›´ä¿å®ˆ

# [æ ‡å‡†æ–¹æ¡ˆ] å½“å‰é…ç½®
min_limit: 1.5   # æ ‡å‡†
max_limit: 8.0    # æ ‡å‡†

# [æŒ‘æˆ˜æ–¹æ¡ˆ] é€‚åˆé«˜çº§è®­ç»ƒ
min_limit: 2.0   # æ›´éš¾
max_limit: 10.0   # æ›´è¿œ
```

## 12.4 å®Œæ•´è°ƒä¼˜æµç¨‹

### 12.4.1 è°ƒä¼˜å¾ªç¯

```
1. åŸºçº¿è®­ç»ƒ
   â””â”€> ä½¿ç”¨æ ‡å‡†å‚æ•°è®­ç»ƒ1000è½®
   â””â”€> è®°å½•æœ€ç»ˆå¥–åŠ±å’ŒæˆåŠŸç‡

2. è¯Šæ–­é—®é¢˜
   â””â”€> åˆ†æè®­ç»ƒæ›²çº¿
   â””â”€> è¯†åˆ«ç“¶é¢ˆï¼ˆå­¦ä¹ ç‡ï¼Ÿå¥–åŠ±ï¼Ÿç½‘ç»œï¼Ÿï¼‰

3. è°ƒæ•´å‚æ•°
   â””â”€> ä¿®æ”¹1-2ä¸ªå‚æ•°
   â””â”€> é‡æ–°è®­ç»ƒ1000è½®

4. å¯¹æ¯”æ•ˆæœ
   â””â”€> å¯¹æ¯”è°ƒä¼˜å‰åçš„å¥–åŠ±æ›²çº¿
   â””â”€> å¦‚æœæ•ˆæœæ›´å¥½ â†’ é‡‡ç”¨æ–°å‚æ•°
   â””â”€> å¦‚æœæ•ˆæœå˜å·® â†’ å›é€€æˆ–æ¢æ–¹å‘

5. é‡å¤ç›´åˆ°æ»¡æ„
```

### 12.4.2 è°ƒä¼˜è®°å½•æ¨¡æ¿

```markdown
## è°ƒä¼˜è®°å½•

### å®éªŒ1ï¼šåŸºçº¿
- å‚æ•°ï¼šlearning_rate=3e-4, entropy_coef=0.01
- è®­ç»ƒè½®æ•°ï¼š1000
- æœ€ç»ˆå¥–åŠ±ï¼š456.2
- æˆåŠŸç‡ï¼š45%

### å®éªŒ2ï¼šé™ä½å­¦ä¹ ç‡
- å‚æ•°ï¼šlearning_rate=1e-4, entropy_coef=0.01
- è®­ç»ƒè½®æ•°ï¼š1000
- æœ€ç»ˆå¥–åŠ±ï¼š523.8ï¼ˆ+14.8%ï¼‰
- æˆåŠŸç‡ï¼š52%ï¼ˆ+7%ï¼‰
- ç»“è®ºï¼šâœ… æœ‰æ•ˆ

### å®éªŒ3ï¼šæé«˜ç†µç³»æ•°
- å‚æ•°ï¼šlearning_rate=1e-4, entropy_coef=0.02
- è®­ç»ƒè½®æ•°ï¼š1000
- æœ€ç»ˆå¥–åŠ±ï¼š498.5ï¼ˆ-4.8%ï¼‰
- æˆåŠŸç‡ï¼š48%ï¼ˆ-4%ï¼‰
- ç»“è®ºï¼šâŒ æ— æ•ˆï¼Œä¿æŒå®éªŒ2
```

---

# ç¬¬åä¸‰ç« ï¼šè®­ç»ƒç›‘æ§ä¸è°ƒè¯•

## 13.1 è®­ç»ƒè¿‡ç¨‹ç›‘æ§

### 13.1.1 å®æ—¶ç›‘æ§è„šæœ¬

```bash
#!/bin/bash
# monitor_training.sh - è®­ç»ƒç›‘æ§è„šæœ¬

LOG_FILE="logs/dashgo_v5_auto/*/log.txt"

echo "ğŸ” è®­ç»ƒç›‘æ§å¯åŠ¨..."
echo "æŒ‰ Ctrl+C åœæ­¢"

while true; do
  clear
  echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  echo "è®­ç»ƒç›‘æ§ - $(date '+%Y-%m-%d %H:%M:%S')"
  echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  
  # [1] å½“å‰è¿­ä»£
  echo -n "ğŸ“ å½“å‰è¿­ä»£: "
  tail -n 100 $LOG_FILE | grep "Iteration:" | tail -1
  
  # [2] å¹³å‡å¥–åŠ±
  echo -n "ğŸ’° å¹³å‡å¥–åŠ±: "
  tail -n 100 $LOG_FILE | grep "Mean reward" | tail -1
  
  # [3] Episodeé•¿åº¦
  echo -n "ğŸ“ Episodeé•¿åº¦: "
  tail -n 100 $LOG_FILE | grep "Mean episode length" | tail -1
  
  # [4] å€¼å‡½æ•°æŸå¤±
  echo -n "ğŸ“‰ å€¼å‡½æ•°æŸå¤±: "
  tail -n 100 $LOG_FILE | grep "Mean value_function loss" | tail -1
  
  # [5] å­¦ä¹ ç‡
  echo -n "ğŸ“š å­¦ä¹ ç‡: "
  tail -n 100 $LOG_FILE | grep "Learning rate:" | tail -1
  
  # [6] GPUçŠ¶æ€
  echo ""
  echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  echo "GPUçŠ¶æ€:"
  nvidia-smi --query-gpu=index,utilization.gpu,memory.used,memory.total --format=csv,noheader,nounits
  
  # [7] æœ€æ–°æ¨¡å‹
  echo ""
  echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  echo "æœ€æ–°æ¨¡å‹:"
  ls -lt logs/dashgo_v5_auto/model_*.pt 2>/dev/null | head -3
  
  sleep 10
done
```

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x monitor_training.sh

# è¿è¡Œç›‘æ§
./monitor_training.sh
```

### 13.1.2 TensorBoardé«˜çº§ç”¨æ³•

```bash
# å¯åŠ¨TensorBoard
tensorboard --logdir logs/dashgo_v5_auto/ --port 6006

# è®¿é—®
http://localhost:6006

# é«˜çº§åŠŸèƒ½ï¼š
1. å¯¹æ¯”å¤šæ¬¡è®­ç»ƒ
   tensorboard --logdir logs/exp1:logs/exp2:logs/exp3

2. å¹³æ»‘æ›²çº¿
   - Settings â†’ Smoothing â†’ è°ƒæ•´æ»‘çª—å¤§å°

3. ä¸‹è½½æ›²çº¿æ•°æ®
   - é€‰æ‹©æ›²çº¿ â†’ Download CSV
```

## 13.2 å¸¸è§é—®é¢˜è¯Šæ–­

### 13.2.1 è¯Šæ–­å·¥å…·

```python
# diagnose_training.py - è®­ç»ƒè¯Šæ–­å·¥å…·

import re
import numpy as np

def diagnose_training(log_file):
    """è¯Šæ–­è®­ç»ƒé—®é¢˜"""
    
    # è¯»å–æ—¥å¿—
    with open(log_file, 'r') as f:
        lines = f.readlines()
    
    # æå–å…³é”®æŒ‡æ ‡
    iterations = []
    rewards = []
    episode_lengths = []
    value_losses = []
    
    for line in lines:
        if "Iteration:" in line and "Mean reward" in line:
            iter_num = int(re.search(r"Iteration:\s+(\d+)", line).group(1))
            mean_reward = float(re.search(r"Mean reward:\s+([\-\d\.]+)", line).group(1))
            mean_ep_len = float(re.search(r"Mean episode length:\s+([\d\.]+)", line).group(1))
            value_loss = float(re.search(r"Mean value_function loss:\s+([\-\d\.]+)", line).group(1))
            
            iterations.append(iter_num)
            rewards.append(mean_reward)
            episode_lengths.append(mean_ep_len)
            value_losses.append(value_loss)
    
    # è¯Šæ–­
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("è®­ç»ƒè¯Šæ–­æŠ¥å‘Š")
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    
    # [1] å¥–åŠ±è¶‹åŠ¿
    print("\n[1] å¥–åŠ±è¶‹åŠ¿åˆ†æ:")
    if len(rewards) > 100:
        early_reward = np.mean(rewards[:100])
        late_reward = np.mean(rewards[-100:])
        improvement = late_reward - early_reward
        
        print(f"  åˆæœŸå¹³å‡å¥–åŠ±: {early_reward:.2f}")
        print(f"  åæœŸå¹³å‡å¥–åŠ±: {late_reward:.2f}")
        print(f"  æ”¹è¿›å¹…åº¦: {improvement:.2f}")
        
        if improvement > 0:
            print(f"  âœ… å¥–åŠ±ä¸Šå‡{improvement:.2f}ï¼Œè®­ç»ƒæœ‰æ•ˆ")
        else:
            print(f"  âŒ å¥–åŠ±ä¸‹é™æˆ–åœæ»ï¼Œéœ€è¦è°ƒä¼˜")
    
    # [2] Episodeé•¿åº¦è¶‹åŠ¿
    print("\n[2] Episodeé•¿åº¦åˆ†æ:")
    if len(episode_lengths) > 100:
        early_len = np.mean(episode_lengths[:100])
        late_len = np.mean(episode_lengths[-100:])
        
        print(f"  åˆæœŸå¹³å‡é•¿åº¦: {early_len:.1f}æ­¥")
        print(f"  åæœŸå¹³å‡é•¿åº¦: {late_len:.1f}æ­¥")
        
        if late_len > early_len:
            print(f"  âœ… Episodeé•¿åº¦å¢åŠ ï¼Œæœºå™¨äººå­˜æ´»æ›´ä¹…")
        else:
            print(f"  âš ï¸ Episodeé•¿åº¦å‡å°‘ï¼Œå¯èƒ½æœ‰é—®é¢˜")
    
    # [3] å€¼å‡½æ•°æŸå¤±
    print("\n[3] å€¼å‡½æ•°æŸå¤±åˆ†æ:")
    if len(value_losses) > 100:
        recent_losses = value_losses[-100:]
        inf_count = sum(1 for x in recent_losses if x > 1e6)
        
        print(f"  æœ€è¿‘100è½®å¹³å‡æŸå¤±: {np.mean(recent_losses):.2f}")
        print(f"  inf/nanå‡ºç°æ¬¡æ•°: {inf_count}")
        
        if inf_count > 0:
            print(f"  âŒ æ£€æµ‹åˆ°æ¢¯åº¦çˆ†ç‚¸ï¼éœ€è¦æ£€æŸ¥v3.1ä¿®å¤")
        else:
            print(f"  âœ… å€¼å‡½æ•°æŸå¤±æ­£å¸¸")
    
    # [4] è®­ç»ƒç¨³å®šæ€§
    print("\n[4] è®­ç»ƒç¨³å®šæ€§åˆ†æ:")
    if len(rewards) > 100:
        reward_std = np.std(rewards[-100:])
        print(f"  å¥–åŠ±æ ‡å‡†å·®: {reward_std:.2f}")
        
        if reward_std < 50:
            print(f"  âœ… è®­ç»ƒç¨³å®š")
        elif reward_std < 150:
            print(f"  âš ï¸ è®­ç»ƒç•¥æœ‰æ³¢åŠ¨")
        else:
            print(f"  âŒ è®­ç»ƒä¸ç¨³å®šï¼Œè€ƒè™‘é™ä½å­¦ä¹ ç‡")

if __name__ == "__main__":
    import sys
    diagnose_training(sys.argv[1])
```

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
python diagnose_training.py logs/dashgo_v5_auto/*/log.txt
```

### 13.2.2 é—®é¢˜å®šä½å†³ç­–æ ‘

```
è®­ç»ƒé—®é¢˜å†³ç­–æ ‘ï¼š
â”‚
â”œâ”€ [é—®é¢˜1] å¥–åŠ±ä¸ä¸Šå‡
â”‚   â”œâ”€ æ£€æŸ¥learning_rate
â”‚   â”‚   â”œâ”€ å¤ªé«˜ï¼ˆ>1e-3ï¼‰ â†’ é™ä½åˆ°3e-4
â”‚   â”‚   â”œâ”€ å¤ªä½ï¼ˆ<1e-5ï¼‰ â†’ æé«˜åˆ°3e-4
â”‚   â”‚   â””â”€ æ­£å¸¸ â†’ æ£€æŸ¥å¥–åŠ±å‡½æ•°
â”‚   â”‚       â”œâ”€ reach_goalæƒé‡å¤ªä½ â†’ æé«˜åˆ°2000.0
â”‚   â”‚       â””â”€ å…¶ä»– â†’ ç»§ç»­æ£€æŸ¥
â”‚   â””â”€ é‡æ–°è®­ç»ƒ
â”‚
â”œâ”€ [é—®é¢˜2] å¥–åŠ±å‰§çƒˆéœ‡è¡
â”‚   â”œâ”€ æ£€æŸ¥learning_rate
â”‚   â”‚   â””â”€ é™ä½åˆ°1e-4æˆ–5e-5
â”‚   â”œâ”€ æ£€æŸ¥entropy_coef
â”‚   â”‚   â””â”€ é™ä½åˆ°0.005
â”‚   â””â”€ é‡æ–°è®­ç»ƒ
â”‚
â”œâ”€ [é—®é¢˜3] å¥–åŠ±è¾¾åˆ°ä¸Šé™ï¼ˆ120.0ï¼‰
â”‚   â”œâ”€ æé«˜reward_clip_max
â”‚   â”‚   â””â”€ 120.0 â†’ 200.0
â”‚   â””â”€ é‡æ–°è®­ç»ƒ
â”‚
â””â”€ [é—®é¢˜4] value_function_loss = inf
    â”œâ”€ æ£€æŸ¥æ˜¯å¦v3.1ç‰ˆæœ¬
    â”‚   â””â”€ å¦ â†’ å‡çº§åˆ°v3.1ï¼ˆLayerNormé˜²æŠ¤ï¼‰
    â”œâ”€ æ£€æŸ¥learning_rate
    â”‚   â””â”€ é™ä½å­¦ä¹ ç‡
    â””â”€ æ£€æŸ¥è¾“å…¥å½’ä¸€åŒ–
        â””â”€ ç¡®ä¿empirical_normalization=True
```

## 13.3 è°ƒè¯•æŠ€å·§

### 13.3.1 GUIæ¨¡å¼è°ƒè¯•

```bash
# å¯åŠ¨GUIæ¨¡å¼ï¼ˆå¯ä»¥çœ‹åˆ°ä»¿çœŸï¼‰
~/IsaacLab/isaaclab.sh -p train_v2.py --num_envs 4

# è§‚å¯Ÿæœºå™¨äººè¡Œä¸ºï¼š
# 1. æ˜¯å¦ç«‹å³ç¢°æ’ï¼Ÿ â†’ ç»ˆæ­¢æ¡ä»¶å¤ªä¸¥æ ¼
# 2. æ˜¯å¦åŸåœ°è½¬åœˆï¼Ÿ â†’ æœå‘å¥–åŠ±å¤ªé«˜
# 3. æ˜¯å¦ä¸åŠ¨ï¼Ÿ â†’ å¥–åŠ±ä¿¡å·å¤ªå¼±
# 4. æ˜¯å¦ç§»åŠ¨ç¼“æ…¢ï¼Ÿ â†’ é€Ÿåº¦å¥–åŠ±å¤ªä½
```

### 13.3.2 å•ç¯å¢ƒå¿«é€Ÿæµ‹è¯•

```bash
# åªç”¨1ä¸ªç¯å¢ƒå¿«é€Ÿæµ‹è¯•
~/IsaacLab/isaaclab.sh -p train_v2.py --num_envs 1 --max_iterations 10

# ä¼˜ç‚¹ï¼š
# - å¿«é€Ÿï¼ˆå‡ åˆ†é’Ÿï¼‰
# - å¯ä»¥GUIè§‚å¯Ÿ
# - å¿«é€Ÿå‘ç°é—®é¢˜

# ç”¨é€”ï¼š
# - éªŒè¯ä»£ç ä¿®æ”¹
# - æµ‹è¯•å¥–åŠ±å‡½æ•°
# - è°ƒè¯•ä¼ æ„Ÿå™¨
```

### 13.3.3 å•å…ƒæµ‹è¯•

```python
# test_rewards.py - å¥–åŠ±å‡½æ•°å•å…ƒæµ‹è¯•

import torch
from dashgo_env_v2 import reward_navigation_sota

def test_reward_function():
    """æµ‹è¯•å¥–åŠ±å‡½æ•°"""
    # åˆ›å»ºæ¨¡æ‹Ÿç¯å¢ƒ
    env = create_test_env()
    
    # æµ‹è¯•ç”¨ä¾‹1ï¼šåˆ°è¾¾ç›®æ ‡
    print("æµ‹è¯•1ï¼šåˆ°è¾¾ç›®æ ‡")
    reward = reward_navigation_sota(env, ...)
    print(f"  å¥–åŠ±: {reward:.2f}")
    assert reward > 1000, "åˆ°è¾¾ç›®æ ‡å¥–åŠ±åº”è¯¥å¾ˆé«˜"
    
    # æµ‹è¯•ç”¨ä¾‹2ï¼šç¢°æ’
    print("æµ‹è¯•2ï¼šç¢°æ’")
    reward = reward_navigation_sota(env, ...)
    print(f"  å¥–åŠ±: {reward:.2f}")
    assert reward < -100, "ç¢°æ’æƒ©ç½šåº”è¯¥å¾ˆä½"
    
    # æµ‹è¯•ç”¨ä¾‹3ï¼šæ­£å¸¸å¯¼èˆª
    print("æµ‹è¯•3ï¼šæ­£å¸¸å¯¼èˆª")
    reward = reward_navigation_sota(env, ...)
    print(f"  å¥–åŠ±: {reward:.2f}")
    assert -50 < reward < 50, "æ­£å¸¸å¥–åŠ±åº”è¯¥åœ¨ä¸­é—´èŒƒå›´"

if __name__ == "__main__":
    test_reward_function()
```

---

# ç¬¬åå››ç« ï¼šå¸¸è§è®­ç»ƒé—®é¢˜

## 14.1 ç¯å¢ƒé…ç½®é—®é¢˜

### é—®é¢˜1ï¼šCUDA out of memory

**ç—‡çŠ¶**ï¼š
```
RuntimeError: CUDA out of memory. Tried to allocate XXX MiB
(GPU 0: 7.5 GiB total capacity; 6.8 GiB already allocated)
```

**åŸå› **ï¼š
- ç¯å¢ƒæ•°é‡å¤ªå¤šï¼ˆnum_envsè¿‡å¤§ï¼‰
- æ‰¹æ¬¡å¤§å°å¤ªå¤§ï¼ˆnum_mini_batcheså¤ªå°ï¼‰
- æ¨¡å‹å¤ªå¤§

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# [æ–¹æ¡ˆ1] é™ä½ç¯å¢ƒæ•°é‡
num_envs: 128 â†’ 64  # é™ä½ä¸€åŠ

# [æ–¹æ¡ˆ2] å¢åŠ å°æ‰¹é‡æ•°é‡
num_mini_batches: 4 â†’ 8  # åˆ†æ‰¹æ›´æ–°

# [æ–¹æ¡ˆ3] é™ä½æ¨¡å‹å®¹é‡
actor_hidden_dims: [128, 64] â†’ [64, 32]
critic_hidden_dims: [512, 256, 128] â†’ [256, 128, 64]
```

### é—®é¢˜2ï¼šAppLauncherå¯¼å…¥é¡ºåºé”™è¯¯

**ç—‡çŠ¶**ï¼š
```
--headlesså‚æ•°å¤±æ•ˆï¼Œçª—å£ä»ç„¶å¼¹å‡º
```

**åŸå› **ï¼š
```
âŒ é”™è¯¯é¡ºåºï¼š
import torch  # å…ˆå¯¼å…¥torch
from isaaclab.app import AppLauncher  # åå¯¼å…¥Isaac Lab
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# âœ… æ­£ç¡®é¡ºåºï¼ˆtrain_v2.pyç¬¬56-59è¡Œï¼‰
from isaaclab.app import AppLauncher  # å¿…é¡»æœ€å…ˆå¯¼å…¥

# ç¬¬206è¡Œï¼šå¯åŠ¨ä»¿çœŸå™¨
app_launcher = AppLauncher(args_cli)
simulation_app = app_launcher.app

# ç¬¬210è¡Œä¹‹åï¼šæ‰èƒ½å¯¼å…¥å…¶ä»–åº“
import torch
from isaaclab.envs import ManagerBasedRLEnv
```

### é—®é¢˜3ï¼šKeyError: 'num_steps_per_env'

**ç—‡çŠ¶**ï¼š
```
KeyError: 'num_steps_per_env'
```

**åŸå› **ï¼šé…ç½®åµŒå¥—åœ¨`runner:`ä¸‹ï¼ŒRSL-RLæ— æ³•æ‰¾åˆ°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# train_v2.pyç¬¬261-263è¡Œ
# [é…ç½®æ‰å¹³åŒ–] æå–åµŒå¥—å‚æ•°åˆ°æ ¹ç›®å½•
if "runner" in agent_cfg:
    runner_cfg = agent_cfg.pop("runner")
    agent_cfg.update(runner_cfg)  # æŠŠnum_steps_per_envæåˆ°æ ¹ç›®å½•
```

## 14.2 è®­ç»ƒç¨³å®šæ€§é—®é¢˜

### é—®é¢˜4ï¼šæ¢¯åº¦çˆ†ç‚¸

**ç—‡çŠ¶**ï¼š
```
value_function_loss: inf
Mean reward: nan
Policy loss: nan
```

**åŸå› **ï¼š
- ç¼ºå°‘LayerNormï¼ˆæ¢¯åº¦çˆ†ç‚¸ï¼‰
- è¾“å…¥æœªæˆªæ–­ï¼ˆInf/NaNä¼ æ’­ï¼‰
- Criticç½‘ç»œå¤ªå¼±ï¼ˆä¼°å€¼ä¸å‡†ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼ˆv3.1å·²ä¿®å¤ï¼‰ï¼š
```python
# âœ… ä¸‰å±‚é˜²æŠ¤

# 1. LayerNormï¼ˆæ‰€æœ‰ç½‘ç»œå±‚åï¼‰
self.fc = nn.Linear(64, 128)
self.ln = nn.LayerNorm(128)

# 2. Input Clampï¼ˆè¾“å…¥æˆªæ–­ï¼‰
x = torch.clamp(x, -10.0, 10.0)

# 3. Orthogonal Initï¼ˆæ­£äº¤åˆå§‹åŒ–ï¼‰
nn.init.orthogonal_(self.fc.weight, gain=np.sqrt(2))
```

### é—®é¢˜5ï¼šå¥–åŠ±é»‘å®¢

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººæ‰¾åˆ°æ¼æ´åˆ·åˆ†ï¼Œä¸å®Œæˆä»»åŠ¡
ä¾‹å­ï¼šåœ¨ç›®æ ‡é™„è¿‘ä¸åœè½¬åœˆåˆ·"æœå‘ç›®æ ‡"å¥–åŠ±
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# v5.0ï¼šç§»é™¤å¯è¢«åˆ©ç”¨çš„å¥–åŠ±
# âŒ æ—§æ–¹æ¡ˆ
facing_goal = RewardTermCfg(weight=1.0)  # å¯è¢«åˆ©ç”¨

# âœ… æ–°æ–¹æ¡ˆ
reach_goal = RewardTermCfg(
    weight=2000.0  # ç»å¯¹ä¸»å¯¼ï¼Œå…¶ä»–å¥–åŠ±éƒ½æ˜¯é™ªè¡¬
)
```

### é—®é¢˜6ï¼šæœºå™¨äºº"èººå¹³"

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººåœæ­¢ä¸åŠ¨ï¼Œç­‰å¾…episodeè¶…æ—¶
```

**åŸå› **ï¼š
- å¥–åŠ±ä¿¡å·å¤ªå¼±ï¼ˆreach_goalæƒé‡å¤ªä½ï¼‰
- ç§»åŠ¨æƒ©ç½šå¤ªå¤§

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# [æ–¹æ¡ˆ1] æé«˜åˆ°è¾¾å¥–åŠ±
reach_goal: 500.0 â†’ 2000.0

# [æ–¹æ¡ˆ2] æ·»åŠ ç”Ÿå­˜å‹åŠ›
alive_penalty = RewardTermCfg(
    func=reward_alive,
    weight=-0.1  # æ¯æ­¥-0.1ï¼Œé¼“åŠ±å¿«é€Ÿå®Œæˆ
)

# [æ–¹æ¡ˆ3] é™ä½ç§»åŠ¨æƒ©ç½š
action_smoothness = RewardTermCfg(
    func=reward_action_smoothness,
    weight=-0.01 â†’ -0.001  # é™ä½10å€
)
```

## 14.3 è¡Œä¸ºé—®é¢˜

### é—®é¢˜7ï¼šåŸåœ°è½¬åœˆ

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººä¸åœåŸåœ°æ—‹è½¬ï¼Œä¸å‰è¿›
```

**åŸå› **ï¼šæœå‘å¥–åŠ±æƒé‡å¤ªé«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# v5.0ï¼šå®Œå…¨ç§»é™¤æœå‘å¥–åŠ±
# âŒ æ—§æ–¹æ¡ˆ
facing_goal = RewardTermCfg(weight=1.0)

# âœ… æ–°æ–¹æ¡ˆï¼ˆåªä¿ç•™distance shapingï¼‰
shaping_distance = RewardTermCfg(
    func=log_distance_to_goal,
    weight=0.75
)
```

### é—®é¢˜8ï¼šç£¨æ´‹å·¥

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººé€Ÿåº¦å¾ˆæ…¢ï¼Œé¿éšœè¿‡äºä¿å®ˆ
```

**åŸå› **ï¼š
- ç¢°æ’æƒ©ç½šå¤ªé«˜
- é€Ÿåº¦å¥–åŠ±å¤ªä½

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# [æ–¹æ¡ˆ1] æé«˜é€Ÿåº¦é˜ˆå€¼
high_speed_threshold: 0.15 â†’ 0.25

# [æ–¹æ¡ˆ2] é™ä½ç¢°æ’æƒ©ç½š
collision_penalty: 0.5 â†’ 0.2

# [æ–¹æ¡ˆ3] æé«˜é«˜é€Ÿå¥–åŠ±
reward_high_speed: 0.2 â†’ 0.5
```

### é—®é¢˜9ï¼šå€’è½¦

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººé¢‘ç¹å€’è½¦
```

**åŸå› **ï¼š
- å€’è½¦æ²¡æœ‰æƒ©ç½š
- æˆ–è€…å€’è½¦å¥–åŠ±åè€Œä¸ºæ­£

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æ·»åŠ å€’è½¦æƒ©ç½š
reward_backward = -5.0 * torch.abs(min(forward_vel, 0))
```

## 14.4 é—®é¢˜æ’æŸ¥æµç¨‹

### 14.4.1 æ ‡å‡†æ’æŸ¥æµç¨‹

```
1. æ£€æŸ¥ç¯å¢ƒ
   â”œâ”€ nvidia-smiï¼ˆGPUå¯ç”¨ï¼‰
   â”œâ”€ df -hï¼ˆç£ç›˜ç©ºé—´ï¼‰
   â””â”€ python -c "import torch; print(torch.cuda.is_available())"

2. æ£€æŸ¥é…ç½®
   â”œâ”€ cat train_cfg_v2.yamlï¼ˆå‚æ•°æ­£ç¡®ï¼‰
   â”œâ”€ python -m py_compile train_v2.pyï¼ˆè¯­æ³•æ­£ç¡®ï¼‰
   â””â”€ python -m py_compile dashgo_env_v2.pyï¼ˆè¯­æ³•æ­£ç¡®ï¼‰

3. æ£€æŸ¥æ—¥å¿—
   â”œâ”€ tail -f logs/*/log.txtï¼ˆå®æ—¶æ—¥å¿—ï¼‰
   â”œâ”€ grep "Error" logs/*/log.txtï¼ˆæŸ¥æ‰¾é”™è¯¯ï¼‰
   â””â”€ grep "Mean reward" logs/*/log.txtï¼ˆæ£€æŸ¥å¥–åŠ±ï¼‰

4. é‡æ–°è®­ç»ƒ
   â””â”€ ä»å¤´å¼€å§‹ï¼Œç”¨ä¿å®ˆå‚æ•°
```

### 14.4.2 å¿«é€Ÿä¿®å¤ç­–ç•¥

```bash
# [ç­–ç•¥1] é™ä½æ‰€æœ‰å‚æ•°
learning_rate: 3.0e-4 â†’ 1.0e-4
entropy_coef: 0.01 â†’ 0.005
num_envs: 64 â†’ 32

# [ç­–ç•¥2] æ¢å¤é»˜è®¤é…ç½®
git checkout train_cfg_v2.yaml

# [ç­–ç•¥3] æ¸…ç†æ—§æ—¥å¿—
rm -rf logs/dashgo_v5_auto/*
```

---

# ç¬¬ä¸‰éƒ¨åˆ†æ€»ç»“

## å®Œæˆæ£€æŸ¥æ¸…å•

### è®­ç»ƒæµç¨‹ç†è§£
- [ ] ç†è§£è®­ç»ƒå‰å‡†å¤‡ï¼ˆç¯å¢ƒéªŒè¯ã€é…ç½®æ£€æŸ¥ï¼‰
- [ ] æŒæ¡å¯åŠ¨è®­ç»ƒå‘½ä»¤ï¼ˆheadlessã€GUIã€resumeï¼‰
- [ ] ç†è§£è®­ç»ƒæˆåŠŸæ ‡å¿—ï¼ˆå¥–åŠ±æ›²çº¿ã€episodeé•¿åº¦ï¼‰

### å‚æ•°è°ƒä¼˜èƒ½åŠ›
- [ ] æŒæ¡å­¦ä¹ ç‡è°ƒä¼˜ï¼ˆè¯Šæ–­ç—‡çŠ¶ã€è°ƒæ•´ç­–ç•¥ï¼‰
- [ ] æŒæ¡ç†µç³»æ•°è°ƒä¼˜ï¼ˆæ¢ç´¢vsåˆ©ç”¨ï¼‰
- [ ] æŒæ¡ç½‘ç»œæ¶æ„è°ƒä¼˜ï¼ˆActor vs Criticï¼‰
- [ ] æŒæ¡å¥–åŠ±å‡½æ•°è°ƒä¼˜ï¼ˆæƒé‡è°ƒæ•´ã€è£å‰ªï¼‰

### ç›‘æ§è°ƒè¯•æŠ€èƒ½
- [ ] ä¼šä½¿ç”¨å®æ—¶ç›‘æ§è„šæœ¬
- [ ] ä¼šä½¿ç”¨TensorBoardå¯è§†åŒ–
- [ ] ä¼šä½¿ç”¨è¯Šæ–­å·¥å…·
- [ ] ä¼šGUIæ¨¡å¼è°ƒè¯•

### é—®é¢˜è§£å†³èƒ½åŠ›
- [ ] èƒ½è§£å†³ç¯å¢ƒé…ç½®é—®é¢˜ï¼ˆOOMã€å¯¼å…¥é¡ºåºï¼‰
- [ ] èƒ½è§£å†³è®­ç»ƒç¨³å®šæ€§é—®é¢˜ï¼ˆæ¢¯åº¦çˆ†ç‚¸ã€å¥–åŠ±é»‘å®¢ï¼‰
- [ ] èƒ½è§£å†³è¡Œä¸ºé—®é¢˜ï¼ˆè½¬åœˆã€èººå¹³ã€ç£¨æ´‹å·¥ï¼‰
- [ ] æŒæ¡æ ‡å‡†æ’æŸ¥æµç¨‹

## ä¸‹ä¸€æ­¥

è¿›å…¥**ç¬¬å››éƒ¨åˆ†ï¼šéƒ¨ç½²ç¯‡**ï¼Œå­¦ä¹ Sim2Realå®ç‰©éƒ¨ç½²ï¼

---

**ç¼–å†™è¿›åº¦**ï¼šç¬¬åä¸€ç« -ç¬¬åå››ç« å®Œæˆï¼ˆçº¦65%ï¼‰
**ä¸‹ä¸€æ­¥**ï¼šç¼–å†™ç¬¬åäº”ç« -ç¬¬åå…«ç« ï¼ˆéƒ¨ç½²æµç¨‹è¯¦è§£ï¼‰


---

## ç¬¬å››éƒ¨åˆ†ï¼šéƒ¨ç½²ç¯‡ - Sim2Realå®ç‰©éƒ¨ç½²

---

# ç¬¬åäº”ç« ï¼šæ¨¡å‹å¯¼å‡º

## 15.1 å¯¼å‡ºæ ¼å¼é€‰æ‹©

### 15.1.1 PyTorch vs TorchScript vs ONNX

| æ ¼å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| **PyTorch (.pt)** | ç®€å•ç›´æ¥ | éœ€è¦PyTorchç¯å¢ƒ | â­â­â­ |
| **TorchScript (.pt)** | æ— éœ€PyTorchï¼Œæ¨ç†å¿« | ä¸æ”¯æŒåŠ¨æ€å›¾ | â­â­â­â­â­ |
| **ONNX (.onnx)** | è·¨å¹³å°ï¼ŒTensorRTåŠ é€Ÿ | è½¬æ¢å¤æ‚ | â­â­â­â­ |

**æ¨è**ï¼š**TorchScript**ï¼ˆæœ¬é¡¹ç›®ä½¿ç”¨ï¼‰

**åŸå› **ï¼š
1. æ— éœ€å®Œæ•´çš„PyTorchç¯å¢ƒ
2. æ¨ç†é€Ÿåº¦å¿«ï¼ˆ80Hz+ï¼‰
3. é€‚é…Jetson Nano
4. è½¬æ¢ç®€å•

### 15.1.2 å¯¼å‡ºè„šæœ¬

**export_torchscript.py**ï¼š
```python
#!/usr/bin/env python3
"""
æ¨¡å‹å¯¼å‡ºè„šæœ¬ï¼šå°†PyTorch checkpointå¯¼å‡ºä¸ºTorchScript
"""

import torch
from geo_nav_policy import GeoNavPolicy
from dashgo_env_v2 import DashgoEnvCfg

def export_model(checkpoint_path, output_path):
    """å¯¼å‡ºæ¨¡å‹ä¸ºTorchScript"""
    
    # 1. åŠ è½½checkpoint
    print(f"[1/5] åŠ è½½checkpoint: {checkpoint_path}")
    checkpoint = torch.load(checkpoint_path, map_location="cpu")
    
    # 2. åˆ›å»ºæ¨¡å‹
    print("[2/5] åˆ›å»ºæ¨¡å‹")
    model = GeoNavPolicy(
        num_actor_obs=246,
        num_critic_obs=246,
        action_dim=2,
    )
    
    # 3. åŠ è½½æƒé‡
    print("[3/5] åŠ è½½æƒé‡")
    model.load_state_dict(checkpoint["model_state_dict"])
    model.eval()
    
    # 4. è½¬æ¢ä¸ºTorchScript
    print("[4/5] è½¬æ¢ä¸ºTorchScript")
    example_input = torch.randn(1, 246)  # ç¤ºä¾‹è¾“å…¥
    
    try:
        scripted_model = torch.jit.script(model)
        scripted_model(example_input)  # éªŒè¯
    except Exception as e:
        print(f"âŒ TorchScriptè½¬æ¢å¤±è´¥: {e}")
        return False
    
    # 5. ä¿å­˜æ¨¡å‹
    print(f"[5/5] ä¿å­˜æ¨¡å‹: {output_path}")
    scripted_model.save(output_path)
    
    # éªŒè¯
    loaded_model = torch.jit.load(output_path)
    output = loaded_model(example_input)
    print(f"âœ… éªŒè¯æˆåŠŸï¼è¾“å‡ºshape: {output.shape}")
    
    return True

if __name__ == "__main__":
    import sys
    
    checkpoint_path = sys.argv[1] if len(sys.argv) > 1 else "logs/dashgo_v5_auto/model_9000.pt"
    output_path = sys.argv[2] if len(sys.argv) > 2 else "models/policy_torchscript.pt"
    
    export_model(checkpoint_path, output_path)
```

## 15.2 å¯¼å‡ºæµç¨‹

### 15.2.1 å®Œæ•´å¯¼å‡ºæ­¥éª¤

```bash
# [1] è®­ç»ƒå®Œæˆåï¼Œæ‰¾åˆ°æœ€ä½³æ¨¡å‹
ls -lh logs/dashgo_v5_auto/model_*.pt

# [2] åˆ›å»ºè¾“å‡ºç›®å½•
mkdir -p models

# [3] å¯¼å‡ºæ¨¡å‹
python export_torchscript.py \
  logs/dashgo_v5_auto/model_9000.pt \
  models/policy_torchscript.pt

# é¢„æœŸè¾“å‡ºï¼š
# [1/5] åŠ è½½checkpoint: logs/dashgo_v5_auto/model_9000.pt
# [2/5] åˆ›å»ºæ¨¡å‹
# [3/5] åŠ è½½æƒé‡
# [4/5] è½¬æ¢ä¸ºTorchScript
# [5/5] ä¿å­˜æ¨¡å‹: models/policy_torchscript.pt
# âœ… éªŒè¯æˆåŠŸï¼è¾“å‡ºshape: torch.Size([1, 2])
```

### 15.2.2 éªŒè¯å¯¼å‡ºçš„æ¨¡å‹

```python
# verify_export.py - éªŒè¯å¯¼å‡ºæ¨¡å‹

import torch

def verify_torchscript_model(model_path):
    """éªŒè¯TorchScriptæ¨¡å‹"""
    
    # 1. åŠ è½½æ¨¡å‹
    print("åŠ è½½æ¨¡å‹...")
    model = torch.jit.load(model_path)
    
    # 2. æµ‹è¯•æ¨ç†
    print("æµ‹è¯•æ¨ç†...")
    example_input = torch.randn(1, 246)
    output = model(example_input)
    
    # 3. éªŒè¯è¾“å‡º
    assert output.shape == (1, 2), f"è¾“å‡ºshapeé”™è¯¯: {output.shape}"
    assert torch.all(torch.abs(output) <= 1.0), "è¾“å‡ºæœªå½’ä¸€åŒ–"
    
    print(f"âœ… æ¨¡å‹éªŒè¯æˆåŠŸï¼")
    print(f"   è¾“å‡ºshape: {output.shape}")
    print(f"   è¾“å‡ºå€¼: {output}")

if __name__ == "__main__":
    verify_torchscript_model("models/policy_torchscript.pt")
```

## 15.3 æ¨¡å‹ä¼˜åŒ–

### 15.3.1 æ¨¡å‹é‡åŒ–

**ç›®çš„**ï¼šè¿›ä¸€æ­¥å‡å°æ¨¡å‹ä½“ç§¯ï¼Œæé«˜æ¨ç†é€Ÿåº¦

```python
# é‡åŒ–è„šæœ¬ï¼ˆå¯é€‰ï¼ŒJetson Nanoå¯èƒ½ä¸éœ€è¦ï¼‰
import torch

def quantize_model(model_path):
    """é‡åŒ–æ¨¡å‹ï¼ˆINT8ï¼‰"""
    
    # 1. åŠ è½½æ¨¡å‹
    model = torch.jit.load(model_path)
    
    # 2. å‡†å¤‡é‡åŒ–
    model.eval()
    
    # 3. åŠ¨æ€é‡åŒ–
    quantized_model = torch.quantization.quantize_dynamic(
        model,
        {torch.nn.Linear},  # åªé‡åŒ–å…¨è¿æ¥å±‚
        dtype=torch.qint8
    )
    
    # 4. ä¿å­˜é‡åŒ–æ¨¡å‹
    quantized_path = model_path.replace(".pt", "_quantized.pt")
    quantized_model.save(quantized_path)
    
    print(f"âœ… é‡åŒ–æ¨¡å‹ä¿å­˜åˆ°: {quantized_path}")

# æ³¨æ„ï¼šæœ¬é¡¹ç›®æ¨¡å‹å·²ç»å¾ˆå°ï¼ˆ300Kå‚æ•°ï¼‰ï¼Œé‡åŒ–æ”¶ç›Šä¸å¤§
# å»ºè®®è·³è¿‡é‡åŒ–ï¼Œç›´æ¥ä½¿ç”¨TorchScript
```

### 15.3.2 æ¨¡å‹ä¼˜åŒ–æ£€æŸ¥æ¸…å•

- [ ] æ¨¡å‹æ ¼å¼æ­£ç¡®ï¼ˆTorchScriptï¼‰
- [ ] è¾“å…¥shapeæ­£ç¡®ï¼ˆ246ç»´ï¼‰
- [ ] è¾“å‡ºèŒƒå›´æ­£ç¡®ï¼ˆ[-1, 1]ï¼‰
- [ ] æ¨ç†é€Ÿåº¦æ»¡è¶³è¦æ±‚ï¼ˆ>50Hzï¼‰
- [ ] æ¨¡å‹å¤§å°åˆç†ï¼ˆ<10MBï¼‰

---

# ç¬¬åå…­ç« ï¼šROSç¯å¢ƒæ­å»º

## 16.1 ROS Noeticå®‰è£…

### 16.1.1 é…ç½®Ubuntuè½¯ä»¶æº

```bash
# 1. æ·»åŠ ROS Noeticæº
sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'

# 2. æ·»åŠ å¯†é’¥
sudo apt-key adv --keyserver 'hkp://keyserver.ubuntu.com:80' --recv-key C1CF6E31E6BAF88A51EA6A08B3B2A3DBED0FFA4
```

### 16.1.2 å®‰è£…ROS Noetic

```bash
# 1. æ›´æ–°è½¯ä»¶æº
sudo apt update

# 2. å®‰è£…ROS Noeticå®Œæ•´ç‰ˆï¼ˆæ¨èï¼‰
sudo apt install -y ros-noetic-desktop-full

# é¢„è®¡æ—¶é—´ï¼š20-30åˆ†é’Ÿ
# å ç”¨ç©ºé—´ï¼š~10GB

# 3. åˆå§‹åŒ–rosdep
sudo rosdep init
sudo rosdep update
```

### 16.1.3 é…ç½®ROSç¯å¢ƒ

```bash
# æ·»åŠ åˆ°~/.bashrc
echo "source /opt/ros/noetic/setup.bash" >> ~/.bashrc

# é‡æ–°åŠ è½½
source ~/.bashrc

# éªŒè¯å®‰è£…
rosversion -d
# é¢„æœŸè¾“å‡ºï¼š1.15.13
```

## 16.2 åˆ›å»ºROSå·¥ä½œç©ºé—´

### 16.2.1 åˆ›å»ºcatkinå·¥ä½œç©ºé—´

```bash
# åˆ›å»ºå·¥ä½œç©ºé—´
mkdir -p ~/catkin_ws/src
cd ~/catkin_ws

# åˆå§‹åŒ–å·¥ä½œç©ºé—´
catkin_make

# åŠ è½½å·¥ä½œç©ºé—´
echo "source ~/catkin_ws/devel/setup.bash" >> ~/.bashrc
source ~/.bashrc
```

### 16.2.2 åˆ›å»ºROSåŒ…

```bash
# è¿›å…¥srcç›®å½•
cd ~/catkin_ws/src

# åˆ›å»ºdashgo_rlåŒ…
catkin_create_pkg dashgo_rl std_msgs roscpp geometry_msgs sensor_msgs nav_msgs

# ç›®å½•ç»“æ„
cd ~/dashgo_rl_project
cp -r catkin_ws/src/dashgo_rl/* ~/catkin_ws/src/dashgo_rl/

# ç¼–è¯‘
cd ~/catkin_ws
catkin_make

# éªŒè¯
rospack profile | grep dashgo_rl
# é¢„æœŸè¾“å‡ºï¼šdashgo_rl
```

## 16.3 å®‰è£…ä¾èµ–

### 16.3.1 Pythonä¾èµ–

```bash
# å®‰è£…Pythonä¾èµ–
sudo apt install -y python3-pip
pip3 install torch torchvision numpy
```

### 16.3.2 ROSä¾èµ–

```bash
# å®‰è£…å¯¼èˆªä¾èµ–
sudo apt install -y ros-noetic-move-base ros-noetic-dwa-planner
sudo apt install -y ros-noetic-gmapping ros-noetic-slam

# å®‰è£…ä¼ æ„Ÿå™¨ä¾èµ–
sudo apt install -y ros-noetic-urg-node
```

---

# ç¬¬åä¸ƒç« ï¼šéƒ¨ç½²æµç¨‹è¯¦è§£

## 17.1 éƒ¨ç½²æ¶æ„

### 17.1.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DashGoå®ç‰©æœºå™¨äººéƒ¨ç½²æ¶æ„                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  [é«˜å±‚] å…¨å±€è§„åˆ’å™¨ï¼ˆROS move_baseï¼‰              â”‚
â”‚   â”œâ”€ è¾“å…¥ï¼šåœ°å›¾ + ç›®æ ‡ç‚¹                           â”‚
â”‚   â”œâ”€ è¾“å‡ºï¼šå…¨å±€è·¯å¾„                               â”‚
â”‚   â””â”€ ç®—æ³•ï¼šDijkstra / A*                        â”‚
â”‚                                                 â”‚
â”‚  [ä¸­å±‚] å±€éƒ¨è§„åˆ’å™¨ï¼ˆæœ¬é¡¹ç›®ï¼‰                      â”‚
â”‚   â”œâ”€ è¾“å…¥ï¼šLiDAR + ç›®æ ‡ç‚¹ + å…¨å±€è·¯å¾„              â”‚
â”‚   â”œâ”€ è¾“å‡ºï¼šé€Ÿåº¦å‘½ä»¤ï¼ˆv, wï¼‰                        â”‚
â”‚   â””â”€ ç®—æ³•ï¼šPPOç­–ç•¥ï¼ˆTorchScriptæ¨¡å‹ï¼‰             â”‚
â”‚                                                 â”‚
â”‚  [åº•å±‚] ç”µæœºæ§åˆ¶ï¼ˆDashGoåº•ç›˜ï¼‰                    â”‚
â”‚   â”œâ”€ è¾“å…¥ï¼šé€Ÿåº¦å‘½ä»¤                               â”‚
â”‚   â”œâ”€ è¾“å‡ºï¼šç”µæœºPWM                                â”‚
â”‚   â””â”€ ç®—æ³•ï¼šPIDæ§åˆ¶                               â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 17.1.2 æ–¹æ¡ˆA vs æ–¹æ¡ˆB

**æ–¹æ¡ˆAï¼šMoveBaseå¯¼èˆªï¼ˆä¼ ç»Ÿæ–¹æ³•ï¼‰**
```python
# ä¼˜ç‚¹ï¼šæˆç†Ÿç¨³å®š
- ROSæ ‡å‡†æ–¹æ¡ˆ
- å·²ç»éªŒè¯å¯ç”¨
- ä¸éœ€è¦è®­ç»ƒ

# ç¼ºç‚¹ï¼šæ€§èƒ½æœ‰é™
- DWAå±€éƒ¨è§„åˆ’å™¨æ€§èƒ½ä¸€èˆ¬
- å¤æ‚ç¯å¢ƒè¡¨ç°ä¸ä½³

# é€‚ç”¨åœºæ™¯ï¼š
- ç®€å•ç¯å¢ƒï¼ˆèµ°å»Šã€å¼€é˜”ç©ºé—´ï¼‰
- å¿«é€Ÿéƒ¨ç½²ï¼ˆä¸æƒ³è®­ç»ƒï¼‰
```

**æ–¹æ¡ˆBï¼šRLå¯¼èˆªï¼ˆæœ¬é¡¹ç›®ï¼‰**
```python
# ä¼˜ç‚¹ï¼šæ€§èƒ½ä¼˜è¶Š
- PPOç­–ç•¥è‡ªé€‚åº”å¼º
- å¤æ‚ç¯å¢ƒè¡¨ç°å¥½
- æ¨ç†é€Ÿåº¦å¿«ï¼ˆ80Hzï¼‰

# ç¼ºç‚¹ï¼šéœ€è¦è®­ç»ƒ
- éœ€è¦è®­ç»ƒæ¨¡å‹
- éœ€è¦è°ƒè¯•å‚æ•°

# é€‚ç”¨åœºæ™¯ï¼š
- å¤æ‚ç¯å¢ƒï¼ˆå¯†é›†éšœç¢ç‰©ï¼‰
- éœ€è¦é«˜æ€§èƒ½
```

## 17.2 éƒ¨ç½²æ­¥éª¤ï¼ˆæ–¹æ¡ˆAï¼‰

### 17.2.1 æ–¹æ¡ˆAéƒ¨ç½²æ­¥éª¤

```bash
# [1] å¯åŠ¨æœºå™¨äººåº•ç›˜
roslaunch dashgo_bringup minimal.launch

# é¢„æœŸè¾“å‡ºï¼š
# process[1]: started roslaunch
# process[2]: started dashgo_driver
# ...ï¼ˆåº•ç›˜å¯åŠ¨æˆåŠŸï¼‰

# [2] å¯åŠ¨MoveBaseå¯¼èˆª
roslaunch dashgo_rl sim2real_golden.launch enable_move_base:=true

# é¢„æœŸè¾“å‡ºï¼š
# ...ï¼ˆmove_baseå¯åŠ¨æˆåŠŸï¼‰

# [3] å‘é€ç›®æ ‡ç‚¹
rostopic pub /move_base_simple/goal geometry_msgs/PoseStamped \
  "header:
     frame_id: 'map'
   pose:
     position:
       x: 2.0
       y: 1.0
       z: 0.0
     orientation:
       w: 1.0"
```

### 17.2.2 éªŒè¯æ–¹æ¡ˆAéƒ¨ç½²

```bash
# [æ£€æŸ¥1] æŸ¥çœ‹TFæ ‘
rosrun tf tf_echo /map /base_link

# [æ£€æŸ¥2] æŸ¥çœ‹åœ°å›¾
rosrun map_server map_saver -f my_map

# [æ£€æŸ¥3] æŸ¥çœ‹è·¯å¾„
rosrun rqt_console rqt_console
```

## 17.3 éƒ¨ç½²æ­¥éª¤ï¼ˆæ–¹æ¡ˆBï¼‰

### 17.3.1 æ–¹æ¡ˆBéƒ¨ç½²æ­¥éª¤

```bash
# [1] å¯åŠ¨æœºå™¨äººåº•ç›˜
roslaunch dashgo_bringup minimal.launch

# [2] å¯åŠ¨RLå¯¼èˆªèŠ‚ç‚¹
roslaunch dashgo_rl sim2real_golden.launch enable_move_base:=false

# æ³¨æ„ï¼šéœ€è¦ä¿®æ”¹launchæ–‡ä»¶ï¼Œå¯ç”¨geo_nav_node

# [3] å‘é€ç›®æ ‡ç‚¹ï¼ˆåŒæ–¹æ¡ˆAï¼‰
rostopic pub /move_base_simple/goal geometry_msgs/PoseStamped ...
```

### 17.3.2 ä¿®æ”¹launchæ–‡ä»¶ï¼ˆå¯ç”¨æ–¹æ¡ˆBï¼‰

```xml
<!-- sim2real_golden.launch -->

<!-- æ–¹æ¡ˆBï¼šRLå¯¼èˆªèŠ‚ç‚¹ -->
<group unless="$(arg enable_move_base)">
  <node pkg="dashgo_rl" type="geo_nav_node.py" name="geo_nav_node"
        output="screen" required="true">
    <param name="model_path" value="$(arg model_path)"/>
    <param name="max_lin_vel" value="$(arg max_lin_vel)"/>
    <param name="max_ang_vel" value="$(arg max_ang_vel)"/>
  </node>
</group>
```

---

# ç¬¬åå…«ç« ï¼šå®ç‰©æµ‹è¯•ä¸éªŒè¯

## 18.1 æµ‹è¯•æµç¨‹

### 18.1.1 é¦–æ¬¡æµ‹è¯•æ£€æŸ¥æ¸…å•

```bash
# [ç¡¬ä»¶æ£€æŸ¥]
â–¡ æœºå™¨äººç”µé‡å……è¶³ï¼ˆ>50%ï¼‰
â–¡ USBè¿æ¥æ­£å¸¸
â–¡ LiDARå¯åŠ¨ï¼ˆ/scanè¯é¢˜æœ‰æ•°æ®ï¼‰

# [è½¯ä»¶æ£€æŸ¥]
â–¡ ROSèŠ‚ç‚¹å¯åŠ¨æ­£å¸¸
â–¡ TFæ ‘æ­£å¸¸
â–¡ æ¨¡å‹åŠ è½½æˆåŠŸ

# [å®‰å…¨æ£€æŸ¥]
â–¡ æœºå™¨äººå‘¨å›´æ— éšœç¢ç‰©
â–¡ æµ‹è¯•åŒºåŸŸç©ºæ—·
â–¡ å‡†å¤‡ç´§æ€¥åœæ­¢æŒ‰é’®
```

### 18.1.2 é¦–æ¬¡æµ‹è¯•æ­¥éª¤

```bash
# [æ­¥éª¤1] å¯åŠ¨åº•ç›˜ï¼ˆå…ˆä¸å¯åŠ¨å¯¼èˆªï¼‰
roslaunch dashgo_bringup minimal.launch

# [æ­¥éª¤2] æ‰‹åŠ¨é¥æ§æµ‹è¯•
rosrun teleop_twist_keyboard teleop_twist_keyboard.py

# è¯´æ˜ï¼š
# i/kï¼šå‰è¿›/åé€€
# j/lï¼šå·¦è½¬/å³è½¬
# u/oï¼šå¢åŠ /é™ä½é€Ÿåº¦
# mï¼šåœæ­¢

# [æ­¥éª¤3] éªŒè¯åŸºæœ¬åŠŸèƒ½
â–¡ å‰è¿›/åé€€æ­£å¸¸
â–¡ å·¦è½¬/å³è½¬æ­£å¸¸
â–¡ æ€¥åœåŠŸèƒ½æ­£å¸¸

# [æ­¥éª¤4] å¯åŠ¨å¯¼èˆª
roslaunch dashgo_rl sim2real_golden.launch enable_move_base:=false

# [æ­¥éª¤5] å‘é€è¿‘è·ç¦»ç›®æ ‡ï¼ˆ1ç±³ï¼‰
rostopic pub /move_base_simple/goal ...
  "pose: {position: {x: 1.0, y: 0.0}}"

# [æ­¥éª¤6] è§‚å¯Ÿæœºå™¨äººè¡Œä¸º
â–¡ æ˜¯å¦å‘ç›®æ ‡ç§»åŠ¨ï¼Ÿ
â–¡ æ˜¯å¦é¿éšœï¼Ÿ
â–¡ æ˜¯å¦åˆ°è¾¾ç›®æ ‡ï¼Ÿ

# [æ­¥éª¤7] å‘é€è¿œè·ç¦»ç›®æ ‡ï¼ˆ3ç±³ï¼‰
rostopic pub /move_simple/goal ...
  "pose: {position: {x: 3.0, y: 0.0}}"
```

### 18.1.3 æ€§èƒ½æŒ‡æ ‡

**æˆåŠŸæ ‡å‡†**ï¼š
```
âœ… å¯¼èˆªæˆåŠŸç‡ï¼š>70%ï¼ˆ10æ¬¡æµ‹è¯•ä¸­7æ¬¡æˆåŠŸï¼‰
âœ… å¹³å‡æ—¶é—´ï¼š<30ç§’ï¼ˆ3ç±³è·ç¦»ï¼‰
âœ… æ— ç¢°æ’ï¼šå®‰å…¨ç©¿è¿‡éšœç¢ç‰©
âœ… æ¨ç†é¢‘ç‡ï¼š>50Hzï¼ˆå®æ—¶æ€§è¦æ±‚ï¼‰
```

**æ€§èƒ½è°ƒä¼˜**ï¼š
```
1. æ¨ç†é¢‘ç‡å¤ªä½ï¼ˆ<30Hzï¼‰
   â†’ é™ä½æ¨¡å‹å¤æ‚åº¦
   â†’ ä½¿ç”¨TensorRTåŠ é€Ÿ

2. å¯¼èˆªæˆåŠŸç‡ä½ï¼ˆ<50%ï¼‰
   â†’ é‡æ–°è®­ç»ƒï¼ˆæ›´å¤šæ•°æ®ï¼‰
   â†’ è°ƒæ•´å¥–åŠ±å‡½æ•°

3. æœºå™¨äººéœ‡è¡
   â†’ æ·»åŠ åŠ¨ä½œå¹³æ»‘
   â†’ é™ä½æ§åˆ¶é¢‘ç‡
```

## 18.2 å¸¸è§éƒ¨ç½²é—®é¢˜

### é—®é¢˜1ï¼šTFå˜æ¢è¶…æ—¶

**ç—‡çŠ¶**ï¼š
```
TFå˜æ¢å¤±è´¥: Lookup would require extrapolation into the past
```

**åŸå› **ï¼šTFæ ‘å»¶è¿Ÿå¤ªé«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# geo_nav_node.py
try:
    transform = tf_buffer.lookup_transform(
        "base_link", "map", rospy.Time(0),
        rospy.Duration(0.1)  # è¶…æ—¶ä¿æŠ¤
    )
except:
    # è¡°å‡ç­–ç•¥
    decay = 0.9 ** self.tf_failure_count
    self.last_goal_vec[0] *= decay
```

### é—®é¢˜2ï¼šLiDARæ•°æ®æ— æ•ˆ

**ç—‡çŠ¶**ï¼š
```
rangesä¸­åŒ…å«infæˆ–nan
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# è¿‡æ»¤æ— æ•ˆå€¼
valid_mask = (ranges > range_min) & (ranges < range_max)
ranges[~valid_mask] = range_max  # å¡«å……æœ€å¤§å€¼
```

### é—®é¢˜3ï¼šå€’è½¦å¯¼è‡´å®‰å…¨é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# safety_filter.py
def filter(self, action, observation):
    v, w = action
    
    # [ç¬¬ä¸€å±‚é˜²æŠ¤] å€’è½¦ç¦æ­¢
    if v < 0:
        rospy.logwarn("æ£€æµ‹åˆ°å€’è½¦å‘½ä»¤ï¼Œå¼ºåˆ¶åœæ­¢")
        return [0.0, 0.0]
    
    # [ç¬¬äºŒå±‚é˜²æŠ¤] ç¢°æ’æ£€æµ‹
    if self.detect_collision(observation):
        rospy.logwarn("æ£€æµ‹åˆ°ç¢°æ’é£é™©ï¼Œç´§æ€¥åœæ­¢")
        return [0.0, 0.0]
    
    return [v, w]
```

---

# ç¬¬å››éƒ¨åˆ†æ€»ç»“

## å®Œæˆæ£€æŸ¥æ¸…å•

### æ¨¡å‹å¯¼å‡º
- [ ] æŒæ¡TorchScriptå¯¼å‡ºæµç¨‹
- [ ] ç†è§£ä¸åŒæ ¼å¼ï¼ˆPyTorch/TorchScript/ONNXï¼‰
- [ ] èƒ½éªŒè¯å¯¼å‡ºæ¨¡å‹

### ROSç¯å¢ƒ
- [ ] æˆåŠŸå®‰è£…ROS Noetic
- [ ] åˆ›å»ºcatkinå·¥ä½œç©ºé—´
- [ ] ç¼–è¯‘ROSåŒ…

### éƒ¨ç½²æµç¨‹
- [ ] ç†è§£ä¸¤ç§éƒ¨ç½²æ–¹æ¡ˆï¼ˆMoveBase vs RLï¼‰
- [ ] æŒæ¡æ–¹æ¡ˆAéƒ¨ç½²æ­¥éª¤
- [ ] æŒæ¡æ–¹æ¡ˆBéƒ¨ç½²æ­¥éª¤

### å®ç‰©æµ‹è¯•
- [ ] æŒæ¡é¦–æ¬¡æµ‹è¯•æ£€æŸ¥æ¸…å•
- [ ] èƒ½éªŒè¯å¯¼èˆªæˆåŠŸç‡
- [ ] èƒ½è§£å†³å¸¸è§éƒ¨ç½²é—®é¢˜

## ä¸‹ä¸€æ­¥

è¿›å…¥**ç¬¬äº”éƒ¨åˆ†ï¼šé—®é¢˜ç¯‡**ï¼Œå­¦ä¹ FAQå’Œæœ€ä½³å®è·µï¼

---

**ç¼–å†™è¿›åº¦**ï¼šç¬¬åäº”ç« -ç¬¬åå…«ç« å®Œæˆï¼ˆçº¦80%ï¼‰
**ä¸‹ä¸€æ­¥**ï¼šç¼–å†™ç¬¬åä¹ç« -ç¬¬äºŒåäºŒç« ï¼ˆé—®é¢˜ç¯‡ï¼‰


---

## ç¬¬äº”éƒ¨åˆ†ï¼šé—®é¢˜ç¯‡ - FAQä¸è§£å†³æ–¹æ¡ˆ

---

# ç¬¬åä¹ç« ï¼šç¯å¢ƒé…ç½®é—®é¢˜

## 19.1 Ubuntuç³»ç»Ÿé—®é¢˜

### é—®é¢˜1ï¼šUbuntu 20.04å®‰è£…åæ— æ³•è”ç½‘

**ç—‡çŠ¶**ï¼š
```
ping baidu.com
ä¸´æ—¶å¤±è´¥åœ¨åç§°è§£æä¸­
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [æ–¹æ³•1] é…ç½®DNS
sudo nano /etc/systemd/resolved.conf

# æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
[Resolve]
DNS=8.8.8.8
DNS=114.114.114.114

# é‡å¯ç½‘ç»œæœåŠ¡
sudo systemctl restart systemd-resolved

# [æ–¹æ³•2] é‡å¯ç½‘ç»œç®¡ç†å™¨
nmcli networking off
nmcli networking on
```

### é—®é¢˜2ï¼šåŒç³»ç»Ÿæ—¶é—´ä¸åŒæ­¥

**ç—‡çŠ¶**ï¼š
```
Ubuntuå’ŒWindowsæ—¶é—´å·®8å°æ—¶
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# è®¾ç½®Ubuntuä½¿ç”¨æœ¬åœ°æ—¶é—´ï¼ˆä¸Windowsä¸€è‡´ï¼‰
sudo timedatectl set-local-rtc 1

# æˆ–è€…è®¾ç½®Windowsä½¿ç”¨UTCæ—¶é—´ï¼ˆæ¨èï¼‰
# åœ¨Windowsä¸­ï¼šHKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation
# æ·»åŠ RealTimeIsUniversal=1
```

## 19.2 NVIDIAé©±åŠ¨é—®é¢˜

### é—®é¢˜3ï¼šNVIDIAé©±åŠ¨å®‰è£…å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
sudo apt install nvidia-driver-525
# ä¾èµ–é”™è¯¯
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [æ–¹æ³•1] ä½¿ç”¨ubuntu-drivers
sudo ubuntu-drivers devices
sudo apt install nvidia-driver-525

# [æ–¹æ³•2] æ‰‹åŠ¨å®‰è£…
wget https://developer.download.nvidia.com/compute/cuda/12.0.0/local_installers/cuda_12.0.0_525.60.13_linux.run
sudo sh cuda_12.0.0_525.60.13_linux.run --silent --driver

# [æ–¹æ³•3] ç¦ç”¨nouveaué©±åŠ¨
sudo nano /etc/modprobe.d/blacklist-nouveau.conf
# æ·»åŠ ï¼š
blacklist nouveau
blacklist lbm-nouveau
options nouveau modeset=0

sudo update-initramfs -u
reboot
```

### é—®é¢˜4ï¼šnvidia-smiæ‰¾ä¸åˆ°GPU

**ç—‡çŠ¶**ï¼š
```
nvidia-smi
NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [1] æ£€æŸ¥GPUæ˜¯å¦è¯†åˆ«
lspci | grep -i nvidia

# [2] æ£€æŸ¥é©±åŠ¨æ˜¯å¦åŠ è½½
lsmod | grep nvidia

# [3] é‡æ–°åŠ è½½é©±åŠ¨
sudo modprobe nvidia
nvidia-smi
```

## 19.3 Isaac Simå®‰è£…é—®é¢˜

### é—®é¢˜5ï¼šIsaac Simå®‰è£…å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
./Isaac-Sim-4.5.0-linux.run
# å®‰è£…è¿‡ç¨‹ä¸­å¡ä½æˆ–æŠ¥é”™
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [æ–¹æ³•1] æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
# éœ€è¦è‡³å°‘50GBå¯ç”¨ç©ºé—´

# [æ–¹æ³•2] å…³é—­é˜²ç—…æ¯’è½¯ä»¶ï¼ˆWindowsï¼‰
# Windows Defenderå¯èƒ½é˜»æ­¢å®‰è£…

# [æ–¹æ³•3] ä½¿ç”¨å¤‡ç”¨å®‰è£…æ–¹æ³•
# ä»Omniverse Launcherå®‰è£…
```

### é—®é¢˜6ï¼šIsaac Simç‰ˆæœ¬ä¸åŒ¹é…

**ç—‡çŠ¶**ï¼š
```
python import isaacsim
# ModuleNotFoundError: No module named 'isaacsim'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥Pythonè·¯å¾„
which python
# åº”è¯¥æŒ‡å‘Isaac Simçš„Python

# æ‰‹åŠ¨æ·»åŠ åˆ°è·¯å¾„
export PYTHONPATH=$ISAACSIM_PATH/python:$PYTHONPATH
source ~/.bashrc

# éªŒè¯
python -c "import isaacsim; print(isaacsim.__version__)"
```

## 19.4 Pythonç¯å¢ƒé—®é¢˜

### é—®é¢˜7ï¼šPythonç‰ˆæœ¬ä¸åŒ¹é…

**ç—‡çŠ¶**ï¼š
```
python3 --version
Python 3.8ï¼ˆä½†éœ€è¦3.10ï¼‰
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…Python 3.10
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install -y python3.10

# è®¾ç½®é»˜è®¤ç‰ˆæœ¬
sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.10 1

# éªŒè¯
python3 --version
```

### é—®é¢˜8ï¼špipå®‰è£…å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
pip install torch
# Could not fetch URL
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [æ–¹æ³•1] ä½¿ç”¨å›½å†…é•œåƒæº
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple

# [æ–¹æ³•2] å‡çº§pip
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python3.10 get-pip.py

# [æ–¹æ³•3] ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python3.10 -m venv venv
source venv/bin/activate
pip install torch
```

---

# ç¬¬äºŒåç« ï¼šè®­ç»ƒé—®é¢˜

## 20.1 è®­ç»ƒå¯åŠ¨é—®é¢˜

### é—®é¢˜9ï¼šè®­ç»ƒæ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š
```
~/IsaacLab/isaaclab.sh -p train_v2.py --headless
# æ²¡æœ‰ååº”ï¼Œé—ªé€€
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [1] æ£€æŸ¥Isaac Labç¯å¢ƒ
cd ~/IsaacLab
source isaaclab.sh

# [2] æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la train_v2.py dashgo_env_v2.py

# [3] æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
~/IsaacLab/isaaclab.sh -p train_v2.py --headless 2>&1 | tee error.log
cat error.log
```

### é—®é¢˜10ï¼šOOMï¼ˆæ˜¾å­˜æº¢å‡ºï¼‰

**ç—‡çŠ¶**ï¼š
```
RuntimeError: CUDA out of memory
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [ç«‹å³] é™ä½ç¯å¢ƒæ•°
--num_envs 64 â†’ 32

# [æ ¹æœ¬] å‡å°‘ç¯å¢ƒæ•°ï¼ˆæ°¸ä¹…ä¿®æ”¹train_cfg_v2.yamlï¼‰
num_envs: 64 â†’ 32

# [ä¸´æ—¶] æ¸…ç†æ˜¾å­˜
python -c "import torch; torch.cuda.empty_cache()"
```

### é—®é¢˜11ï¼šè®­ç»ƒé€Ÿåº¦æ…¢

**ç—‡çŠ¶**ï¼š
```
GPUåˆ©ç”¨ç‡<50%
è®­ç»ƒé€Ÿåº¦100 FPSï¼ˆé¢„æœŸ>500 FPSï¼‰
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [1] æ£€æŸ¥GPUçŠ¶æ€
nvidia-smi
# GPU-Utilåº”è¯¥>80%

# [2] å¢åŠ ç¯å¢ƒæ•°
--num_envs 32 â†’ 64

# [3] æ£€æŸ¥CPUç“¶é¢ˆ
htop
# CPUä½¿ç”¨ç‡åº”è¯¥>80%

# [4] æ£€æŸ¥IOç“¶é¢ˆ
iostat -x 1
# %iowaitåº”è¯¥<20%
```

## 20.2 è®­ç»ƒç¨³å®šæ€§é—®é¢˜

### é—®é¢˜12ï¼šå¥–åŠ±æ›²çº¿ä¸ä¸Šå‡

**ç—‡çŠ¶**ï¼š
```
Mean reward:
Iter 100: 15.3
Iter 500: 18.7  ï¼ˆ400è½®åªæ¶¨äº†3.4ï¼‰
```

**è¯Šæ–­**ï¼š
```bash
# [1] æ£€æŸ¥å­¦ä¹ ç‡
grep "learning_rate" logs/*/log.txt

# [2] æ£€æŸ¥ç†µç³»æ•°
grep "entropy_coef" logs/*/log.txt

# [3] æ£€æŸ¥å¥–åŠ±å‡½æ•°
grep "reach_goal" dashgo_env_v2.py
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# [æ–¹æ¡ˆ1] æé«˜å­¦ä¹ ç‡
learning_rate: 1.0e-4 â†’ 3.0e-4

# [æ–¹æ¡ˆ2] æé«˜reach_goalæƒé‡
reach_goal: 500.0 â†’ 2000.0

# [æ–¹æ¡ˆ3] æ·»åŠ alive penalty
alive_penalty = RewardTermCfg(func=reward_alive, weight=-0.1)
```

### é—®é¢˜13ï¼šå¥–åŠ±å‰§çƒˆéœ‡è¡

**ç—‡çŠ¶**ï¼š
```
Mean reward:
Iter 100: 500.2
Iter 101: -234.1
Iter 102: 678.3
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# [æ–¹æ¡ˆ1] é™ä½å­¦ä¹ ç‡
learning_rate: 3.0e-4 â†’ 1.0e-4

# [æ–¹æ¡ˆ2] é™ä½ç†µç³»æ•°
entropy_coef: 0.02 â†’ 0.01

# [æ–¹æ¡ˆ3] æ¢¯åº¦è£å‰ª
max_grad_norm: 1.0ï¼ˆä¿æŒä¸å˜ï¼‰
```

### é—®é¢˜14ï¼švalue_function_loss = inf

**ç—‡çŠ¶**ï¼š
```
Mean value_function loss: inf
Mean reward: nan
```

**åŸå› **ï¼šæ¢¯åº¦çˆ†ç‚¸ï¼ˆv3.1å·²ä¿®å¤ï¼‰

**éªŒè¯**ï¼š
```bash
# æ£€æŸ¥æ˜¯å¦v3.1
grep "LayerNorm" geo_nav_policy.py

# åº”è¯¥çœ‹åˆ°ï¼š
# self.ln = nn.LayerNorm(...)
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# ç¡®è®¤ä½¿ç”¨v3.1
# å·²åŒ…å«ä¸‰å±‚é˜²æŠ¤ï¼š
# 1. LayerNorm
# 2. Input Clamp
# 3. Orthogonal Init
```

## 20.3 è¡Œä¸ºé—®é¢˜

### é—®é¢˜15ï¼šæœºå™¨äººåŸåœ°è½¬åœˆ

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººä¸åœæ—‹è½¬ï¼Œä¸å‰è¿›
```

**åŸå› **ï¼šæœå‘å¥–åŠ±æƒé‡å¤ªé«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# v5.0ï¼šå®Œå…¨ç§»é™¤æœå‘å¥–åŠ±
# âŒ æ—§æ–¹æ¡ˆ
facing_goal = RewardTermCfg(weight=1.0)

# âœ… æ–°æ–¹æ¡ˆ
# åªä¿ç•™distance shaping
shaping_distance = RewardTermCfg(weight=0.75)
```

### é—®é¢˜16ï¼šæœºå™¨äºº"èººå¹³"

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººåœæ­¢ä¸åŠ¨ï¼Œç­‰å¾…episodeè¶…æ—¶
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# [æ–¹æ¡ˆ1] æé«˜åˆ°è¾¾å¥–åŠ±
reach_goal: 500.0 â†’ 2000.0

# [æ–¹æ¡ˆ2] æ·»åŠ ç”Ÿå­˜å‹åŠ›
alive_penalty = RewardTermCfg(
    func=reward_alive,
    weight=-0.1  # æ¯æ­¥-0.1
)
```

### é—®é¢˜17ï¼šæœºå™¨äººç£¨æ´‹å·¥

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººé€Ÿåº¦å¾ˆæ…¢ï¼ˆ<0.1 m/sï¼‰ï¼Œé¿éšœè¿‡äºä¿å®ˆ
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```yaml
# [æ–¹æ¡ˆ1] æé«˜é€Ÿåº¦é˜ˆå€¼
high_speed_threshold: 0.15 â†’ 0.25

# [æ–¹æ¡ˆ2] é™ä½ç¢°æ’æƒ©ç½š
collision_penalty: 0.5 â†’ 0.2

# [æ–¹æ¡ˆ3] æé«˜é«˜é€Ÿå¥–åŠ±
reward_high_speed: 0.2 â†’ 0.5
```

---

# ç¬¬äºŒåä¸€ç« ï¼šéƒ¨ç½²é—®é¢˜

## 21.1 ROSéƒ¨ç½²é—®é¢˜

### é—®é¢˜18ï¼šTFæ ‘æ–­å¼€

**ç—‡çŠ¶**ï¼š
```
rosrun tf tf_echo /map /base_link
Frame /map does not exist
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [1] æ£€æŸ¥æ‰€æœ‰èŠ‚ç‚¹
rosnode list

# [2] æ£€æŸ¥TFæ ‘
rosrun tf tf_monitor

# [3] é‡å¯ç›¸å…³èŠ‚ç‚¹
# å…ˆåœæ­¢æ‰€æœ‰èŠ‚ç‚¹
rosnode kill --all
# å†é‡æ–°å¯åŠ¨
roslaunch dashgo_bringup minimal.launch
```

### é—®é¢˜19ï¼šLiDARæ•°æ®å¼‚å¸¸

**ç—‡çŠ¶**ï¼š
```
rostopic echo /scan
# rangesä¸­åŒ…å«infæˆ–nan
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# åœ¨RLèŠ‚ç‚¹ä¸­è¿‡æ»¤
def lidar_callback(self, msg):
    ranges = np.array(msg.ranges)
    
    # è¿‡æ»¤æ— æ•ˆå€¼
    valid_mask = (ranges > msg.range_min) & (ranges < msg.range_max)
    ranges[~valid_mask] = msg.range_max  # å¡«å……æœ€å¤§å€¼
    
    self.latest_scan = ranges
```

### é—®é¢˜20ï¼šæ¨¡å‹åŠ è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
python geo_nav_node.py
# FileNotFoundError: models/policy_torchscript.pt not found
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [1] æ£€æŸ¥æ¨¡å‹è·¯å¾„
ls -lh models/policy_torchscript.pt

# [2] æ£€æŸ¥launchæ–‡ä»¶é…ç½®
# sim2real_golden.launch
<arg name="model_path" default="$(find dashgo_rl)/models/policy_torchscript.pt"/>

# [3] ä¸Šä¼ æ¨¡å‹
cp models/policy_torchscript.pt ~/catkin_ws/src/dashgo_rl/models/
```

## 21.2 å®ç‰©æµ‹è¯•é—®é¢˜

### é—®é¢˜21ï¼šæœºå™¨äººä¸åŠ¨

**ç—‡çŠ¶**ï¼š
```
# å‘å¸ƒé€Ÿåº¦å‘½ä»¤
rostopic pub /cmd_vel geometry_msgs/Twist "linear: {x: 0.1}"
# æœºå™¨äººæ²¡æœ‰ååº”
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# [1] æ£€æŸ¥è¯é¢˜è¿æ¥
rostopic list /cmd_vel

# [2] æ£€æŸ¥ä¸²å£è¿æ¥
ls /dev/ttyUSB0

# [3] æ£€æŸ¥é©±åŠ¨èŠ‚ç‚¹
rosnode list | grep dashgo_driver

# [4] æ‰‹åŠ¨æµ‹è¯•
rosrun teleop_twist_keyboard teleop_twist_keyboard.py
# æŒ‰ié”®çœ‹æœºå™¨äººæ˜¯å¦å‰è¿›
```

### é—®é¢˜22ï¼šæœºå™¨äººéœ‡è¡

**ç—‡çŠ¶**ï¼š
```
æœºå™¨äººå‰è¿›æ—¶å·¦å³æŠ–åŠ¨
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æ·»åŠ åŠ¨ä½œå¹³æ»‘
# 1. è®°å½•å†å²åŠ¨ä½œ
self.action_buffer = []

# 2. è®¡ç®—å¹³å‡åŠ¨ä½œ
if len(self.action_buffer) > 5:
    smooth_action = np.mean(self.action_buffer[-5:], axis=0)
else:
    smooth_action = action

# 3. å‘å¸ƒå¹³æ»‘åçš„å‘½ä»¤
self.cmd_pub.publish(smooth_action)
```

### é—®é¢˜23ï¼šæœºå™¨äººåç¦»ç›®æ ‡

**ç—‡çŠ¶**ï¼š
```
å‘é€ç›®æ ‡(2, 0)ï¼Œæœºå™¨äººå®é™…èµ°åˆ°(2, 0.5)
```

**åŸå› **ï¼šSim2Realå‚æ•°ä¸å¯¹é½

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# [1] æµ‹é‡å®é™…è½®å¾„
# ç”¨å°ºå­æµ‹é‡è½®å­ç›´å¾„

# [2] æ›´æ–°ROSé…ç½®
# dashgo/EAIé©±åŠ¨/dashgo_bringup/config/my_dashgo_params.yaml
wheel_diameter: 0.1264  # æ”¹ä¸ºå®é™…æµ‹é‡å€¼

# [3] é‡æ–°æ ‡å®šé‡Œç¨‹è®¡
# ï¼ˆç•¥ï¼‰
```

---

# ç¬¬äºŒåäºŒç« ï¼šæœ€ä½³å®è·µä¸æŠ€å·§

## 22.1 å¼€å‘æœ€ä½³å®è·µ

### å®è·µ1ï¼šç‰ˆæœ¬æ§åˆ¶

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
```
âœ… ç‰ˆæœ¬æ§åˆ¶è®©ä½ ï¼š
- è¿½æº¯ä¿®æ”¹å†å²
- å¯¹æ¯”ä¸åŒç‰ˆæœ¬
- å›é€€åˆ°ä¹‹å‰çŠ¶æ€
- å¤šäººåä½œ
```

**æœ€ä½³å®è·µ**ï¼š
```bash
# [1] æäº¤å‰æ£€æŸ¥
git status
git diff

# [2] å†™æ¸…æ™°çš„commitæ¶ˆæ¯
git commit -m "fix: ä¿®å¤reach_goalå¥–åŠ±é˜ˆå€¼é”™ä½é—®é¢˜

- ä¿®æ”¹dashgo_env_v2.pyç¬¬624è¡Œ
- å°†thresholdä»0.25mæ”¹ä¸º1.0m
- ä¿®å¤é—®é¢˜ï¼šæœºå™¨äººæ— æ³•æ­£ç¡®åˆ°è¾¾ç›®æ ‡

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"

# [3] å®šæœŸæ¨é€
git push
```

### å®è·µ2ï¼šä»£ç æ³¨é‡Š

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
```
âœ… å¥½çš„æ³¨é‡Šè®©ä½ ï¼š
- å¿«é€Ÿç†è§£ä»£ç 
- é¿å…é‡å¤é€ è½®å­
- æ–¹ä¾¿ç»´æŠ¤
```

**æœ€ä½³å®è·µ**ï¼š
```python
def reward_navigation_sota(env):
    """
    è®¡ç®—SOTAå¯¼èˆªå¥–åŠ±
    
    å¼€å‘åŸºå‡†: Isaac Sim 4.5 + Ubuntu 20.04
    å‚è€ƒå®˜æ–¹æ–‡æ¡£:
    - Isaac Sim 4.5 Reward Documentation
    - å®˜æ–¹ç¤ºä¾‹: source/extensions/omni.isaac.lab/omni/isaac/lab/tasks/
    
    å¥–åŠ±ç»„æˆï¼š
    1. progress_reward: å‰è¿›é€Ÿåº¦ Ã— cos(è§’åº¦è¯¯å·®)
    2. high_speed_reward: é€Ÿåº¦>0.25ä¸”æœå‘æ­£ç¡®
    3. backward_penalty: å€’è½¦æƒ©ç½šï¼ˆ-5.0å€ç»å¯¹å€¼ï¼‰
    4. collision_penalty: ç¢°æ’æƒ©ç½šï¼ˆ-500.0Ã—è·ç¦»å› å­ï¼‰
    5. angular_penalty: è§’é€Ÿåº¦æƒ©ç½šï¼ˆ-0.5å€ç»å¯¹å€¼ï¼‰
    6. terminal_reward: åœè½¦è¯±å¯¼ï¼ˆåˆ°è¾¾ç›®æ ‡+100.0ï¼‰
    
    Args:
        env: Isaac Labç¯å¢ƒ
        asset_cfg: èµ„äº§é…ç½®
        sensor_cfg: ä¼ æ„Ÿå™¨é…ç½®
    
    Returns:
        torch.Tensor: [N,] æ¯ä¸ªç¯å¢ƒçš„å¥–åŠ±å€¼
    """
    # è¯¦ç»†å®ç°...
```

### å®è·µ3ï¼šé—®é¢˜è®°å½•

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
```
âœ… è®°å½•é—®é¢˜è®©ä½ ï¼š
- é¿å…é‡å¤è¸©å‘
- å¿«é€Ÿè§£å†³é—®é¢˜
- ç§¯ç´¯é¡¹ç›®çŸ¥è¯†
```

**æœ€ä½³å®è·µ**ï¼š
```markdown
# é—®é¢˜è®°å½•æ¨¡æ¿

## [é—®é¢˜æ ‡é¢˜]

> **å‘ç°æ—¶é—´**: YYYY-MM-DD HH:MM:SS
> **ä¸¥é‡ç¨‹åº¦**: ğŸ”´ä¸¥é‡ / ğŸŸ¡è­¦å‘Š / ğŸŸ¢æç¤º
> **çŠ¶æ€**: æœªè§£å†³ / å·²è§£å†³

## é—®é¢˜æè¿°
[è¯¦ç»†æè¿°é—®é¢˜ç°è±¡]

## é”™è¯¯ä¿¡æ¯
[å®Œæ•´çš„é”™è¯¯ä¿¡æ¯]

## æ ¹æœ¬åŸå› 
[åˆ†æé—®é¢˜æ ¹æœ¬åŸå› ]

## è§£å†³æ–¹æ¡ˆ
### æ–¹æ¡ˆA: [æ–¹æ¡ˆæè¿°]
### æ–¹æ¡ˆB: [æ–¹æ¡ˆæè¿°]

## å®æ–½æ­¥éª¤
1. [æ­¥éª¤1]
2. [æ­¥éª¤2]

## éªŒè¯æ–¹æ³•
[å¦‚ä½•éªŒè¯é—®é¢˜å·²è§£å†³]

## ç»éªŒæ•™è®­
[ä»è¿™ä¸ªé—®é¢˜å­¦åˆ°ä»€ä¹ˆ]
```

## 22.2 è®­ç»ƒæœ€ä½³å®è·µ

### å®è·µ4ï¼šä»å°è§„æ¨¡å¼€å§‹

**ä¸ºä»€ä¹ˆï¼Ÿ**
```
âœ… å°è§„æ¨¡è®­ç»ƒï¼ˆ32ç¯å¢ƒï¼Œ1000è½®ï¼‰ï¼š
- å¿«é€ŸéªŒè¯ä»£ç 
- å¿«é€Ÿå‘ç°é—®é¢˜
- èŠ‚çœæ—¶é—´å’Œèµ„æº

âŒ å¤§è§„æ¨¡è®­ç»ƒï¼ˆ128ç¯å¢ƒï¼Œ9000è½®ï¼‰ï¼š
- è€—æ—¶å¾ˆé•¿ï¼ˆ50-70å°æ—¶ï¼‰
- é—®é¢˜éš¾ä»¥å®šä½
- æµªè´¹èµ„æº
```

**æœ€ä½³å®è·µ**ï¼š
```
1. é¦–æ¬¡è®­ç»ƒï¼š32ç¯å¢ƒï¼Œ1000è½®
2. éªŒè¯æ•ˆæœåï¼š64ç¯å¢ƒï¼Œ3000è½®
3. æœ€ç»ˆè®­ç»ƒï¼š32ç¯å¢ƒï¼Œ9000è½®
```

### å®è·µ5ï¼šä¿å®ˆå‚æ•°ä¼˜å…ˆ

**ä¸ºä»€ä¹ˆï¼Ÿ**
```
âœ… æ ‡å‡†å‚æ•°ï¼ˆPPOæ¨èï¼‰ï¼š
- learning_rate: 3e-4
- entropy_coef: 0.01
- clip_param: 0.2
- ä¹…ç»è€ƒéªŒï¼Œç¨³å®šå¯é 

âŒ æ¿€è¿›å‚æ•°ï¼š
- learning_rate: 1e-3ï¼ˆå¯èƒ½ä¸ç¨³å®šï¼‰
- entropy_coef: 0.05ï¼ˆå¯èƒ½è¿‡åº¦æ¢ç´¢ï¼‰
- é£é™©é«˜ï¼Œä¸æ¨è
```

### å®è·µ6ï¼šå®šæœŸä¿å­˜æ¨¡å‹

**ä¸ºä»€ä¹ˆï¼Ÿ**
```
âœ… å®šæœŸä¿å­˜ï¼š
- æ¯100è½®ä¿å­˜ä¸€æ¬¡
- å¯ä»¥å›é€€åˆ°ä¹‹å‰çŠ¶æ€
- é¿å…è®­ç»ƒå´©æºƒä¸¢å¤±

âŒ åªä¿å­˜æœ€ç»ˆæ¨¡å‹ï¼š
- è®­ç»ƒå´©æºƒ=å…¨éƒ¨ä¸¢å¤±
- æ— æ³•å›é€€
- é£é™©é«˜
```

**å®ç°æ–¹å¼**ï¼š
```yaml
# train_cfg_v2.yaml
runner:
  save_interval: 100  # æ¯100è½®ä¿å­˜
```

## 22.3 éƒ¨ç½²æœ€ä½³å®è·µ

### å®è·µ7ï¼šæ¸è¿›éƒ¨ç½²

**ä¸ºä»€ä¹ˆï¼Ÿ**
```
âœ… æ¸è¿›éƒ¨ç½²ï¼š
1. ä»¿çœŸæµ‹è¯•ï¼ˆéªŒè¯æ¨¡å‹ï¼‰
2. Gazeboä»¿çœŸï¼ˆéªŒè¯ROSé›†æˆï¼‰
3. å®‰å…¨ç¯å¢ƒæµ‹è¯•ï¼ˆç©ºæ—·æˆ¿é—´ï¼‰
4. ç®€å•ç¯å¢ƒæµ‹è¯•ï¼ˆå°‘é‡éšœç¢ç‰©ï¼‰
5. å¤æ‚ç¯å¢ƒæµ‹è¯•ï¼ˆå¤§é‡éšœç¢ç‰©ï¼‰

âŒ ç›´æ¥éƒ¨ç½²ï¼š
- è·³è¿‡éªŒè¯æ­¥éª¤
- é£é™©é«˜
- å®¹æ˜“å‡ºäº‹æ•…
```

### å®è·µ8ï¼šå®‰å…¨ç¬¬ä¸€

**ä¸ºä»€ä¹ˆï¼Ÿ**
```
âœ… å®‰å…¨ä¿æŠ¤ï¼š
1. é€Ÿåº¦é™åˆ¶ï¼ˆç¡¬è£æ–­ï¼‰
2. ç¢°æ’æ£€æµ‹ï¼ˆç´§æ€¥åœæ­¢ï¼‰
3. å€’è½¦ç¦æ­¢
4. äººå·¥ç›‘æ§ï¼ˆéšæ—¶å‡†å¤‡æ¥ç®¡ï¼‰
```

**å®ç°æ–¹å¼**ï¼š
```python
# safety_filter.py - ä¸‰å±‚é˜²æŠ¤
def filter(self, action, observation):
    v, w = action
    
    # [ç¬¬ä¸€å±‚] å€’è½¦ç¦æ­¢
    if v < 0:
        return [0.0, 0.0]
    
    # [ç¬¬äºŒå±‚] ç¢°æ’æ£€æµ‹
    if self.detect_collision(observation):
        return [0.0, 0.0]
    
    # [ç¬¬ä¸‰å±‚] çº¿æ€§è¡°å‡
    distance = self.min_distance(observation)
    if distance < 0.3:
        v *= distance / 0.3
    
    return [v, w]
```

### å®è·µ9ï¼šæŒç»­ç›‘æ§

**ä¸ºä»€ä¹ˆï¼Ÿ**
```
âœ… æŒç»­ç›‘æ§ï¼š
- å®æ—¶æŸ¥çœ‹æ—¥å¿—
- ç›‘æ§æ¨ç†é€Ÿåº¦
- è§‚å¯Ÿæœºå™¨äººè¡Œä¸º
- åŠæ—¶å‘ç°é—®é¢˜
```

**ç›‘æ§æŒ‡æ ‡**ï¼š
```bash
# [1] æ¨ç†é€Ÿåº¦
rostopic hz /cmd_vel
# åº”è¯¥>50Hz

# [2] CPUä½¿ç”¨ç‡
htop
# åº”è¯¥<80%

# [3] å†…å­˜ä½¿ç”¨
free -h
# åº”è¯¥æœ‰20%ä½™é‡
```

## 22.4 å­¦ä¹ å»ºè®®

### å»ºè®®1ï¼šä»ç®€å•å¼€å§‹

```
å­¦ä¹ è·¯å¾„ï¼š
1. âœ… å…ˆç†è§£åŸºç¡€æ¦‚å¿µï¼ˆå¼ºåŒ–å­¦ä¹ ã€ROSï¼‰
2. âœ… å†è¿è¡Œè®­ç»ƒï¼ˆæ ‡å‡†å‚æ•°ï¼‰
3. âœ… ç„¶åè°ƒä¼˜ï¼ˆä¸€æ¬¡1-2ä¸ªå‚æ•°ï¼‰
4. âœ… æœ€åéƒ¨ç½²ï¼ˆæ¸è¿›éƒ¨ç½²ï¼‰
```

### å»ºè®®2ï¼šè®°å½•ä¸€åˆ‡

```
è®°å½•å†…å®¹ï¼š
1. è®­ç»ƒé…ç½®ï¼ˆtrain_cfg_v2.yamlï¼‰
2. è®­ç»ƒæ—¥å¿—ï¼ˆlogs/*/log.txtï¼‰
3. é—®é¢˜è®°å½•ï¼ˆissues/ç›®å½•ï¼‰
4. è°ƒä¼˜è®°å½•ï¼ˆå®éªŒå¯¹æ¯”ï¼‰
```

### å»ºè®®3ï¼šå¯»æ±‚å¸®åŠ©

```
å¸®åŠ©æ¸ é“ï¼š
1. æŸ¥çœ‹issues/ç›®å½•ï¼ˆ70+é—®é¢˜ï¼‰
2. æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼ˆIsaac Sim/Isaac Labï¼‰
3. æœç´¢GitHub Issues
4. å‚è€ƒç¤¾åŒºè®ºå›
```

---

## ğŸ“š é™„å½•

### A. å®Œæ•´å‘½ä»¤å‚è€ƒ

```bash
# ç¯å¢ƒæ­å»º
sudo apt update
sudo apt install -y nvidia-driver-525
wget https://developer.download.nvidia.com/compute/cuda/12.0.0/local_installers/cuda_12.0.0_525.60.13_linux.run
sudo sh cuda_12.0.0_525.60.13_linux.run --toolkit --silent --override

# è®­ç»ƒ
cd ~/dashgo_rl_project
~/IsaacLab/isaaclab.sh -p train_v2.py --headless --enable_cameras --num_envs 32

# æ¼”ç¤º
~/IsaacLab/isaaclab.sh -p play.py --num_envs 1

# è¯Šæ–­
~/IsaacLab/isaaclab.sh -p verify_ultimate_v5.py --headless

# å¯¼å‡ºæ¨¡å‹
python export_torchscript.py logs/dashgo_v5_auto/model_9000.pt models/policy_torchscript.pt

# éƒ¨ç½²
roslaunch dashgo_bringup minimal.launch
roslaunch dashgo_rl sim2real_golden.launch enable_move_base:=false
```

### B. é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹

**train_cfg_v2.yaml**ï¼ˆè§ç¬¬ä¹ç« ï¼‰

**my_dashgo_params.yaml**ï¼ˆè§ç¬¬åç« ï¼‰

**sim2real_golden.launch**ï¼ˆè§ç¬¬åä¸ƒç« ï¼‰

### C. å…³é”®ä»£ç ç‰‡æ®µ

**è§‚æµ‹å¤„ç†**ï¼ˆç¬¬å…«ç« ï¼‰

**å¥–åŠ±å‡½æ•°**ï¼ˆç¬¬å…«ç« ï¼‰

**ç½‘ç»œæ¶æ„**ï¼ˆç¬¬å…«ç« ï¼‰

### D. å‚è€ƒèµ„æ–™

1. **Isaac Labå®˜æ–¹æ–‡æ¡£**
   - https://docs.omniverse.nvidia.com/isaacsim/latest
   - https://isaac-sim.readthedocs.io

2. **RSL-RLå®˜æ–¹æ–‡æ¡£**
   - https://leggedrobotics.github.io/rsl_rl/

3. **ROSæ•™ç¨‹**
   - http://wiki.ros.org/ROS/Tutorials

4. **é¡¹ç›®æ–‡æ¡£**
   - README.mdï¼ˆé¡¹ç›®è¯´æ˜ï¼‰
   - issues/ï¼ˆé—®é¢˜è®°å½•ï¼‰
   - docs/ï¼ˆæŠ€æœ¯æ–‡æ¡£ï¼‰

---

## ğŸ‰ ç»“è¯­

æ­å–œï¼ä½ å·²ç»å®Œæˆäº†ä»0åˆ°éƒ¨ç½²çš„å®Œæ•´å­¦ä¹ ä¹‹æ—…ï¼

### ä½ å·²ç»æŒæ¡ï¼š
âœ… Ubuntu 20.04 + Isaac Sim 4.5ç¯å¢ƒæ­å»º
âœ… å¼ºåŒ–å­¦ä¹ å’ŒPPOåŸºç¡€åŸç†
âœ… Isaac Labæ¡†æ¶ä½¿ç”¨
âœ… ROSåŸºç¡€å’Œéƒ¨ç½²
âœ… DashGoé¡¹ç›®å®Œæ•´æµç¨‹
âœ… å‚æ•°è°ƒä¼˜å’Œé—®é¢˜è§£å†³

### ä¸‹ä¸€æ­¥å»ºè®®ï¼š
1. **å®è·µè®­ç»ƒ**ï¼šäº²è‡ªè®­ç»ƒä¸€ä¸ªæ¨¡å‹
2. **å®ç‰©éƒ¨ç½²**ï¼šåœ¨æœºå™¨äººä¸Šæµ‹è¯•
3. **æ·±å…¥ä¼˜åŒ–**ï¼šæ”¹è¿›æ€§èƒ½
4. **åˆ†äº«ç»éªŒ**ï¼šè®°å½•é—®é¢˜ï¼Œå¸®åŠ©ä»–äºº

### æŒç»­å­¦ä¹ ï¼š
- å…³æ³¨Isaac Labå®˜æ–¹æ›´æ–°
- å‚ä¸å¼€æºç¤¾åŒº
- é˜…è¯»æœ€æ–°è®ºæ–‡
- å®éªŒæ–°æŠ€æœ¯

---

**ç¼–å†™è¿›åº¦**ï¼š100%å®Œæˆï¼
**æ–‡æ¡£è§„æ¨¡**ï¼š3000+è¡Œï¼Œ80KB+
**åˆ›å»ºæ—¶é—´**ï¼š2026-01-30
**ä½œè€…**ï¼šClaude Code AI Assistant
**ç‰ˆæœ¬**ï¼šv1.0

**è‡´è°¢**ï¼š
æ„Ÿè°¢DashGo RL Navigationé¡¹ç›®æä¾›çš„å®Œæ•´æ•°æ®å’Œä»£ç ï¼Œè®©è¿™ä¸ªæ•™å­¦æ–‡æ¡£æˆä¸ºå¯èƒ½ã€‚

---

**æ–‡æ¡£çŠ¶æ€**ï¼šâœ… å®Œæˆ
**è´¨é‡ä¿è¯**ï¼šå·²æ£€æŸ¥å®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€å¯è¯»æ€§
**é€‚ç”¨äººç¾¤**ï¼š0åŸºç¡€å­¦ä¹ è€…
**æœ€åæ›´æ–°**ï¼š2026-01-30 10:30:00

