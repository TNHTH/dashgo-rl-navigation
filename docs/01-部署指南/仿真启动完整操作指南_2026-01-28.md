# DashGo RLä»¿çœŸå¯åŠ¨ - å®Œæ•´æ“ä½œæŒ‡å—

**ç›®æ ‡**ï¼šä»é›¶åˆ°å¯åŠ¨Gazeboä»¿çœŸå’ŒRLå¯¼èˆªèŠ‚ç‚¹
**é¢„è®¡æ—¶é—´**ï¼š20-30åˆ†é’Ÿï¼ˆé¦–æ¬¡ç¯å¢ƒå‡†å¤‡ï¼‰+ 2åˆ†é’Ÿï¼ˆåç»­å¯åŠ¨ï¼‰
**éš¾åº¦ç­‰çº§**ï¼šâ­â­â­ ä¸­ç­‰

---

## ğŸ“‹ å‡†å¤‡å·¥ä½œæ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹æ¡ä»¶ï¼š

- [ ] âœ… å·²å®‰è£…Ubuntu 20.04 + ROS Noetic
- [ ] âœ… å·²å®‰è£…condaï¼ˆAnacondaæˆ–Minicondaï¼‰
- [ ] âœ… é¡¹ç›®ä»£ç åœ¨ `~/dashgo_rl_project` ç›®å½•
- [ ] âœ… æ¨¡å‹æ–‡ä»¶å·²å¯¼å‡ºï¼ˆ`catkin_ws/src/dashgo_rl/models/policy_torchscript.pt`ï¼‰

---

## ğŸš€ ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼Œä»…éœ€ä¸€æ¬¡ï¼‰

### æ­¥éª¤1ï¼šæ£€æŸ¥Pythonç‰ˆæœ¬

**ç›®çš„**ï¼šç¡®è®¤ç³»ç»ŸPythonç‰ˆæœ¬

```bash
# æ£€æŸ¥ç³»ç»ŸPython 3.8æ˜¯å¦å·²å®‰è£…
python3.8 --version
```

**é¢„æœŸè¾“å‡º**ï¼š
```
Python 3.8.10
```

**å¦‚æœæŠ¥é”™**ï¼š
```bash
# å®‰è£…Python 3.8
sudo apt update
sudo apt install python3.8 python3.8-dev -y
```

---

### æ­¥éª¤2ï¼šåˆ›å»ºdashgo_deployç¯å¢ƒ

**ç›®çš„**ï¼šåˆ›å»ºä¸“ç”¨çš„Python 3.8ç¯å¢ƒï¼Œå®‰è£…PyTorchå’ŒROSä¾èµ–

```bash
# 1. åˆ›å»ºç¯å¢ƒ
conda create -n dashgo_deploy python=3.8 -y

# 2. æ¿€æ´»ç¯å¢ƒ
conda activate dashgo_deploy

# 3. éªŒè¯Pythonç‰ˆæœ¬
python --version
# åº”è¯¥æ˜¾ç¤ºï¼šPython 3.8.x
```

**é¢„æœŸè¾“å‡º**ï¼š
```
(dashgo_deploy) $ python --version
Python 3.8.18
```

---

### æ­¥éª¤3ï¼šå®‰è£…PyTorch

**ç›®çš„**ï¼šå®‰è£…PyTorch CPUç‰ˆï¼ˆç¬”è®°æœ¬å¤Ÿç”¨ï¼‰

```bash
# ç¡®ä¿åœ¨dashgo_deployç¯å¢ƒä¸­
conda activate dashgo_deploy

# å®‰è£…PyTorch 1.10.0ï¼ˆä¸è®­ç»ƒç¯å¢ƒä¸€è‡´ï¼‰
pip install torch==1.10.0 torchvision==0.11.0

# éªŒè¯å®‰è£…
python -c "import torch; print('PyTorchç‰ˆæœ¬:', torch.__version__)"
```

**é¢„æœŸè¾“å‡º**ï¼š
```
PyTorchç‰ˆæœ¬: 1.10.0
```

**â±ï¸ é¢„è®¡æ—¶é—´**ï¼š2-5åˆ†é’Ÿï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰

---

### æ­¥éª¤4ï¼šå®‰è£…ROSæ¡¥æ¥åº“

**ç›®çš„**ï¼šè®©condaç¯å¢ƒèƒ½ä½¿ç”¨ROS

```bash
# ç¡®ä¿åœ¨dashgo_deployç¯å¢ƒä¸­
conda activate dashgo_deploy

# å®‰è£…ROS Pythonä¾èµ–
pip install rospkg defusedxml netifaces numpy empy

# éªŒè¯
python -c "import rospy; print('âœ… ROSå¯ç”¨')"
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… ROSå¯ç”¨
```

---

### æ­¥éª¤5ï¼šç¼–è¯‘ROSå·¥ä½œç©ºé—´

**ç›®çš„**ï¼šä½¿ç”¨dashgo_deployç¯å¢ƒç¼–è¯‘ï¼Œç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹ä½¿ç”¨æ­£ç¡®çš„Python

```bash
# 1. è¿›å…¥å·¥ä½œç©ºé—´
cd ~/dashgo_rl_project/catkin_ws

# 2. æ¸…ç†æ—§ç¼–è¯‘ï¼ˆå¦‚æœæœ‰ï¼‰
rm -rf build devel install

# 3. ç¡®ä¿åœ¨dashgo_deployç¯å¢ƒ
conda activate dashgo_deploy

# 4. æ˜¾å¼æŒ‡å®šPythonè·¯å¾„ç¼–è¯‘
catkin_make -DPYTHON_EXECUTABLE=$(which python)
```

**é¢„æœŸè¾“å‡º**ï¼š
```
[ 50%] Built target dashgo_rl
[100%] Linking CXX executable devel/lib/dashgo_rl/geo_nav_node.py
[100%] Built target dashgo_rl
```

**å¦‚æœç¼–è¯‘æˆåŠŸ**ï¼š
```bash
# åˆ·æ–°ç¯å¢ƒ
source devel/setup.bash

# éªŒè¯ROSåŒ…
rospack list | grep dashgo
```

**é¢„æœŸè¾“å‡º**ï¼š
```
dashgo_rl /home/gwh/dashgo_rl_project/catkin_ws/src/dashgo_rl
```

**â±ï¸ é¢„è®¡æ—¶é—´**ï¼š1-2åˆ†é’Ÿ

---

### æ­¥éª¤6ï¼šéªŒè¯æ¨¡å‹æ–‡ä»¶

**ç›®çš„**ï¼šç¡®è®¤TorchScriptæ¨¡å‹å·²å¯¼å‡º

```bash
# æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -lh ~/dashgo_rl_project/catkin_ws/src/dashgo_rl/models/policy_torchscript.pt
```

**é¢„æœŸè¾“å‡º**ï¼š
```
-rw-rw-r-- 1 gwh gwh 1.8M Jan 28 00:24 policy_torchscript.pt
```

**å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨**ï¼š
```bash
# è¿è¡Œæ¨¡å‹å¯¼å‡ºè„šæœ¬
~/IsaacLab/isaaclab.sh -p export_torchscript.py
```

---

## âœ… ç¬¬ä¸€é˜¶æ®µå®Œæˆæ£€æŸ¥

**éªŒè¯ç‚¹**ï¼š
- [ ] âœ… `conda activate dashgo_deploy` æˆåŠŸ
- [ ] âœ… `python -c "import torch; import rospy"` æ— é”™è¯¯
- [ ] âœ… `rospack list | grep dashgo` æ˜¾ç¤ºdashgo_rlåŒ…
- [ ] âœ… æ¨¡å‹æ–‡ä»¶å­˜åœ¨ï¼ˆ~1.8MBï¼‰

**å…¨éƒ¨é€šè¿‡ï¼Ÿæ­å–œï¼è¿›å…¥ç¬¬äºŒé˜¶æ®µï¼** ğŸ‰

---

## ğŸ® ç¬¬äºŒé˜¶æ®µï¼šå¯åŠ¨ä»¿çœŸï¼ˆæ¯æ¬¡ä½¿ç”¨ï¼‰

### å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/dashgo_rl_project

# 2. ä¸€é”®å¯åŠ¨ä»¿çœŸ
./run_sim.sh
```

**å°±è¿™ä¹ˆç®€å•ï¼** è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ¿€æ´»dashgo_deployç¯å¢ƒ
- âœ… åŠ è½½ROSå·¥ä½œç©ºé—´
- âœ… å¯åŠ¨Gazeboä»¿çœŸ
- âœ… å¯åŠ¨RLå¯¼èˆªèŠ‚ç‚¹
- âœ… å¯åŠ¨Rvizå¯è§†åŒ–

---

### æ‰‹åŠ¨å¯åŠ¨ï¼ˆäº†è§£åŸç†ï¼‰

å¦‚æœä½ æƒ³äº†è§£æ¯ä¸€æ­¥åœ¨åšä»€ä¹ˆï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

#### Terminal 1ï¼šå¯åŠ¨ä»¿çœŸç¯å¢ƒ

```bash
# 1. æ¿€æ´»ç¯å¢ƒ
conda activate dashgo_deploy

# 2. åŠ è½½ROSç¯å¢ƒ
source ~/dashgo_rl_project/catkin_ws/devel/setup.bash

# 3. å¯åŠ¨ä»¿çœŸlaunchæ–‡ä»¶
roslaunch dashgo_rl sim2real_golden.launch
```

**é¢„æœŸæ•ˆæœ**ï¼š
1. **Gazeboçª—å£**è‡ªåŠ¨æ‰“å¼€
2. **Rvizçª—å£**è‡ªåŠ¨æ‰“å¼€
3. ç»ˆç«¯æ˜¾ç¤ºèŠ‚ç‚¹å¯åŠ¨ä¿¡æ¯

---

### éªŒè¯ä»¿çœŸæ˜¯å¦æˆåŠŸ

#### æ£€æŸ¥1ï¼šèŠ‚ç‚¹æ˜¯å¦è¿è¡Œ

**æ‰“å¼€æ–°ç»ˆç«¯**ï¼š
```bash
# æ£€æŸ¥ROSèŠ‚ç‚¹åˆ—è¡¨
rosnode list

# é¢„æœŸè¾“å‡ºåº”è¯¥åŒ…å«ï¼š
# /geo_nav_node
# /slam_gmapping
# /rviz
# /robot_state_publisher
```

---

#### æ£€æŸ¥2ï¼šè¯é¢˜æ˜¯å¦å‘å¸ƒ

```bash
# æ£€æŸ¥è¯é¢˜åˆ—è¡¨
rostopic list

# é¢„æœŸåº”è¯¥åŒ…å«ï¼š
# /scan        (é›·è¾¾æ•°æ®)
# /odom        (é‡Œç¨‹è®¡)
# /cmd_vel     (é€Ÿåº¦å‘½ä»¤)
# /move_base_simple/goal (ç›®æ ‡ç‚¹)
```

---

#### æ£€æŸ¥3ï¼šæ•°æ®æµæ˜¯å¦æ­£å¸¸

```bash
# æ£€æŸ¥/scanè¯é¢˜é¢‘ç‡
rostopic hz /scan

# é¢„æœŸè¾“å‡ºï¼šaverage rate: 10.0
```

---

## ğŸ¯ ç¬¬ä¸‰é˜¶æ®µï¼šæµ‹è¯•RLå¯¼èˆª

### æ–¹æ³•1ï¼šä½¿ç”¨Rvizå‘é€ç›®æ ‡ç‚¹ï¼ˆæ¨èï¼‰

1. **åœ¨Rvizçª—å£ä¸­**ï¼š
   - ç‚¹å‡»å·¥å…·æ çš„ **"2D Nav Goal"** æŒ‰é’®ï¼ˆç»¿è‰²ç®­å¤´å›¾æ ‡ï¼‰

2. **åœ¨åœ°å›¾ä¸Š**ï¼š
   - ç‚¹å‡»ä»»æ„ä½ç½®ï¼ˆç›®æ ‡ç‚¹ï¼‰
   - æ‹–æ‹½é¼ æ ‡è°ƒæ•´æ–¹å‘ï¼ˆè½¦å¤´æœå‘ï¼‰
   - æ¾å¼€é¼ æ ‡

3. **è§‚å¯Ÿæœºå™¨äºº**ï¼š
   - Gazeboä¸­çš„å°è½¦åº”è¯¥å¼€å§‹ç§»åŠ¨
   - Rvizä¸­åº”è¯¥èƒ½çœ‹åˆ°æœºå™¨äººè½¨è¿¹
   - ç»ˆç«¯åº”è¯¥æ˜¾ç¤ºå¯¼èˆªä¿¡æ¯

---

### æ–¹æ³•2ï¼šä½¿ç”¨å‘½ä»¤è¡Œå‘é€ç›®æ ‡ç‚¹

```bash
# å‘é€ç›®æ ‡ç‚¹åˆ° (x=2.0, y=1.0, æœå‘ä¸œ)
rostopic pub /move_base_simple/goal geometry_msgs/PoseStamped "
header:
  frame_id: 'map'
pose:
  position:
    x: 2.0
    y: 1.0
    z: 0.0
  orientation:
    x: 0.0
    y: 0.0
    z: 0.0
    w: 1.0"
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šconda command not found

**ç—‡çŠ¶**ï¼š
```bash
conda activate dashgo_deploy
# conda: command not found
```

**è§£å†³**ï¼š
```bash
# æ–¹æ¡ˆAï¼šåˆå§‹åŒ–conda
source ~/miniconda3/bin/activate  # æˆ–anaconda3
conda activate dashgo_deploy

# æ–¹æ¡ˆBï¼šåœ¨~/.bashrcä¸­æ·»åŠ condaè·¯å¾„
echo 'export PATH="$HOME/miniconda3/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
```

---

### é—®é¢˜2ï¼šæ¨¡å‹åŠ è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
âŒ æ¨¡å‹åŠ è½½å¤±è´¥: [Errno 2] No such file or directory
```

**è§£å†³**ï¼š
```bash
# 1. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -lh ~/dashgo_rl_project/catkin_ws/src/dashgo_rl/models/policy_torchscript.pt

# 2. å¦‚æœä¸å­˜åœ¨ï¼Œé‡æ–°å¯¼å‡º
cd ~/dashgo_rl_project
~/IsaacLab/isaaclab.sh -p export_torchscript.py
```

---

### é—®é¢˜3ï¼šGazeboæ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š
```
Resource not found: gazebo_ros
```

**è§£å†³**ï¼š
```bash
# å®‰è£…gazebo_ros
sudo apt install ros-noetic-gazebo-ros ros-noetic-gazebo-plugins -y

# é‡æ–°è¿è¡Œ
source ~/.bashrc
roslaunch dashgo_rl sim2real_golden.launch
```

---

### é—®é¢˜4ï¼šRLèŠ‚ç‚¹å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
ModuleNotFoundError: No module named 'torch'
```

**è§£å†³**ï¼š
```bash
# 1. ç¡®è®¤åœ¨dashgo_deployç¯å¢ƒ
conda activate dashgo_deploy

# 2. æ£€æŸ¥PyTorchæ˜¯å¦å®‰è£…
python -c "import torch; print(torch.__version__)"

# 3. å¦‚æœæ²¡æœ‰å®‰è£…
pip install torch==1.10.0 torchvision==0.11.0

# 4. é‡æ–°ç¼–è¯‘å·¥ä½œç©ºé—´
cd ~/dashgo_rl_project/catkin_ws
rm -rf build devel
catkin_make -DPYTHON_EXECUTABLE=$(which python)
source devel/setup.bash
```

---

### é—®é¢˜5ï¼šRvizæ˜¾ç¤ºç©ºç™½

**ç—‡çŠ¶**ï¼šRvizæ‰“å¼€ä½†ä»€ä¹ˆéƒ½çœ‹ä¸åˆ°

**è§£å†³**ï¼š
1. åœ¨Rvizå·¦ä¾§é¢æ¿ï¼Œæ£€æŸ¥ **"Fixed Frame"** è®¾ç½®
2. æ”¹ä¸º `map` æˆ– `odom`
3. ç‚¹å‡» **"Add"** æŒ‰é’®ï¼Œæ·»åŠ ä»¥ä¸‹æ˜¾ç¤ºé¡¹ï¼š
   - **By topic** â†’ `/scan` â†’ **LaserScan**ï¼ˆæ˜¾ç¤ºé›·è¾¾ï¼‰
   - **By display type** â†’ **RobotModel**ï¼ˆæ˜¾ç¤ºæœºå™¨äººï¼‰
   - **By topic** â†’ `/cmd_vel` â†’ **Twist**ï¼ˆæ˜¾ç¤ºé€Ÿåº¦ï¼‰

---

## ğŸ“Š æˆåŠŸæ ‡å¿—

å½“ä¸€åˆ‡æ­£å¸¸æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

### Gazeboçª—å£
- âœ… æ˜¾ç¤ºä»¿çœŸç¯å¢ƒ
- âœ… æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ï¼ˆå¯èƒ½æ˜¯ç®€å•çš„å½¢çŠ¶ï¼‰
- âœ… æœºå™¨äººèƒ½å“åº”ç›®æ ‡ç‚¹ç§»åŠ¨

### Rvizçª—å£
- âœ… æ˜¾ç¤ºé›·è¾¾æ‰«æçº¿ï¼ˆçº¢è‰²å°„çº¿ï¼‰
- âœ… æ˜¾ç¤ºæœºå™¨äººä½ç½®å’Œæœå‘
- âœ… å¯ä»¥é€šè¿‡"2D Nav Goal"å·¥å…·å‘é€ç›®æ ‡ç‚¹

### ç»ˆç«¯è¾“å‡º
```
[INFO] ä½¿ç”¨è®¾å¤‡: cpu
[INFO] åŠ è½½æ¨¡å‹: .../policy_torchscript.pt
âœ… æ¨¡å‹åŠ è½½æˆåŠŸ
[INFO] GeoNavNode å·²å¯åŠ¨ï¼Œç­‰å¾…ç›®æ ‡ç‚¹...
```

---

## ğŸ“ è¿›é˜¶æ“ä½œ

### æŸ¥çœ‹å®æ—¶è¯é¢˜æ•°æ®

```bash
# æŸ¥çœ‹é›·è¾¾æ•°æ®
rostopic echo /scan -n 1

# æŸ¥çœ‹é€Ÿåº¦å‘½ä»¤
rostopic echo /cmd_vel -n 1

# æŸ¥çœ‹é‡Œç¨‹è®¡
rostopic echo /odom -n 1
```

---

### è®°å½•ä»¿çœŸæ•°æ®ï¼ˆbagæ–‡ä»¶ï¼‰

```bash
# åˆ›å»ºä¿å­˜ç›®å½•
mkdir -p ~/bags/sim_test

# è®°å½•æ‰€æœ‰è¯é¢˜
rosbag record -O ~/bags/sim_test/sim_test.bag \
  /scan \
  /odom \
  /cmd_vel \
  /move_base_simple/goal

# æŒ‰ Ctrl+C åœæ­¢è®°å½•

# å›æ”¾bagæ–‡ä»¶
rosbag play ~/bags/sim_test/sim_test.bag
```

---

### è°ƒæ•´ä»¿çœŸå‚æ•°

**ç¼–è¾‘launchæ–‡ä»¶**ï¼š
```bash
# ç¼–è¾‘ä»¿çœŸlaunchæ–‡ä»¶
nano ~/dashgo_rl_project/catkin_ws/src/dashgo_rl/launch/sim2real_golden.launch

# ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š
# - max_lin_vel: æœ€å¤§çº¿é€Ÿåº¦ï¼ˆé»˜è®¤0.3 m/sï¼‰
# - max_ang_vel: æœ€å¤§è§’é€Ÿåº¦ï¼ˆé»˜è®¤1.0 rad/sï¼‰
# - control_rate: æ§åˆ¶é¢‘ç‡ï¼ˆé»˜è®¤20 Hzï¼‰
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

ä»¿çœŸæˆåŠŸåï¼Œæ‚¨å¯ä»¥ï¼š

1. **æµ‹è¯•ä¸åŒåœºæ™¯**ï¼šå‘é€å¤šä¸ªç›®æ ‡ç‚¹ï¼Œè§‚å¯Ÿå¯¼èˆªæ•ˆæœ
2. **è°ƒæ•´å‚æ•°**ï¼šä¼˜åŒ–é€Ÿåº¦ã€æ§åˆ¶é¢‘ç‡ç­‰
3. **å‡†å¤‡å®è½¦**ï¼šæŒ‰ç…§å®è½¦éƒ¨ç½²æŒ‡å—è¿æ¥çœŸå®æœºå™¨äºº
4. **æ€§èƒ½åˆ†æ**ï¼šä½¿ç”¨rosbagè®°å½•æ•°æ®ï¼Œåˆ†æå¯¼èˆªæ•ˆæœ

---

## âœ… å¿«é€Ÿå‚è€ƒå¡

### é¦–æ¬¡ä½¿ç”¨ï¼ˆ20-30åˆ†é’Ÿï¼‰

```bash
# 1. åˆ›å»ºç¯å¢ƒ
conda create -n dashgo_deploy python=3.8 -y
conda activate dashgo_deploy

# 2. å®‰è£…ä¾èµ–
pip install torch==1.10.0 torchvision==0.11.0
pip install rospkg defusedxml netifaces numpy empy

# 3. ç¼–è¯‘
cd ~/dashgo_rl_project/catkin_ws
catkin_make -DPYTHON_EXECUTABLE=$(which python)
source devel/setup.bash
```

### æ—¥å¸¸ä½¿ç”¨ï¼ˆ2åˆ†é’Ÿï¼‰

```bash
cd ~/dashgo_rl_project
./run_sim.sh
```

### æ‰‹åŠ¨å¯åŠ¨

```bash
conda activate dashgo_deploy
source ~/dashgo_rl_project/catkin_ws/devel/setup.bash
roslaunch dashgo_rl sim2real_golden.launch
```

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**æ›´æ–°æ—¶é—´**ï¼š2026-01-28
**çŠ¶æ€**ï¼šâœ… å·²æµ‹è¯•
**ç»´æŠ¤è€…**ï¼šClaude Code AI Assistant

ç¥æ‚¨ä»¿çœŸé¡ºåˆ©ï¼ğŸš€
