# DashGo Sim2Realéƒ¨ç½² - æ–‡ä»¶åˆ›å»ºæ€»ç»“

**åˆ›å»ºæ—¶é—´**ï¼š2026-01-28
**ç‰ˆæœ¬**ï¼šv1.0-ç¬”è®°æœ¬æ§åˆ¶ç‰ˆ
**åŸºäº**ï¼šæ¶æ„å¸ˆå®¡æ ¸ä¸ä¿®æ­£æ„è§

---

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

### 1. connect_to_robot.sh - ROSå¤šæœºè¿æ¥è„šæœ¬

**è·¯å¾„**ï¼š`~/dashgo_rl_project/connect_to_robot.sh`

**ç”¨é€”**ï¼šè‡ªåŠ¨åŒ–é…ç½®ROSå¤šæœºé€šè®¯ï¼Œæµ‹è¯•ä¸æœºå™¨äººçš„è¿æ¥

**æ¶æ„å¸ˆä¿®æ­£ç‚¹**ï¼š
- âœ… **æ™ºèƒ½IPè·å–**ï¼šä¼˜å…ˆæŠ“å–192.168å¼€å¤´çš„å±€åŸŸç½‘IP
- âœ… **äº¤äº’å¼ç¡®è®¤**ï¼šå¦‚æœè‡ªåŠ¨è¯†åˆ«å¤±è´¥ï¼Œæç¤ºç”¨æˆ·æ‰‹åŠ¨è¾“å…¥
- âœ… **è¿æ¥æµ‹è¯•**ï¼šè‡ªåŠ¨æµ‹è¯•ROS Masterè¿é€šæ€§
- âœ… **å‹å¥½æç¤º**ï¼šæä¾›è¯¦ç»†çš„æ•…éšœæ’æŸ¥å»ºè®®

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# äº¤äº’å¼è¾“å…¥IP
./connect_to_robot.sh

# ç›´æ¥æŒ‡å®šIP
./connect_to_robot.sh 192.168.5.100
```

---

### 2. run_sim.sh - ä»¿çœŸæ¨¡å¼å¯åŠ¨è„šæœ¬

**è·¯å¾„**ï¼š`~/dashgo_rl_project/run_sim.sh`

**ç”¨é€”**ï¼šä¸€é”®å¯åŠ¨Gazeboä»¿çœŸå’ŒRLå¯¼èˆªèŠ‚ç‚¹

**æ¶æ„å¸ˆä¿®æ­£ç‚¹**ï¼š
- âœ… **ç®€åŒ–è®¾è®¡**ï¼šåªè´Ÿè´£ä»¿çœŸæ¨¡å¼ï¼Œé€»è¾‘æ¸…æ™°
- âœ… **è‡ªåŠ¨æ¿€æ´»ç¯å¢ƒ**ï¼šæ£€æŸ¥å¹¶æ¿€æ´»dashgo_deployç¯å¢ƒ
- âœ… **é”™è¯¯æç¤º**ï¼šå¦‚æœç¼ºå°‘ç¯å¢ƒï¼Œç»™å‡ºæ˜ç¡®æç¤º

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
./run_sim.sh
```

---

### 3. run_real.sh - å®è½¦æ¨¡å¼å¯åŠ¨è„šæœ¬

**è·¯å¾„**ï¼š`~/dashgo_rl_project/run_real.sh`

**ç”¨é€”**ï¼šä¸€é”®è¿æ¥æœºå™¨äººå¹¶å¯åŠ¨RLå¯¼èˆªèŠ‚ç‚¹

**æ¶æ„å¸ˆä¿®æ­£ç‚¹**ï¼š
- âœ… **é›†æˆconnect_to_robot.sh**ï¼šè‡ªåŠ¨é…ç½®å¤šæœºé€šè®¯
- âœ… **è¿æ¥éªŒè¯**ï¼šå¦‚æœæ— æ³•è¿æ¥åˆ°æœºå™¨äººï¼Œä¸­æ­¢å¯åŠ¨
- âœ… **æ¸…æ™°æç¤º**ï¼šæ¯ä¸ªæ­¥éª¤éƒ½æœ‰æ˜ç¡®çš„è¿›åº¦æç¤º

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# äº¤äº’å¼è¾“å…¥IP
./run_real.sh

# ç›´æ¥æŒ‡å®šIP
./run_real.sh 192.168.5.100
```

---

### 4. real_control.launch - å®è½¦æ§åˆ¶Launchæ–‡ä»¶

**è·¯å¾„**ï¼š`catkin_ws/src/dashgo_rl/launch/real_control.launch`

**ç”¨é€”**ï¼šå®è½¦æ§åˆ¶ä¸“ç”¨ï¼Œä¸åŒ…å«Gazeboï¼Œåªè¿è¡ŒRLèŠ‚ç‚¹å’Œå¯é€‰çš„Rviz

**æ¶æ„å¸ˆä¿®æ­£ç‚¹**ï¼š
- âœ… **è·¯å¾„ä¼˜åŒ–**ï¼šä½¿ç”¨`$(find dashgo_rl)/models/`ç›¸å¯¹è·¯å¾„
- âœ… **å‚æ•°å¯¹é½**ï¼šmax_lin_vel=0.3, max_ang_vel=1.0ï¼ˆä¸dashgo_config.pyä¸€è‡´ï¼‰
- âœ… **å¯é€‰RViz**ï¼šenable_rvizå‚æ•°ï¼Œé»˜è®¤true
- âœ… **é…ç½®æ–‡ä»¶æ£€æŸ¥**ï¼šå¦‚æœRVizé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½¿ç”¨é»˜è®¤é…ç½®

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
roslaunch dashgo_rl real_control.launch
```

---

### 5. sim2real_golden.launch - ä»¿çœŸLaunchæ–‡ä»¶

**è·¯å¾„**ï¼š`catkin_ws/src/dashgo_rl/launch/sim2real_golden.launch`

**ç”¨é€”**ï¼šGazeboä»¿çœŸä¸“ç”¨ï¼ŒåŒ…å«å®Œæ•´çš„ä»¿çœŸç¯å¢ƒ

**æ¶æ„å¸ˆä¿®æ­£ç‚¹**ï¼š
- âœ… **Fallbackç­–ç•¥**ï¼šä¸ä¾èµ–dashgo_gazeboåŒ…ï¼Œä½¿ç”¨gazebo_rosçš„empty_world
- âœ… **æ¨¡å—åŒ–è®¾è®¡**ï¼šenable_gazebo, enable_gmapping, enable_rvizå‚æ•°
- âœ… **å®Œæ•´Gmappingé…ç½®**ï¼šä¸nav01.launchå‚æ•°ä¸€è‡´
- âœ… **æ³¨é‡Šæ¸…æ™°**ï¼šæ ‡æ˜å“ªäº›æ˜¯å½“å‰ä½¿ç”¨çš„ï¼Œå“ªäº›æ˜¯å¤‡é€‰æ–¹æ¡ˆ

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
roslaunch dashgo_rl sim2real_golden.launch
```

---

### 6. geo_nav_node.py - Shebangä¿®æ”¹

**è·¯å¾„**ï¼š`catkin_ws/src/dashgo_rl/scripts/geo_nav_node.py`

**ä¿®æ”¹å†…å®¹**ï¼š
```python
# ä¿®æ”¹å‰ï¼š
#!/usr/bin/env python3

# ä¿®æ”¹åï¼š
#!/usr/bin/env python
```

**æ¶æ„å¸ˆä¿®æ­£ç‚¹**ï¼š
- âœ… **å…³é”®ä¿®æ”¹**ï¼šè®©è„šæœ¬ä½¿ç”¨condaç¯å¢ƒçš„Pythonï¼Œè€Œä¸æ˜¯å›ºå®šçš„ç³»ç»ŸPython
- âœ… **è·¨å¹³å°å…¼å®¹**ï¼š`#!/usr/bin/env python`ä¼šè·ŸéšPATHä¸­çš„Python
- âœ… **å·²ç¡®è®¤**ï¼šè¯¥æ–‡ä»¶æ˜¯246ç»´æ¶æ„å¸ˆç‰ˆæœ¬ï¼ˆåŒ…å«ObservationBufferï¼‰

---

## ğŸ“‹ æ–‡ä»¶å¯¹æ¯”ï¼šæ¶æ„å¸ˆä¿®æ­£å‰ vs ä¿®æ­£å

| æ–‡ä»¶ | ä¿®æ­£å‰é—®é¢˜ | æ¶æ„å¸ˆä¿®æ­£ | çŠ¶æ€ |
|------|-----------|-----------|------|
| `connect_to_robot.sh` | IPè·å–å¯èƒ½å¤±è´¥ï¼ˆæŠ“å–è™šæ‹Ÿç½‘å¡ï¼‰ | ä¼˜å…ˆæŠ“å–192.168ï¼Œäº¤äº’å¼ç¡®è®¤ | âœ… å·²ä¿®æ­£ |
| `start_rl.sh` | è¿‡åº¦è®¾è®¡ï¼Œè‡ªåŠ¨æ£€æµ‹ä¸å¯é  | æ‹†åˆ†ä¸ºrun_sim.shå’Œrun_real.sh | âœ… å·²æ›¿æ¢ |
| `real_control.launch` | è·¯å¾„å¯èƒ½è§£æé”™è¯¯ | ä½¿ç”¨$(find)ç›¸å¯¹è·¯å¾„ | âœ… å·²ä¿®æ­£ |
| `sim2real_golden.launch` | ä¾èµ–dashgo_gazeboåŒ… | ä½¿ç”¨gazebo_ros empty_world fallback | âœ… å·²ä¿®æ­£ |
| `geo_nav_node.py` | ä½¿ç”¨#!/usr/bin/env python3 | æ”¹ä¸º#!/usr/bin/env python | âœ… å·²ä¿®æ­£ |

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### åœºæ™¯Aï¼šä»¿çœŸæµ‹è¯•

```bash
# 1. å¯åŠ¨ä»¿çœŸï¼ˆä¸€é”®ï¼‰
cd ~/dashgo_rl_project
./run_sim.sh

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
conda activate dashgo_deploy
source catkin_ws/devel/setup.bash
roslaunch dashgo_rl sim2real_golden.launch
```

**é¢„æœŸæ•ˆæœ**ï¼š
- Gazeboçª—å£æ‰“å¼€
- Rvizè‡ªåŠ¨æ‰“å¼€
- å¯ä»¥é€šè¿‡Rvizå‘é€ç›®æ ‡ç‚¹

---

### åœºæ™¯Bï¼šå®è½¦æ§åˆ¶

```bash
# 1. å¯åŠ¨å®è½¦æ¨¡å¼ï¼ˆä¸€é”®ï¼‰
cd ~/dashgo_rl_project
./run_real.sh 192.168.5.100

# æˆ–è€…åˆ†æ­¥å¯åŠ¨
# Step 1: è¿æ¥æœºå™¨äºº
./connect_to_robot.sh 192.168.5.100

# Step 2: å¯åŠ¨RLèŠ‚ç‚¹
conda activate dashgo_deploy
source catkin_ws/devel/setup.bash
roslaunch dashgo_rl real_control.launch
```

**é¢„æœŸæ•ˆæœ**ï¼š
- ç¬”è®°æœ¬è¿æ¥åˆ°æœºå™¨äººï¼ˆROSå¤šæœºé€šè®¯ï¼‰
- Rvizæ˜¾ç¤ºæœºå™¨äººå®æ—¶çŠ¶æ€
- å¯ä»¥é€šè¿‡Rvizå‘é€ç›®æ ‡ç‚¹ï¼Œå°è½¦å“åº”

---

## âš™ï¸ ç¯å¢ƒå‡†å¤‡ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰

### æ­¥éª¤1ï¼šåˆ›å»ºdashgo_deployç¯å¢ƒ

```bash
# åˆ›å»ºPython 3.8ç¯å¢ƒ
conda create -n dashgo_deploy python=3.8 -y
conda activate dashgo_deploy

# å®‰è£…PyTorchï¼ˆCPUç‰ˆï¼‰
pip install torch==1.10.0 torchvision==0.11.0

# å®‰è£…ROSæ¡¥æ¥åº“
pip install rospkg defusedxml netifaces numpy empy
```

### æ­¥éª¤2ï¼šç¼–è¯‘ROSå·¥ä½œç©ºé—´

```bash
cd ~/dashgo_rl_project/catkin_ws

# æ¸…ç†æ—§ç¼–è¯‘
rm -rf build devel

# æ˜¾å¼æŒ‡å®šPythonè·¯å¾„ç¼–è¯‘
catkin_make -DPYTHON_EXECUTABLE=$(which python)

# åˆ·æ–°ç¯å¢ƒ
source devel/setup.bash
```

### æ­¥éª¤3ï¼šéªŒè¯ç¯å¢ƒ

```bash
# éªŒè¯Pythonå’ŒPyTorch
python -c "import torch; import rospy; print('âœ… ç¯å¢ƒå°±ç»ª')"

# éªŒè¯ROSåŒ…
rospack list | grep dashgo
# åº”è¯¥æ˜¾ç¤ºï¼šdashgo_rl
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•è¿æ¥åˆ°ROS Master

**ç—‡çŠ¶**ï¼š
```bash
rostopic list
# ERROR: Unable to communicate with master!
```

**è§£å†³**ï¼š
1. æ£€æŸ¥ç½‘ç»œï¼š`ping 192.168.5.100`
2. æ£€æŸ¥roscoreï¼š`ssh 192.168.5.100 "ps aux | grep roscore"`
3. æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š`echo $ROS_MASTER_URI`ï¼ˆåº”ä¸ºhttp://192.168.5.100:11311ï¼‰

---

### é—®é¢˜2ï¼šæ¨¡å‹åŠ è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
âŒ æ¨¡å‹åŠ è½½å¤±è´¥: [Errno 2] No such file or directory: 'models/policy_torchscript.pt'
```

**è§£å†³**ï¼š
1. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls -lh catkin_ws/src/dashgo_rl/models/policy_torchscript.pt`
2. å¦‚æœä¸å­˜åœ¨ï¼Œè¿è¡Œå¯¼å‡ºè„šæœ¬ï¼š`~/IsaacLab/isaaclab.sh -p export_torchscript.py`

---

### é—®é¢˜3ï¼šconda activateåœ¨è„šæœ¬ä¸­ä¸å·¥ä½œ

**ç—‡çŠ¶**ï¼š
```
conda activate dashgo_deploy
# command not found: conda
```

**è§£å†³**ï¼š
åœ¨è„šæœ¬ä¸­source conda.shï¼š
```bash
source ~/miniconda3/etc/profile.d/conda.sh  # æˆ–anaconda3
conda activate dashgo_deploy
```

æˆ–è€…æ‰‹åŠ¨æ¿€æ´»ç¯å¢ƒåå†è¿è¡Œè„šæœ¬ã€‚

---

## ğŸ“Š é¡¹ç›®å‚æ•°æ€»ç»“

### DashGo D1 æœºå™¨äººå‚æ•°ï¼ˆæ¥è‡ªdashgo_config.pyï¼‰

| å‚æ•° | å€¼ | æ¥æº |
|------|-----|------|
| **æœ€å¤§çº¿é€Ÿåº¦** | 0.3 m/s | MOTION_CONFIG |
| **æœ€å¤§è§’é€Ÿåº¦** | 1.0 rad/s | MOTION_CONFIG |
| **è½®å­ç›´å¾„** | 0.1264 m | DashGoPhysicalSpecs |
| **è½®è·** | 0.3420 m | DashGoPhysicalSpecs |
| **LiDARå‹å·** | EAI F4 Flash | DashGoLidarSpecs |
| **æ‰«æé¢‘ç‡** | 7 Hz | scan_frequency_default |
| **é›·è¾¾ç‚¹æ•°** | 720 ç‚¹/åœˆ | data_points_per_scan |

### GeoNavPolicy v3.2 ç½‘ç»œå‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| **è¾“å…¥ç»´åº¦** | 246 | 72(LiDAR) Ã— 3å¸§ + 30(å…¶ä»–) |
| **å•å¸§ç»´åº¦** | 82 | 72(LiDAR) + 2(Target) + 3(LinVel) + 3(AngVel) + 2(Action) |
| **å†å²å¸§æ•°** | 3 | ObservationBuffer |
| **è¾“å‡ºç»´åº¦** | 2 | [çº¿é€Ÿåº¦, è§’é€Ÿåº¦] |
| **æ§åˆ¶é¢‘ç‡** | 20 Hz | real_control.launch |

---

## âœ… æ£€æŸ¥æ¸…å•

### ç¯å¢ƒå‡†å¤‡

- [ ] åˆ›å»ºdashgo_deployç¯å¢ƒï¼ˆPython 3.8ï¼‰
- [ ] å®‰è£…PyTorch 1.10.0
- [ ] å®‰è£…ROSæ¡¥æ¥åº“
- [ ] ç¼–è¯‘ROSå·¥ä½œç©ºé—´

### æ–‡ä»¶éªŒè¯

- [ ] `connect_to_robot.sh` å¯æ‰§è¡Œ
- [ ] `run_sim.sh` å¯æ‰§è¡Œ
- [ ] `run_real.sh` å¯æ‰§è¡Œ
- [ ] `real_control.launch` å­˜åœ¨
- [ ] `sim2real_golden.launch` å­˜åœ¨
- [ ] `geo_nav_node.py` shebangå·²ä¿®æ”¹

### åŠŸèƒ½æµ‹è¯•

- [ ] ä»¿çœŸæ¨¡å¼èƒ½å¯åŠ¨
- [ ] å®è½¦æ¨¡å¼èƒ½è¿æ¥
- [ ] æ¨¡å‹èƒ½æ­£ç¡®åŠ è½½
- [ ] Rvizèƒ½æ˜¾ç¤ºæ•°æ®
- [ ] èƒ½å‘é€ç›®æ ‡ç‚¹

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆ**ï¼š`docs/Sim2Realå®Œæ•´éƒ¨ç½²æŒ‡å—_æ¶æ„å¸ˆä¿®æ­£ç‰ˆ_2026-01-28.md`
- **æ¶æ„é…ç½®**ï¼š`dashgo_config.py`
- **ç½‘ç»œå®šä¹‰**ï¼š`geo_nav_policy.py`
- **èŠ‚ç‚¹å®ç°**ï¼š`catkin_ws/src/dashgo_rl/scripts/geo_nav_node.py`

---

**ç»´æŠ¤è€…**ï¼šClaude Code AI Assistantï¼ˆåŸºäºæ¶æ„å¸ˆå®¡æ ¸æ„è§ï¼‰
**ç‰ˆæœ¬**ï¼šv1.0-ç¬”è®°æœ¬æ§åˆ¶ç‰ˆ
**çŠ¶æ€**ï¼šâœ… æ–‡ä»¶å·²åˆ›å»ºï¼Œå¾…æµ‹è¯•
**æœ€åæ›´æ–°**ï¼š2026-01-28
