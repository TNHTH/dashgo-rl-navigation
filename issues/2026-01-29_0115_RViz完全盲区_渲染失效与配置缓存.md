# RViz完全盲区问题 - 渲染失效与配置缓存

> **创建时间**: 2026-01-29 01:15:00
> **严重程度**: 🔴 致命（完全不可见）
> **状态**: ✅ 已修复
> **相关文件**: RViz配置缓存
> **对话来源**: dialogue-002-rviz-blind-diagnosis-physics-clipping.md

---

## 问题描述

### 现象：RViz完全看不见

**症状**:
- ❌ 看不到机器人模型
- ❌ 看不到TF箭头
- ❌ 看不到激光点云
- ❌ 按F键无效
- ❌ 配置修改无效

**特殊情况**: 左侧面板全绿（Status OK）

---

## 根本原因

**诊断**: RViz的"眼睛"（渲染/配置）有问题，而非"视神经"（数据流）

**可能原因**:
1. RViz缓存错误的配置
2. OpenGL渲染问题
3. 模型文件路径解析问题
4. 配置文件损坏

---

## 解决方案：架构师"4步排查法"

### 步骤1：确认Gazebo没被暂停

```
查看Gazebo底部状态栏的Real Time Factor
如果是0.00或时间不动 → 点击"播放三角形"按钮
```

### 步骤2：听诊器检查（数据脉诊）

```bash
# 检查雷达数据流
rostopic hz /scan
# 预期: average rate: 10.0
# 如果no new messages → 雷达插件坏了

# 检查TF变换流
rostopic hz /tf
# 预期: average rate: ~200

# 检查里程计
rostopic echo /odom -n1
# 预期: 输出pose和twist数据
```

**判断决策树**:
```
数据都没 → 核心插件失效 → 修复URDF
数据都有 → RViz渲染/配置问题 → 继续步骤3-4
```

### 步骤3：检查RViz的"时间报错"

```
展开Global Options → 查看Global Status
典型报错: "Message removed because it is too old"
```

### 步骤4：暴力重置RViz

**启动纯净版RViz**:
```bash
rosrun rviz rviz -f base_link
```

**验证步骤**:
1. Add → Axes（出现红绿蓝箭头？）
2. Add → LaserScan（看到红点？）
3. Add → TF（查看坐标系）

---

## 验证方法

### 纯净版RViz测试

```bash
# 强制启动RViz，不加载任何配置
rosrun rviz rviz -f base_link

# 手动添加最小显示项
# - Add → Axes (能看到坐标轴就成功)
# - Add → TF (能看到TF树就成功)
```

**优势**:
- 排除配置文件干扰
- 从零开始验证
- 快速定位问题

---

## 预期结果

- ✅ 能看到坐标轴（红绿蓝箭头）
- ✅ 能看到TF树
- ✅ 能看到激光点云
- ✅ 模型显示正常

---

## 经验教训

### 1. 数据流诊断优先

**架构师的诊断顺序**:
> "只要回答这两个问题，我就能给出最后一击：
> 1. rostopic hz /scan 有数据吗？
> 2. RViz左上角的Global Status具体报什么错？"

**关键点**:
- 先确认数据流健康（rostopic hz）
- 再判断是配置问题还是渲染问题

### 2. 暴力重置的威力

纯净版RViz是最快的诊断工具：
- 排除配置文件干扰
- 从零开始验证
- 快速定位问题

### 3. 功能优先原则

**架构师建议**:
> "只要能看到代表机器人的坐标轴在动，就直接点2D Nav Goal进行测试！不要为了一个皮肤卡在这里。"

**优先级**:
1. 功能第一：TF树打通、控制有效
2. 视觉第二：模型好看是锦上添花
3. 快速迭代：先跑通逻辑，再优化外观

---

## 相关文档

- **完整对话**: `docs/architect-dialogues/dialogue-002-rviz-blind-diagnosis-physics-clipping.md`
- **问题分析**: `docs/architect-dialogues/problem-solution-analysis.md` (P-004)

---

**维护者**: Claude Code AI Assistant (基于Isaac Sim架构师诊断)
