# 雷达点云太小问题 - RViz显示配置优化

> **创建时间**: 2026-01-29 01:25:00
> **严重程度**: 🟢 提示（视觉优化）
> **状态**: ✅ 已修复
> **相关文件**: RViz配置
> **对话来源**: dialogue-002-rviz-blind-diagnosis-physics-clipping.md

---

## 问题描述

### 现象：雷达数据存在但不可见

**症状**:
- /scan数据正常（10Hz）
- RViz中看不到激光点云
- 环境空旷，没有障碍物

**原因**:
- 激光点渲染尺寸太小（默认0.01）
- 数据为inf被RViz过滤
- Decay Time=0，瞬间消失

---

## 根本原因

**诊断**: RViz显示配置不适应环境

**关键问题**:
1. **Size太小**: 默认0.01，在空旷环境看不见
2. **Decay Time=0**: 点云瞬间消失，没有轨迹
3. **Style不当**: Flat Squares不如Points明显

---

## 解决方案：架构师"雷达视觉矫正"

### RViz LaserScan配置

**位置**: RViz左侧面板 > LaserScan

**修改对照表**:

| 参数 | 默认值 | 问题 | 建议值 | 效果 |
|------|--------|------|--------|------|
| **Style** | Flat Squares | 点太小看不见 | Points | 圆点更明显 |
| **Size** | 0.01 | 太小 | 0.1-0.2 | 放大10-20倍 |
| **Decay Time** | 0 | 瞬间消失 | 10 | 形成轨迹 |
| **Alpha** | 1.0 | - | 1.0 | 完全不透明 |
| **Color Transformer** | Intensity | 依赖强度 | FlatColor | 颜色固定 |

### Size选择依据

**环境判断**:
- 小房间（<5m）：Size = 0.05
- 大房间（5-20m）：Size = 0.1
- 大空旷（>20m）：Size = 0.2-0.5

**架构师建议**:
> "在仿真环境很空旷时，如果点太小，你根本看不见。必须改成0.1甚至0.2。"

---

## 验证方法

### RViz可视化检查

- ✅ 能看到一圈红点（或扫描到的墙壁）
- ✅ 点云大小适中（0.1或更大）
- ✅ 点云有轨迹（Decay Time=10的效果）
- ✅ 移动机器人时能看到点云轨迹

---

## 预期结果

- ✅ 点云清晰可见
- ✅ 能看到历史轨迹（10秒余晖）
- ✅ 方便确认数据是否存在
- ✅ 视觉效果良好

---

## 经验教训

### 1. 点云Size要适应环境

**问题**: 不同环境需要不同Size

**解决方案**:
- 根据环境大小调整Size参数
- 空旷环境需要更大的点云

### 2. Decay Time的作用

**设置为0**: 瞬间消失，看不到历史轨迹
**设置为10**: 点停留10秒，形成运动轨迹

**优势**:
- 方便确认数据是否存在
- 能看到机器人运动轨迹
- 便于调试和验证

### 3. 颜色固定更稳定

**Intensity模式**: 依赖激光强度，颜色可能变化
**FlatColor模式**: 颜色固定，更稳定可见

---

## 相关文档

- **完整对话**: `docs/architect-dialogues/dialogue-002-rviz-blind-diagnosis-physics-clipping.md`
- **问题分析**: `docs/architect-dialogues/problem-solution-analysis.md` (P-006)

---

**维护者**: Claude Code AI Assistant (基于Isaac Sim架构师诊断)
