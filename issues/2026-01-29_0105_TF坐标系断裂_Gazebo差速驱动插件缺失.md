# TFåæ ‡ç³»æ–­è£‚é—®é¢˜ - Gazeboå·®é€Ÿé©±åŠ¨æ’ä»¶ç¼ºå¤±

> **åˆ›å»ºæ—¶é—´**: 2026-01-29 01:05:00
> **ä¸¥é‡ç¨‹åº¦**: ğŸ”´ è‡´å‘½ï¼ˆæ— æ³•å®šä½å’Œæ§åˆ¶ï¼‰
> **çŠ¶æ€**: âœ… å·²ä¿®å¤
> **ç›¸å…³æ–‡ä»¶**: dashgo_d1_sim.urdf.xacro
> **å¯¹è¯æ¥æº**: dialogue-001-gazebo-rviz-diagnosis.md

---

## é—®é¢˜æè¿°

### ç°è±¡ï¼šRViz TFæŠ¥é”™

**é”™è¯¯ä¿¡æ¯**:
```
RobotModel Error:
- base_link: "No transform from [base_link] to [odom]"
- laser_link: "No transform from [laser_link] to [odom]"
- left_wheel_link: "No transform from [left_wheel_link] to [odom]"
- right_wheel_link: "No transform from [right_wheel_link] to [odom]"
```

**å½±å“**:
- âŒ æœºå™¨äººæ— æ³•å®šä½ï¼ˆæ²¡æœ‰odomâ†’base_linkå˜æ¢ï¼‰
- âŒ æœºå™¨äººæ— æ³•æ§åˆ¶ï¼ˆTFæ ‘æ–­è£‚ï¼‰
- âŒ å¯¼èˆªå®Œå…¨å¤±æ•ˆ

---

## æ ¹æœ¬åŸå› 

**è¯Šæ–­**: URDFä¸­ç¼ºå°‘Gazeboå·®é€Ÿé©±åŠ¨æ’ä»¶

**åæœ**:
- æ²¡æœ‰èŠ‚ç‚¹å‘å¸ƒodomâ†’base_linkçš„TFå˜æ¢
- robot_state_publisheræ— æ³•å·¥ä½œ
- TFåæ ‡ç³»æ ‘æ–­è£‚

---

## è§£å†³æ–¹æ¡ˆ

### æ·»åŠ Gazeboå·®é€Ÿé©±åŠ¨æ’ä»¶

**æ–‡ä»¶**: `dashgo_d1_sim.urdf.xacro`
**ä½ç½®**: ç¬¬150-171è¡Œ

**ä»£ç **:
```xml
<gazebo>
  <plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
    <updateRate>50</updateRate>
    <leftJoint>left_wheel_joint</leftJoint>
    <rightJoint>right_wheel_joint</rightJoint>
    <wheelSeparation>0.342</wheelSeparation>
    <wheelDiameter>0.1264</wheelDiameter>
    <wheelAcceleration>1.0</wheelAcceleration>
    <wheelTorque>20</wheelTorque>
    <commandTopic>cmd_vel</commandTopic>
    <odometryTopic>odom</odometryTopic>
    <odometryFrame>odom</odometryFrame>
    <robotBaseFrame>base_link</robotBaseFrame>
    <odometrySource>world</odometrySource>
    <publishWheelTF>true</publishWheelTF>
    <publishOdomTF>true</publishOdomTF>
    <publishWheelJointState>true</publishWheelJointState>
    <covariance_x>0.0001</covariance_x>
    <covariance_y>0.0001</covariance_y>
    <covariance_yaw>0.01</covariance_yaw>
  </plugin>
</gazebo>
```

**å…³é”®å‚æ•°**:
- `publishOdomTF`: å¿…é¡»ä¸ºtrueï¼ˆå‘å¸ƒodomâ†’base_link TFï¼‰
- `wheelSeparation`: 0.342mï¼ˆä¸å®ç‰©å‚æ•°å¯¹é½ï¼‰
- `wheelDiameter`: 0.1264mï¼ˆä¸å®ç‰©å‚æ•°å¯¹é½ï¼‰

**åŠŸèƒ½**:
- âœ… å‘å¸ƒodomâ†’base_link TFå˜æ¢
- âœ… è®¢é˜…/cmd_velæ§åˆ¶å‘½ä»¤
- âœ… å‘å¸ƒ/odomé‡Œç¨‹è®¡æ•°æ®

---

## éªŒè¯æ–¹æ³•

### 1. æ£€æŸ¥TFæ ‘

```bash
rosrun tf view_frames
# åº”ç”Ÿæˆframes.pdfï¼Œæ˜¾ç¤ºå®Œæ•´çš„TFæ ‘
```

**é¢„æœŸç»“æ„**:
```
odom (é‡Œç¨‹è®¡åæ ‡ç³»)
  â””â”€ base_link (æœºå™¨äººåŸºåº§)
      â”œâ”€ left_wheel_link (å·¦è½®)
      â”œâ”€ right_wheel_link (å³è½®)
      â””â”€ laser_link (é›·è¾¾)
```

### 2. æ£€æŸ¥TFå˜æ¢

```bash
# ä¸åº”è¯¥æŠ¥é”™
rosrun tf tf_echo odom base_link
# åº”è¯¥è¾“å‡ºå˜æ¢çŸ©é˜µ
```

### 3. åŠ¨æ€éªŒè¯

```bash
# å‘é€æ—‹è½¬æŒ‡ä»¤
rostopic pub -1 /cmd_vel geometry_msgs/Twist '{linear: {x: 0.0}, angular: {z: 0.5}}'

# è§‚å¯ŸRVizä¸­TFç®­å¤´æ˜¯å¦æ—‹è½¬
# åªè¦TFç®­å¤´åœ¨è½¬ = æ§åˆ¶é“¾è·¯æ‰“é€š
```

---

## é¢„æœŸç»“æœ

- âœ… RVizå·¦ä¾§å…¨ç»¿ï¼ˆæ— TFé”™è¯¯ï¼‰
- âœ… èƒ½çœ‹åˆ°æœºå™¨äººåæ ‡ç³»
- âœ… å‘é€cmd_velåæœºå™¨äººèƒ½å“åº”
- âœ… /odomè¯é¢˜æ­£å¸¸å‘å¸ƒ

---

## ç»éªŒæ•™è®­

### 1. URDFå¿…é¡»åŒ…å«Gazeboæ’ä»¶

**æ•™è®­**: ä»…å®šä¹‰å‡ ä½•ä½“æ˜¯ä¸å¤Ÿçš„

å¿…é¡»æ·»åŠ ä»¿çœŸæ’ä»¶æ‰èƒ½ï¼š
- å‘å¸ƒTFå˜æ¢
- è®¢é˜…æ§åˆ¶å‘½ä»¤
- å‘å¸ƒä¼ æ„Ÿå™¨æ•°æ®

### 2. å·®é€Ÿé©±åŠ¨æ’ä»¶æ˜¯æ ¸å¿ƒ

**æ•™è®­**: libgazebo_ros_diff_drive.soæ˜¯ç§»åŠ¨æœºå™¨äººçš„"ç¥ç»ç³»ç»Ÿ"

æ²¡æœ‰å®ƒï¼š
- æ²¡æœ‰TF = æ— æ³•å®šä½
- ä¸è®¢é˜…cmd_vel = æ— æ³•æ§åˆ¶

---

## ç›¸å…³æ–‡æ¡£

- **å®Œæ•´å¯¹è¯**: `docs/architect-dialogues/dialogue-001-gazebo-rviz-diagnosis.md`
- **URDFæ–‡ä»¶**: `catkin_ws/src/dashgo_rl/urdf/dashgo_d1_sim.urdf.xacro`
- **ä¿®å¤è®°å½•**: `issues/2026-01-28_0025_Gazeboä»¿çœŸç¯å¢ƒé—®é¢˜ä¿®å¤.md`

---

**ç»´æŠ¤è€…**: Claude Code AI Assistant (åŸºäºIsaac Simæ¶æ„å¸ˆè¯Šæ–­)
