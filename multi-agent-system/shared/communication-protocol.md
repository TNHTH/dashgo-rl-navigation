# å¤š Agent é€šä¿¡åè®®

## æ•°æ®æµåŠ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Orchestrator                            â”‚
â”‚  (è¯»å–é…ç½®ã€æ„å»ºè®¡åˆ’ã€åè°ƒæ‰§è¡Œã€æ”¶é›†ç»“æœ)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend    â”‚      â”‚   Frontend   â”‚      â”‚    DevOps    â”‚
â”‚    Agent     â”‚â”€â”€â”€â”€â”€â”€â”‚    Agent     â”‚â”€â”€â”€â”€â”€â”€â”‚    Agent     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Shared Data    â”‚
                    â”‚  (types, APIs)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…±äº«èµ„æºç›®å½•

```
project/
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ types/          # å…±äº«ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ api.ts      # API è¯·æ±‚/å“åº”ç±»å‹
â”‚   â”œâ”€â”€ schemas/        # æ•°æ®æ¨¡å‹ Schema
â”‚   â”‚   â””â”€â”€ user.json   # ç”¨æˆ·æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ contracts/      # API å¥‘çº¦
â”‚   â”‚   â””â”€â”€ openapi.yaml
â”‚   â””â”€â”€ config/         # å…±äº«é…ç½®
â”‚       â””â”€â”€ env.template.json
â”œâ”€â”€ backend/
â”œâ”€â”€ frontend/
â””â”€â”€ docs/
```

## Agent é€šä¿¡æ–¹å¼

### 1. æ–‡ä»¶å…±äº«ï¼ˆæ¨èï¼‰

Agent é€šè¿‡è¯»å†™å…±äº«ç›®å½•ä¸­çš„æ–‡ä»¶è¿›è¡Œé€šä¿¡ï¼š

```typescript
// Backend Agent å†™å…¥ API å®šä¹‰
// shared/contracts/backend-api.yaml
openapi: 3.0.0
info:
  title: Backend API
  version: 1.0.0
paths:
  /users:
    get:
      summary: List users
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '../schemas/user.json'
```

```typescript
// Frontend Agent è¯»å–å¹¶ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç 
// ä» shared/contracts/backend-api.yaml ç”Ÿæˆ
export async function getUsers(): Promise<User[]> {
  const response = await fetch('/api/users');
  return response.json();
}
```

### 2. ç»“æ„åŒ–è¾“å‡º

Agent å®Œæˆåè¾“å‡ºç»“æ„åŒ–ç»“æœï¼Œç”± Orchestrator ä¼ é€’ç»™ä¾èµ–æ–¹ï¼š

```yaml
# Backend Agent è¾“å‡º
output:
  apiSpec: "./shared/contracts/backend-api.yaml"
  endpoints:
    - method: GET
      path: /users
      description: è·å–ç”¨æˆ·åˆ—è¡¨
  database:
    schema: "./shared/schemas/database.sql"
```

### 3. æ¶ˆæ¯ä¼ é€’

é€šè¿‡ Orchestrator ä¸­è½¬æ¶ˆæ¯ï¼š

```typescript
// Backend Agent å‘é€æ¶ˆæ¯
{
  from: "backend",
  to: "frontend",
  type: "info",
  payload: {
    message: "API å·²å®Œæˆ",
    apiSpecPath: "./shared/contracts/backend-api.yaml"
  }
}

// Orchestrator ä¼ é€’ç»™ Frontend Agent
// Frontend Agent æ¥æ”¶æ—¶å¯ä»¥è·å– API æ–‡æ¡£è·¯å¾„
```

## ä¾èµ–å…³ç³»å¤„ç†

```yaml
# åœ¨ project.config.yaml ä¸­å®šä¹‰
agents:
  backend:
    dependencies: []           # æ— ä¾èµ–ï¼Œå¯æœ€å…ˆæ‰§è¡Œ
    output:
      - "shared/contracts/*.yaml"

  frontend:
    dependencies: [backend]    # ä¾èµ– Backend
    input:
      - "shared/contracts/*.yaml"  # è¯»å– Backend è¾“å‡º
    output:
      - "src/api/*.ts"

  docs:
    dependencies: [backend, frontend]  # ä¾èµ–ä¸¤è€…
    input:
      - "shared/contracts/*.yaml"
      - "src/**/*.md"
```

## æ‰§è¡Œé¡ºåº

```
ç¬¬ 1 è½®: [backend]              â†’ backend å®Œæˆï¼Œå†™å…¥ API å®šä¹‰
ç¬¬ 2 è½®: [frontend]             â†’ frontend è¯»å– API å®šä¹‰
ç¬¬ 3 è½®: [docs]                 â†’ docs æ”¶é›†æ‰€æœ‰è¾“å‡º
```

## é”™è¯¯å¤„ç†

```yaml
execution:
  on_failure: "continue"  # ç»§ç»­æ‰§è¡Œå…¶ä»– Agent
  # æˆ– "stop"             # åœæ­¢æ‰€æœ‰æ‰§è¡Œ
  # æˆ– "ask"              # è¯¢é—®ç”¨æˆ·å¦‚ä½•å¤„ç†
```

## æœ€ä½³å®è·µ

1. **æ˜ç¡®å®šä¹‰æ¥å£**: åœ¨ `shared/contracts/` ä¸­æ˜ç¡®å®šä¹‰ API å¥‘çº¦
2. **ä½¿ç”¨ç±»å‹å®‰å…¨**: é€šè¿‡ TypeScript ç±»å‹ç¡®ä¿å‰åç«¯ä¸€è‡´
3. **ç‰ˆæœ¬åŒ–**: å¯¹å…±äº«çš„ Schema è¿›è¡Œç‰ˆæœ¬æ§åˆ¶
4. **æ–‡æ¡£å…ˆè¡Œ**: Backend å…ˆè¾“å‡º API æ–‡æ¡£ï¼ŒFrontend å†å¼€å§‹å®ç°
5. **å¢é‡æ›´æ–°**: Agent å¯ä»¥æ›´æ–°å…±äº«æ–‡ä»¶ï¼Œä¸‹æ¸¸ Agent è¯»å–æœ€æ–°ç‰ˆæœ¬

---

## ğŸ”„ Agentåä½œå·¥ä½œæµï¼ˆä¼˜åŒ–ç‰ˆï¼‰

### ä¸Šä¸‹æ–‡ä¼ é€’è§„èŒƒ

#### è¾“å‡ºæ ¼å¼ï¼ˆç»™ä¸‹æ¸¸Agentï¼‰
```yaml
[[AGENT_OUTPUT]]
Agent: [Agentåç§°]
Timestamp: [æ—¶é—´æˆ³]

æ ¸å¿ƒæˆæœ:
  - [æˆæœ1]
  - [æˆæœ2]

è¾“å‡ºæ–‡ä»¶:
  - [æ–‡ä»¶è·¯å¾„1]: [ç”¨é€”è¯´æ˜]
  - [æ–‡ä»¶è·¯å¾„2]: [ç”¨é€”è¯´æ˜]

å†³ç­–è®°å½•:
  - [å†³ç­–1]: [ç†ç”±]
  - [å†³ç­–2]: [ç†ç”±]

æ³¨æ„äº‹é¡¹:
  - [ä¸‹æ¸¸Agentéœ€è¦æ³¨æ„çš„äº‹é¡¹1]
  - [ä¸‹æ¸¸Agentéœ€è¦æ³¨æ„çš„äº‹é¡¹2]

[[AGENT_OUTPUT_END]]
```

#### è¾“å…¥è¯»å–ï¼ˆä»ä¸Šæ¸¸Agentï¼‰
```markdown
## è¯»å–ä¸Šæ¸¸Agentè¾“å‡º

ä¼˜å…ˆçº§é¡ºåºï¼š
1. [[PRODUCT_OUTPUT]] - äº§å“éœ€æ±‚
2. [[ARCHITECTURE_DESIGN]] - æ¶æ„è®¾è®¡
3. [[BACKEND_OUTPUT]] - APIå®šä¹‰

**å¦‚æœæ‰¾ä¸åˆ°å¿…éœ€çš„é”šç‚¹**ï¼š
- åœæ­¢å¹¶æ˜ç¡®è¯´æ˜ç¼ºå°‘ä»€ä¹ˆ
- è¯·æ±‚è¿è¡Œç‰¹å®šçš„Agent
- ä¸è¦çŒœæµ‹æˆ–è‡†é€ 
```

### åä½œæ£€æŸ¥æ¸…å•

æ¯ä¸ªAgentåœ¨å¼€å§‹å·¥ä½œå‰ç¡®è®¤ï¼š
- [ ] æˆ‘æ˜¯å¦è¯»å–äº†ä¸Šæ¸¸Agentçš„è¾“å‡ºï¼Ÿ
- [ ] æˆ‘æ˜¯å¦ç†è§£äº†ä¾èµ–å…³ç³»ï¼Ÿ
- [ ] æˆ‘æ˜¯å¦æä¾›äº†æ¸…æ™°çš„è¾“å‡ºæ ¼å¼ï¼Ÿ
- [ ] æˆ‘çš„è¾“å‡ºæ˜¯å¦ä¾¿äºä¸‹æ¸¸Agentä½¿ç”¨ï¼Ÿ

### é”™è¯¯å¤„ç†æµç¨‹

```yaml
åœºæ™¯1: ç¼ºå°‘ä¸Šæ¸¸è¾“å‡º
  â†’ æ˜ç¡®è¯´æ˜ç¼ºå°‘å“ªä¸ªé”šç‚¹
  â†’ è¯·æ±‚è¿è¡Œç‰¹å®šAgent
  â†’ ç­‰å¾…ä¸Šæ¸¸Agentå®Œæˆ

åœºæ™¯2: è¾“å‡ºæ ¼å¼ä¸åŒ¹é…
  â†’ å°è¯•ç†è§£å¹¶é€‚é…
  â†’ è®°å½•æ ¼å¼å·®å¼‚
  â†’ æ›´æ–°è¾“å‡ºè§„èŒƒ

åœºæ™¯3: ä¾èµ–å†²çª
  â†’ æ˜ç¡®è¯´æ˜å†²çªç‚¹
  â†’ æä¾›è§£å†³æ–¹æ¡ˆé€‰é¡¹
  â†’ ç­‰å¾…ç”¨æˆ·å†³ç­–
```

---

## ğŸ“Š æ”¹è¿›å»ºè®®æ€»ç»“

### å·²å®ç°çš„æ”¹è¿›

1. **âœ… å·¥å…·ä½¿ç”¨æŒ‡å—**
   - `shared/tool-guidelines.md` - è¯¦ç»†çš„MCPå·¥å…·ä½¿ç”¨è§„èŒƒ
   - æ¯ä¸ªå·¥å…·éƒ½æœ‰"ä½•æ—¶ç”¨"ã€"ä½•æ—¶ä¸ç”¨çš„æŒ‡å¯¼

2. **âœ… ä»»åŠ¡ç®¡ç†è§„èŒƒ**
   - `shared/task-management.md` - TodoWriteä½¿ç”¨è§„èŒƒ
   - æ˜ç¡®ä½•æ—¶ä½¿ç”¨ã€ä½•æ—¶ä¸ä½¿ç”¨

3. **âœ… å·¥ä½œåŸåˆ™**
   - `shared/agent-work-principles.md` - ä¸»åŠ¨æ€§å’Œå½»åº•æ€§åŸåˆ™
   - æ‰€æœ‰Agentéƒ½å¼•ç”¨æ­¤æ–‡ä»¶

4. **âœ… åä½œæœºåˆ¶**
   - è¾“å‡ºæ ¼å¼æ ‡å‡†åŒ–ï¼ˆé”šç‚¹æ ¼å¼ï¼‰
   - è¾“å…¥è¯»å–æµç¨‹åŒ–
   - é”™è¯¯å¤„ç†è§„èŒƒåŒ–

5. **âœ… æ–°å¢Skills**
   - `mcp-builder` - MCPæœåŠ¡å™¨æ„å»ºå·¥å…·
   - `skill-creator` - æŠ€èƒ½åˆ›å»ºæŒ‡å—
   - `webapp-testing` - Webåº”ç”¨æµ‹è¯•
   - `changelog-generator` - å˜æ›´æ—¥å¿—ç”Ÿæˆ

### å‚è€ƒæ¥æº

**åŸºäºä»¥ä¸‹é¡¹ç›®æ”¹è¿›**ï¼š
- Cursor Agent Prompt 2.0 (38KBè¯¦ç»†æç¤ºè¯)
- Awesome Claude Skills (ComposioHQ)
- ä½ çš„multi-agent-systemåŸæœ‰ä¼˜åŠ¿

**ç»“åˆä¸¤è€…ä¼˜åŠ¿** = æ›´å¼ºå¤§çš„Agentç³»ç»Ÿï¼
