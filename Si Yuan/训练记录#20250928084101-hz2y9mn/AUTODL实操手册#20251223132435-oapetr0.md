# Dashgo 导航项目 - AUTODL 极速上手实操手册 (V2.5)

欢迎来到云端驾驶舱。本手册将指导您在浏览器中完成所有操作，无需复杂的 SSH 配置。

## 第一阶段：进入指挥中心 (JupyterLab)

1. **进入控制台**：在 AUTODL 网页的“容器实例”列表中，找到您刚租用的机器。
2. **点击登录**：点击最右侧的  **“JupyterLab”**  按钮。

   * *架构师注：这会弹出一个新网页，这就是您的云端桌面。*

## 第二阶段：初始化环境 (在“终端”中操作)

您需要一个地方输入指令。

1. **打开终端 (Terminal)** ：

   * 在 JupyterLab 的启动页（Launcher）中，找到  **"Terminal"**  图标（通常是一个黑色的方块图标），点击它。
   * 或者：点击顶部菜单栏 `File` -\> `New` -\> `Terminal`。
   * *现在您应该看到一个黑底白字的界面，光标在闪烁。这里就是“输入代码”的地方。*
2. **输入学术加速指令 (必做)** ：

   * 复制下方代码，在终端中按下 `Ctrl+Shift+V` 粘贴（或者右键粘贴），然后回车：

   ```
   source /etc/network_turbo
   ```

   * *看到没有任何报错提示，或者提示加速成功，即表示网络已通畅。*
3. **[关键新增] 安装系统底层依赖**：

   * Isaac Sim 需要一些图形库才能在云端运行。请务必执行以下命令，否则会报 `libSM.so.6` 或 `Vulkan` 错误：

   ```
   apt-get update
   apt-get install -y libsm6 libxext6 libxtst6 libxrender1 libgl1-mesa-glx libglu1-mesa libxt6 libxcursor1 libxinerama1 libxi6 libxrandr2
   ```
4. **建立工作区 (核心步骤)** ：

   *  **[重点]**  我们必须切换到 **数据盘**。在终端输入（使用了 -p 参数，如果已存在不会报错）：

   ```
   cd /root/autodl-tmp
   mkdir -p workspace
   cd workspace
   ```

## 第三阶段：安装 Isaac Lab (最稳妥的方案)

为了避免脚本安装失败，我们采用**混合安装法**：手动下载 Isaac Sim 包，脚本安装 Isaac Lab。

### 1. 克隆代码库

```
git clone [https://github.com/isaac-sim/IsaacLab.git](https://github.com/isaac-sim/IsaacLab.git)
cd IsaacLab
# 锁定版本
git checkout 2d80bd865b6d38f2d9956d77ffa9e291399b763e
```

### 2. 初始化 Conda 环境

```
conda init bash
source ~/.bashrc
conda create -n isaaclab python=3.10 -y
conda activate isaaclab
```

### 3. [关键] 强制安装 Isaac Sim (Plan B)

如果脚本安装失败，请直接执行此命令从 NVIDIA 服务器拉取：

```
# 这一步会下载约 10GB 数据，请耐心等待
# 必须先开启学术加速 (source /etc/network_turbo)
pip install isaacsim-rl --extra-index-url [https://pypi.nvidia.com](https://pypi.nvidia.com)
```

### 4. 安装 Isaac Lab 及其依赖

```
# 安装 Isaac Lab 本体 (editable 模式)
pip install -e .
# 安装依赖
pip install -e source/isaaclab_assets
pip install -e source/isaaclab_rl
pip install -e source/isaaclab_tasks
```

## 第四阶段：上传您的项目代码

1. **定位文件夹**：在 JupyterLab 左侧进入 `/autodl-tmp/workspace/IsaacLab`。
2. **新建文件夹**：右键 -\> New Folder，命名为 `dashgo_project`。
3. **上传文件**：将本地的 `dashgo_env_v2.py`, `train_v2.py`, `dashgo.urdf`, `dashgo_assets.py`, `train_cfg_v2.yaml`, `play.py` 拖拽进去。

### [必做] 安装 RSL-RL 库

```
cd /root/autodl-tmp/workspace
git clone [https://github.com/leggedrobotics/rsl_rl.git](https://github.com/leggedrobotics/rsl_rl.git)
cd rsl_rl
pip install -e .
```

## 第五阶段：点火发射 (开始训练)

一切准备就绪。由于我们是 PIP 安装，不需要用 `isaaclab.sh` 启动，**直接用 python**。

1. **进入项目目录**：

   ```
   cd /root/autodl-tmp/workspace/IsaacLab/dashgo_project
   ```
2. **运行训练指令**：

   ```
   # 设置 Vulkan 驱动路径 (防止图形报错)
   export VK_ICD_FILENAMES=/usr/share/vulkan/icd.d/nvidia_icd.json

   # 启动训练
   python train_v2.py --headless --num_envs 4096 --video
   ```

**成功标志**： 如果屏幕开始疯狂滚动类似 `Step: 50, Reward: -1.2` 的日志，恭喜您！您的机器人正在云端疯狂进化。

## 常见问题排查 (FAQ)

**Q: 报错** **​`libSM.so.6: cannot open shared object file`​**​**A:**  说明缺少系统图形库。请执行：

```
apt-get update
apt-get install -y libsm6 libxt6 libglu1-mesa
```

**Q: 报错** **​`ModuleNotFoundError: No module named 'isaacsim'`​**​**A:**  说明 pip 安装未完成。请重试 `pip install isaacsim-rl --extra-index-url https://pypi.nvidia.com`。

**Q: 报错** **​`ModuleNotFoundError: No module named 'rsl_rl'`​**​**A:**  说明您跳过了第四阶段的 RSL-RL 安装。

**Q: 训练卡在** **​`Compiling...`​**  **很久A:**  第一次运行需要编译着色器和物理引擎，可能需要 5-10 分钟，请耐心等待。

## 附录 A：如何看效果？

1. **看曲线 (TensorBoard)** ：

   * 在 AUTODL 网页，点击实例的  **“更多”**  -\>  **“TensorBoard”** 。
   * 日志目录填写：`/root/autodl-tmp/workspace/IsaacLab/dashgo_project/logs`
2. **看视频**：

   * 在 JupyterLab 左侧找到 `logs` -\> `dashgo_nav` -\> `videos` 文件夹，下载 `.mp4` 文件观看。
