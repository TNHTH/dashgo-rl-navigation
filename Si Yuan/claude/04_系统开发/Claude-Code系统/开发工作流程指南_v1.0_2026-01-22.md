# Claude Code 开发工作流程指南

> **版本**: v1.0
> **创建时间**: 2026-01-22 17:45:00
> **适用场景**: 复杂项目开发、完整软件生命周期

---

## 一、工作流程总览

### 1.1 完整流程图

```
开发流程：

┌─────────────┐
│ Product     │ → 需求分析、PRD、用户故事
└──────┬──────┘
       ↓
┌─────────────┐
│ Architect   │ → 架构设计、技术选型、API设计
└──────┬──────┘
       ↓
┌─────────────┬──────────────┐
│ Frontend    │ → 前端开发    │ Backend     │ → 后端开发
│ (React/Vue)  │               │ (Node/Python)│
└──────┬──────┴──────────────┘
       ↓
┌─────────────┐
│ Code-Reviewer│ → 代码审查、安全检查、性能优化
└──────┬──────┘
       ↓
┌─────────────┐
│ Docs        │ → API文档、使用手册、部署指南
└──────┬──────┘
       ↓
┌─────────────┐
│ DevOps      │ → 部署脚本、CI/CD、环境配置
└─────────────┘
       ↓
    完成 ✓
```

### 1.2 核心原则

1. **顺序执行**：按 Product → Architect → Dev → Reviewer → Docs → DevOps 顺序
2. **灵活并行**：Frontend 和 Backend 可以并行开发
3. **必经关卡**：Code-Reviewer 审查是强制环节，不能跳过
4. **文档同步**：Docs 应该与代码同步进行，不要最后才补

---

## 二、7个Agent详细工作流

### 2.1 Product Agent（产品经理）

#### 职责
- 需求分析
- PRD撰写
- 用户故事编写
- 功能定义

#### 输入
- 项目概述、核心功能、目标用户

#### 输出
- `requirements.md` - 需求文档
- `user-stories.md` - 用户故事
- `acceptance-criteria.md` - 验收标准

#### 完成标志
- ✅ 需求清晰、可量化
- ✅ 用户故事完整
- ✅ 验收标准明确

#### 下一阶段：Architect Agent
**触发词**：
- "architect开始"
- "进入架构设计"
- "开始架构"

---

### 2.2 Architect Agent（架构师）

#### 职责
- 技术选型
- 系统架构设计
- API设计
- 数据库设计

#### 输入
- 需求文档（Product输出）

#### 输出
- `tech-stack.md` - 技术栈选型
- `system-design.md` - 系统设计
- `api-contract.md` - API契约
- `database-schema.md` - 数据库模式

#### 完成标志
- ✅ 技术方案合理
- ✅ 架构可扩展
- ✅ API契约清晰

#### 下一阶段：Frontend/Backend Agent
**触发词**：
- "backend开始"
- "frontend开始"
- "开始开发"

---

### 2.3 Frontend Agent（前端开发）

#### 职责
- UI/UX 实现
- 组件开发
- 前端逻辑

#### 输入
- 架构设计（Architect输出）
- API契约（Architect输出）

#### 输出
- `frontend-code/` - 前端代码
- `component-catalog.md` - 组件目录
- `component-tests/` - 组件测试

#### 完成标志
- ✅ 功能正常
- ✅ 代码可维护
- ✅ 组件可复用

#### 下一阶段：Code-Reviewer Agent
**触发词**：
- "review"
- "检查代码"
- "审查"

---

### 2.4 Backend Agent（后端开发）

#### 职责
- API 实现
- 数据库操作
- 业务逻辑

#### 输入
- 架构设计（Architect输出）
- API契约（Architect输出）

#### 输出
- `backend-code/` - 后端代码
- `api-implementation.md` - API实现说明
- `test-suites/` - 测试套件

#### 完成标志
- ✅ API 功能完整
- ✅ 测试覆盖率≥80%
- ✅ 代码规范

#### 下一阶段：Code-Reviewer Agent
**触发词**：
- "review"
- "检查代码"
- "审查"

---

### 2.5 Code-Reviewer Agent（代码审查）

#### 职责
- 代码质量审查
- **安全漏洞检测**（SQL注入、XSS等）
- **性能优化建议**（N+1查询、缓存策略）
- QA验证
- 集成检查

#### 输入
- 前端代码（Frontend输出）
- 后端代码（Backend输出）

#### 输出
- `code-review-report.md` - 审查报告
- `security-audit.md` - 安全审计报告
- `optimization-suggestions.md` - 优化建议

#### 完成标志
- ✅ 无严重安全漏洞
- ✅ 无严重性能问题
- ✅ 代码质量达标

#### 下一阶段：Docs Agent
**触发词**：
- "docs开始"
- "写文档"
- "生成文档"

---

### 2.6 Docs Agent（文档编写）

#### 职责
- API文档
- 使用手册
- 部署指南

#### 输入
- 代码（Frontend/Backend输出）
- API契约（Architect输出）
- 审查报告（Code-Reviewer输出）

#### 输出
- `README.md` - 项目总览
- `API.md` - API文档
- `deployment-guide.md` - 部署指南

#### 完成标志
- ✅ 文档完整
- ✅ 可读性强
- ✅ 使用说明清晰

#### 下一阶段：DevOps Agent
**触发词**：
- "deploy开始"
- "部署"
- "上线"

---

### 2.7 DevOps Agent（部署运维）

#### 职责
- 部署脚本
- CI/CD配置
- 环境配置

#### 输入
- 代码（Frontend/Backend输出）
- 部署指南（Docs输出）

#### 输出
- `Dockerfile` - 容器化配置
- `docker-compose.yml` - 编排配置
- `.github/workflows/` - CI/CD配置
- deployment scripts - 部署脚本

#### 完成标志
- ✅ 可一键部署
- ✅ CI/CD配置完成
- ✅ 可回滚

#### 完成提醒
✅ **部署上线完成**。项目开发流程结束！

**后续建议**：运行测试验证功能是否正常

---

## 三、阶段转换触发词完整列表

### 快速参考表

| 当前阶段 | 下一阶段 | 触发词 |
|---------|---------|--------|
| **项目开始** | Product | "新建项目"、"创建app"、"/start" |
| **Product完成** | Architect | "architect开始"、"进入架构设计" |
| **Architect完成** | Frontend | "frontend开始"、"开始前端" |
| **Architect完成** | Backend | "backend开始"、"开始后端" |
| **Frontend完成** | Reviewer | "review"、"检查代码"、"审查" |
| **Backend完成** | Reviewer | "review"、"检查代码"、"审查" |
| **Reviewer完成** | Docs | "docs开始"、"写文档"、"生成文档" |
| **Docs完成** | DevOps | "deploy开始"、"部署"、"上线" |
| **DevOps完成** | 结束 | "完成"、"结束" |

### 自动化提示

每个Agent完成任务后会自动提醒：
```
✅ **[当前阶段]完成**。下一阶段：**[下一Agent名称]**

**触发方式**：用户说 "[触发词]"
```

---

## 四、使用示例

### 示例1：完整项目开发

```
用户：我要做一个贪吃蛇游戏

AI：检测到"新建项目" → 触发 Trigger 1
    → 加载 instructions.md
    → 切换到 Product Agent

Product Agent：
✅ 分析完成！贪吃蛇游戏需求：
- 核心功能：蛇移动、食物生成、碰撞检测
- 技术栈：HTML5 Canvas + JavaScript

下一步提醒：
✅ **需求分析完成**。下一阶段：**架构设计**（Architect Agent）
触发方式：用户说 "architect开始" / "进入架构设计"

用户：architect开始

AI：切换到 Architect Agent
    → 设计架构、选择技术栈

Architect Agent：
✅ 架构设计完成！
- 技术栈：Vanilla JS + HTML5 Canvas
- 架构：MVC模式

下一步提醒：
✅ **架构设计完成**。下一阶段：**开发实现**（Frontend/Backend Agent）
触发方式：用户说 "backend开始" / "frontend开始"

用户：frontend开始

AI：切换到 Frontend Agent
    → 开发前端代码

Frontend Agent：
✅ 前端开发完成！
- 实现了游戏主循环
- Canvas渲染完成

下一步提醒：
✅ **前端开发完成**。下一阶段：**代码审查**（Code-Reviewer Agent）
触发方式：用户说 "review" / "检查代码"

用户：review

AI：切换到 Code-Reviewer Agent
    → 三阶段审查（安全+性能+质量）

Code-Reviewer Agent：
✅ 代码审查完成！
- 安全：无漏洞
- 性能：建议使用requestAnimationFrame
- 质量：代码清晰

下一步提醒：
✅ **代码审查完成**。下一阶段：**文档编写**（Docs Agent）
触发方式：用户说 "docs开始" / "写文档"

用户：docs开始

AI：切换到 Docs Agent
    → 生成文档

Docs Agent：
✅ 文档编写完成！
- README.md
- API文档

下一步提醒：
✅ **文档编写完成**。下一阶段：**部署上线**（DevOps Agent）
触发方式：用户说 "deploy开始" / "部署"

用户：deploy开始

AI：切换到 DevOps Agent
    → 生成部署配置

DevOps Agent：
✅ 部署上线完成！
- Dockerfile
- docker-compose.yml

完成提醒：
✅ **部署上线完成**。项目开发流程结束！
```

---

### 示例2：灵活执行（跳过某些阶段）

```
用户：我直接写完代码了，帮我review一下

AI：检测到 "review" → 触发 Code-Review Agent
    → 执行代码审查

Code-Reviewer Agent：
✅ 代码审查完成！
- 安全：发现SQL注入漏洞🔴
- 性能：N+1查询问题
- 质量：变量命名不清晰

下一步提醒：
✅ **代码审查完成**。下一阶段：**文档编写**（Docs Agent）
触发方式：用户说 "docs开始" / "写文档"
```

---

## 五、重要提醒

### 5.1 必经关卡

```
Product → Architect → Dev → Reviewer → Docs → DevOps
                      ↑
                   必须经过！
                   不能跳过！
```

**原因**：
- Reviewer 负责安全审查，跳过可能导致漏洞
- Reviewer 负责性能优化，跳过可能导致瓶颈

### 5.2 并行开发

```
Architect完成后：
  ├─ Frontend ─┐
  │            │
  └─ Backend ─┘
        ↓
    Reviewer
```

**说明**：Frontend 和 Backend 可以并行开发，但都必须经过 Reviewer 审查

### 5.3 文档同步

**推荐做法**：
- 代码开发时同步写文档
- 不要等到最后才补文档

**原因**：
- 代码完成后，记忆已经模糊
- 文档质量会下降

---

## 六、常见问题

### Q1: 可以跳过某个阶段吗？

**A**: 部分可以：
- ✅ 可以跳过 Docs（如果不需要文档）
- ❌ 不能跳过 Reviewer（安全审查必须）
- ❌ 不能跳过 Architect（架构设计很重要）

### Q2: 可以从中间阶段开始吗？

**A**: 可以，但需要确保前置阶段已完成：
```
如果已有代码 → 直接 Code-Reviewer
如果已有部署 → 直接 DevOps
```

### Q3: 阶段转换需要手动触发吗？

**A**: 是的，需要用户说触发词：
```
"review" → Code-Reviewer
"docs开始" → Docs Agent
```

**原因**：给予用户控制权，避免自动执行

---

## 七、快速参考

### 7.1 启动新项目
```
任意一个命令：
- "我要做一个XXX项目"
- "/start"
- "新建项目"
```

### 7.2 代码审查
```
任意一个命令：
- "review"
- "检查代码"
- "有漏洞吗"
- "性能优化"
```

### 7.3 生成文档
```
任意一个命令：
- "写文档"
- "生成文档"
- "docs开始"
```

### 7.4 部署上线
```
任意一个命令：
- "部署"
- "deploy开始"
- "上线"
```

---

**文档维护**: 当工作流程发生变更时更新此文档

**相关文档**:
- `系统架构设计_v1.0_2026-01-22.md` - 系统架构说明
- `../agents/*.prompt.md` - 各Agent详细定义
