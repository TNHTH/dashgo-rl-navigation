# Dialogue Optimizer è‡ªåŠ¨æ›´æ–°è§„åˆ™æœºåˆ¶ - è®¾è®¡æ–¹æ¡ˆæŠ¥å‘Š

**ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¥æœŸ**: 2026-01-16
**ä½œè€…**: Claude Code AI Assistant
**çŠ¶æ€**: å¾…å®¡æ ¸

---

## ğŸ“‹ ç›®å½•

1. [èƒŒæ™¯ä¸é—®é¢˜](#èƒŒæ™¯ä¸é—®é¢˜)
2. [è§£å†³æ–¹æ¡ˆè®¾è®¡](#è§£å†³æ–¹æ¡ˆè®¾è®¡)
3. [æŠ€æœ¯å®ç°ç»†èŠ‚](#æŠ€æœ¯å®ç°ç»†èŠ‚)
4. [ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆ](#ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆ)
5. [å®é™…æ•ˆæœç¤ºä¾‹](#å®é™…æ•ˆæœç¤ºä¾‹)
6. [é£é™©ä¸æ³¨æ„äº‹é¡¹](#é£é™©ä¸æ³¨æ„äº‹é¡¹)
7. [å®æ–½è®¡åˆ’](#å®æ–½è®¡åˆ’)
8. [é™„å½•](#é™„å½•)

---

## èƒŒæ™¯ä¸é—®é¢˜

### å½“å‰Dialogue Optimizerçš„çŠ¶æ€

**ç°æœ‰åŠŸèƒ½** (v1.0):
- âœ… è‡ªåŠ¨è¯„ä¼°æ¯æ¬¡å¯¹è¯çš„æ•ˆç‡å’Œè´¨é‡
- âœ… ç”Ÿæˆä¼˜åŒ–å»ºè®®å’Œæ”¹è¿›æªæ–½
- âœ… è®°å½•ä¼˜åŒ–å†å²
- âœ… æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- âœ… æ£€æŸ¥è§„åˆ™æ–‡æ¡£

**å‘ç°çš„é—®é¢˜**:

1. **ä¼˜åŒ–å»ºè®®æ— æ³•è‡ªåŠ¨åº”ç”¨**
   - è™½ç„¶ç”Ÿæˆäº†æ”¹è¿›å»ºè®®ï¼Œä½†ä¸ä¼šè‡ªåŠ¨æ›´æ–°åˆ°è§„åˆ™æ–‡ä»¶
   - ä¸‹æ¬¡å¯¹è¯å¯èƒ½çŠ¯åŒæ ·çš„é”™è¯¯
   - éœ€è¦äººå·¥æ‰‹åŠ¨å°†å»ºè®®è½¬æ¢ä¸ºè§„åˆ™

2. **è§„åˆ™æ›´æ–°ä¾èµ–äººå·¥**
   - å³ä½¿è¿ç»­å¤šæ¬¡å‡ºç°ç›¸åŒé—®é¢˜ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨å‡çº§ä¸ºè§„åˆ™
   - ç”¨æˆ·å¿…é¡»æ˜ç¡®è¦æ±‚æ‰ä¼šæ›´æ–°è§„åˆ™æ–‡ä»¶
   - æ•ˆç‡ä½ä¸‹ï¼Œå®¹æ˜“é—æ¼

3. **ä¼˜åŒ–å»ºè®®çš„åˆ†ç±»ä¸æ¸…æ™°**
   - æ²¡æœ‰æ˜ç¡®åŒºåˆ†"æ“ä½œæµç¨‹"å’Œ"è¡Œä¸ºè§„èŒƒ"
   - ä¸çŸ¥é“åº”è¯¥æ›´æ–° `instructions.md` è¿˜æ˜¯ `rules/*.md`
   - å®¹æ˜“æ··æ·†ä¸åŒç±»å‹çš„è§„åˆ™

4. **ç¼ºä¹æŒç»­æ”¹è¿›çš„é—­ç¯**
   - è¯„ä¼° â†’ å»ºè®® â†’ (æ–­å±‚) â†’ åº”ç”¨
   - å»ºè®® åˆ°åº”ç”¨ ä¹‹é—´ç¼ºå°‘è‡ªåŠ¨åŒ–æœºåˆ¶

### ç”¨æˆ·çš„å®é™…éœ€æ±‚

æ ¹æ®å¯¹è¯å†å²å’Œè§„åˆ™æ–‡æ¡£åˆ†æï¼š

**éœ€æ±‚1**: è‡ªåŠ¨åŒ–è§„åˆ™æ›´æ–°
```
"å¯¹è¯ä¼˜åŒ–è¯„ä¼°ä¸­è¯†åˆ«çš„æ”¹è¿›æªæ–½ï¼Œåº”è¯¥è‡ªåŠ¨æ›´æ–°åˆ°å¯¹åº”çš„è§„åˆ™æ–‡ä»¶ä¸­"
- æ¥æº: dialogue-review-and-auto-update.md
- æœŸæœ›: æ— éœ€äººå·¥å¹²é¢„ï¼Œè‡ªåŠ¨åº”ç”¨ä¼˜åŒ–å»ºè®®
```

**éœ€æ±‚2**: æ™ºèƒ½åˆ†ç±»è§„åˆ™
```
"æ ¹æ®è§„åˆ™çš„å®é™…ä½œç”¨ï¼Œå†³å®šæ›´æ–°instructions.mdè¿˜æ˜¯rules/*.md"
- æ¥æº: ç”¨æˆ·åé¦ˆ
- æœŸæœ›: è‡ªåŠ¨åˆ¤æ–­è§„åˆ™ç±»å‹ï¼Œé€‰æ‹©æ­£ç¡®çš„æ–‡ä»¶
```

**éœ€æ±‚3**: é¿å…è§„åˆ™è†¨èƒ€
```
"ä¸æ˜¯æ‰€æœ‰å»ºè®®éƒ½åº”è¯¥å†™å…¥æ–‡ä»¶ï¼Œéœ€è¦è¿‡æ»¤æœºåˆ¶"
- æ¥æº: ç”¨æˆ·çš„æ‹…å¿§
- æœŸæœ›: åªå°†åå¤å‡ºç°æˆ–é‡è¦çš„å»ºè®®å‡çº§ä¸ºè§„åˆ™
```

---

## è§£å†³æ–¹æ¡ˆè®¾è®¡

### æ ¸å¿ƒæœºåˆ¶ï¼šä¸‰å±‚è¿‡æ»¤ + è‡ªåŠ¨åˆ†ç±»è·¯ç”±

```
å¯¹è¯ç»“æŸ
    â†“
Dialogue Optimizer è¯„ä¼°
    â†“
ç”Ÿæˆä¼˜åŒ–å»ºè®®
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Level 1: ç¬æ—¶è¿‡æ»¤         â”‚
â”‚   ç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼Ÿ            â”‚ â†’ YES â†’ ç«‹å³å†™å…¥
â”‚   Level 2: é¢‘ç‡è¿‡æ»¤         â”‚
â”‚   åŒç±»é—®é¢˜â‰¥3æ¬¡ï¼Ÿ            â”‚ â†’ YES â†’ å‡çº§ä¸ºè§„åˆ™
â”‚   Level 3: é€šç”¨æ€§è¿‡æ»¤       â”‚
â”‚   è·¨å¯¹è¯é€‚ç”¨ï¼Ÿ              â”‚ â†’ YES â†’ å‡çº§ä¸ºè§„åˆ™
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ NO
åªè®°å½•åˆ°æ—¥å¿—
    â†“ YES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è‡ªåŠ¨åˆ†ç±»è·¯ç”±              â”‚
â”‚   æ“ä½œæµç¨‹ï¼Ÿ â†’ instructions.md  â”‚
â”‚   è¡Œä¸ºè§„èŒƒï¼Ÿ â†’ rules/*.md    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
æ›´æ–°å¯¹åº”æ–‡ä»¶
    â†“
ä¸‹æ¬¡å¯¹è¯è‡ªåŠ¨åº”ç”¨
```

### ä¸‰å±‚è¿‡æ»¤ç³»ç»Ÿè¯¦è§£

#### Level 1: ç¬æ—¶è¿‡æ»¤ï¼ˆç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼‰

**è§¦å‘æ¡ä»¶**:
- ç”¨æˆ·åœ¨å¯¹è¯ä¸­æ˜ç¡®è¯´"ä»¥åéƒ½è¦..."
- ç”¨æˆ·æ˜ç¡®è¯´"è®°ä½è¿™ä¸ªè§„åˆ™..."
- ç”¨æˆ·åœ¨åé¦ˆä¸­å¼ºè°ƒæŸä¸ªé—®é¢˜

**ç¤ºä¾‹**:
```markdown
ç”¨æˆ·: "è¿™æ¬¡è¡¨æ ¼å¤ªå¤šäº†ï¼Œ**ä»¥åéƒ½ç”¨è¦ç‚¹åˆ—è¡¨**"
â†“ åˆ¤å®š
è§„åˆ™ç±»å‹: è¡Œä¸ºè§„èŒƒ
ä¼˜å…ˆçº§: ç«‹å³å†™å…¥
ç›®æ ‡æ–‡ä»¶: rules/dialogue-communication-rules.md
```

**å†™å…¥æ ¼å¼**:
```markdown
### ä¼˜å…ˆä½¿ç”¨è¦ç‚¹åˆ—è¡¨ï¼ˆ2026-01-16ï¼‰
- **æ¥æº**: ç”¨æˆ·æ˜ç¡®è¦æ±‚
- **åŸå› **: è¡¨æ ¼ä½¿ç”¨è¿‡å¤šå¯¼è‡´tokenæ•ˆç‡ä½
- **é€‚ç”¨**: å¤šé€‰é¡¹ã€å¤šæ­¥éª¤ã€å¤šè¦ç‚¹åœºæ™¯
- **ç”Ÿæ•ˆ**: ç«‹å³
```

#### Level 2: é¢‘ç‡è¿‡æ»¤ï¼ˆåå¤å‡ºç°çš„é—®é¢˜ï¼‰

**è§¦å‘æ¡ä»¶**:
- åŒç±»é—®é¢˜åœ¨æœ€è¿‘Næ¬¡å¯¹è¯ä¸­å‡ºç°â‰¥3æ¬¡
- é—®é¢˜æ¨¡å¼åŒ¹é…åº¦â‰¥80%
- æ—¶é—´è·¨åº¦â‰¤7å¤©

**ç»Ÿè®¡æœºåˆ¶**:
```python
# ä¼ªä»£ç 
issue_tracking = {
    "tool_no_fallback": {
        "count": 5,              # å‡ºç°æ¬¡æ•°
        "first_seen": "2026-01-10",
        "last_seen": "2026-01-16",
        "occurrences": [
            {"date": "2026-01-10", "dialogue": "..."},
            {"date": "2026-01-12", "dialogue": "..."},
            {"date": "2026-01-14", "dialogue": "..."},
            {"date": "2026-01-15", "dialogue": "..."},
            {"date": "2026-01-16", "dialogue": "..."}
        ]
    }
}

if count >= 3:
    upgrade_to_rule()
```

**å‡çº§ç¤ºä¾‹**:
```markdown
é—®é¢˜: ç½‘é¡µæœç´¢å¤±è´¥åæ²¡æœ‰ä½¿ç”¨fallbackæœºåˆ¶
å‡ºç°æ¬¡æ•°: 5æ¬¡ï¼ˆæœ€è¿‘7å¤©ï¼‰
â†“ åˆ¤å®š
è§„åˆ™ç±»å‹: æ“ä½œæµç¨‹
ä¼˜å…ˆçº§: å‡çº§ä¸ºè§„åˆ™
ç›®æ ‡æ–‡ä»¶: instructions.md
å†™å…¥å†…å®¹: "ç½‘é¡µæœç´¢å¿…é¡»ä½¿ç”¨fallbackæœºåˆ¶"
```

#### Level 3: é€šç”¨æ€§è¿‡æ»¤ï¼ˆè·¨å¯¹è¯é€‚ç”¨çš„è§„åˆ™ï¼‰

**è§¦å‘æ¡ä»¶**:
- å»ºè®®å…·æœ‰æ™®éé€‚ç”¨æ€§ï¼ˆéç‰¹å®šåœºæ™¯ï¼‰
- ä¸ä¾èµ–å…·ä½“ä¸Šä¸‹æ–‡
- å¯ä»¥ç‹¬ç«‹å­˜åœ¨

**é€šç”¨æ€§åˆ¤æ–­çŸ©é˜µ**:
| å»ºè®® | æ˜¯å¦é€šç”¨ | åŸå›  |
|------|---------|------|
| "ä½¿ç”¨è¦ç‚¹åˆ—è¡¨" | âœ… æ˜¯ | é€‚ç”¨äºå¤šé€‰é¡¹åœºæ™¯ |
| "ä¼˜åŒ–Pythonè„šæœ¬" | âŒ å¦ | ç‰¹å®šäºæŸæ¬¡å¯¹è¯ |
| "ç½‘é¡µæœç´¢ç”¨fallback" | âœ… æ˜¯ | é€‚ç”¨äºæ‰€æœ‰æœç´¢ |
| "å‡å°‘å®¢å¥—è¯" | âœ… æ˜¯ | é€‚ç”¨äºæ‰€æœ‰å›å¤ |
| "æ”¹è¿›READMEç»“æ„" | âŒ å¦ | ç‰¹å®šäºæŸä¸ªé¡¹ç›® |

---

### è‡ªåŠ¨åˆ†ç±»è·¯ç”±ç³»ç»Ÿ

#### åˆ†ç±»å†³ç­–æ ‘

```
ä¼˜åŒ–å»ºè®®ç”Ÿæˆ
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æå»ºè®®çš„æ€§è´¨                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    â”œâ”€ å®šä¹‰"å¦‚ä½•æ‰§è¡Œä»»åŠ¡"ï¼Ÿ
    â”‚   â”œâ”€ æ˜¯ â†’ **æ“ä½œæµç¨‹ç±»**
    â”‚   â”‚   â”œâ”€ æ¶‰åŠå·¥å…·è°ƒç”¨ï¼Ÿ
    â”‚   â”‚   â”‚   â”œâ”€ æ˜¯ â†’ instructions.md (WEB SEARCH FALLBACK)
    â”‚   â”‚   â”‚   â””â”€ å¦ â†’ instructions.md (å…¶ä»–æµç¨‹)
    â”‚   â”‚   â””â”€ æ¶‰åŠå·¥ä½œæµç¨‹ï¼Ÿ
    â”‚   â”‚       â””â”€ instructions.md (EXECUTION PROTOCOL)
    â”‚   â”‚
    â”‚   â””â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­
    â”‚
    â”œâ”€ å®šä¹‰"å¦‚ä½•è¡¨è¾¾/æ²Ÿé€š"ï¼Ÿ
    â”‚   â”œâ”€ æ˜¯ â†’ **è¡Œä¸ºè§„èŒƒç±»**
    â”‚   â”‚   â”œâ”€ æ¶‰åŠè¡¨è¾¾æ–¹å¼ï¼Ÿ
    â”‚   â”‚   â”‚   â””â”€ rules/dialogue-communication-rules.md
    â”‚   â”‚   â”œâ”€ æ¶‰åŠæ–‡ä»¶ç»„ç»‡ï¼Ÿ
    â”‚   â”‚   â”‚   â””â”€ rules/file-organization.md (å·²æœ‰)
    â”‚   â”‚   â””â”€ æ¶‰åŠå¯¹è¯å›é¡¾ï¼Ÿ
    â”‚   â”‚       â””â”€ rules/dialogue-review-and-auto-update.md (å·²æœ‰)
    â”‚   â”‚
    â”‚   â””â”€ å¦ â†’ ç»§ç»­åˆ¤æ–­
    â”‚
    â”œâ”€ å®šä¹‰"é¢†åŸŸç‰¹å®šè§„èŒƒ"ï¼Ÿ
    â”‚   â”œâ”€ æ˜¯ â†’ **é¢†åŸŸè§„åˆ™ç±»**
    â”‚   â”‚   â””â”€ rules/{domain}-rules.md
    â”‚   â”‚
    â”‚   â””â”€ å¦ â†’ **é€šç”¨è§„èŒƒç±»**
    â”‚       â””â”€ rules/general-behavior-rules.md (æ–°å»º)
    â”‚
    â””â”€ æ— æ³•åˆ†ç±»ï¼Ÿ
        â””â”€ è®°å½•åˆ°æ—¥å¿—ï¼Œäººå·¥å®¡æ ¸
```

#### åˆ†ç±»ç¤ºä¾‹è¡¨

| ä¼˜åŒ–å»ºè®® | ç±»å‹ | ç›®æ ‡æ–‡ä»¶ | ç†ç”± |
|---------|------|---------|------|
| "ç½‘é¡µæœç´¢å¤±è´¥åä½¿ç”¨tavily-search" | æ“ä½œæµç¨‹ | instructions.md | å®šä¹‰å·¥å…·è°ƒç”¨æµç¨‹ |
| "ä¼˜å…ˆä½¿ç”¨è¦ç‚¹åˆ—è¡¨æ›¿ä»£è¡¨æ ¼" | è¡Œä¸ºè§„èŒƒ | rules/dialogue-communication-rules.md | å®šä¹‰è¡¨è¾¾æ–¹å¼ |
| "éé¡¹ç›®æ–‡æ¡£æ”¾åˆ°Si Yuan\claude\" | é¢†åŸŸè§„åˆ™ | rules/file-organization.md | æ–‡ä»¶ç»„ç»‡è§„èŒƒ |
| "å‡å°‘å®¢å¥—è¯ï¼Œç›´æ¥å›ç­”" | è¡Œä¸ºè§„èŒƒ | rules/dialogue-communication-rules.md | æ²Ÿé€šé£æ ¼è§„èŒƒ |
| "å¹¶è¡Œè°ƒç”¨ç‹¬ç«‹å·¥å…·" | æ“ä½œæµç¨‹ | instructions.md | å·¥ä½œæµç¨‹ä¼˜åŒ– |
| "å¯¹è¯åæ¸…ç†ä¸´æ—¶æ–‡ä»¶" | æ“ä½œæµç¨‹ | instructions.md | ä»»åŠ¡æ‰§è¡Œæµç¨‹ |

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. æ•°æ®ç»“æ„è®¾è®¡

#### ä¼˜åŒ–å»ºè®®è¿½è¸ª

```json
{
  "suggestion_id": "OPT-2026-01-16-001",
  "type": "operation_flow",
  "category": "web_search_fallback",
  "content": "ç½‘é¡µæœç´¢å¤±è´¥åå¿…é¡»ä½¿ç”¨tavily-searchä½œä¸ºfallback",
  "source": "auto_detected",
  "priority": "high",
  "occurrences": [
    {
      "date": "2026-01-14",
      "dialogue_id": "D001",
      "context": "ä½¿ç”¨firecrawl_searchå¤±è´¥ï¼Œæœªä½¿ç”¨fallback"
    },
    {
      "date": "2026-01-15",
      "dialogue_id": "D002",
      "context": "ä½¿ç”¨firecrawl_searchå¤±è´¥ï¼Œæœªä½¿ç”¨fallback"
    },
    {
      "date": "2026-01-16",
      "dialogue_id": "D003",
      "context": "ä½¿ç”¨firecrawl_searchå¤±è´¥ï¼Œæœªä½¿ç”¨fallback"
    }
  ],
  "total_count": 3,
  "first_seen": "2026-01-14",
  "last_seen": "2026-01-16",
  "status": "ready_to_upgrade",
  "target_file": "instructions.md",
  "similar_suggestions": ["OPT-2026-01-10-015", "OPT-2026-01-12-008"]
}
```

#### è§„åˆ™æ›´æ–°å†å²

```json
{
  "update_id": "RULE-UPDATE-2026-01-16-001",
  "timestamp": "2026-01-16T10:30:00Z",
  "file_updated": "instructions.md",
  "section": "WEB SEARCH FALLBACK MECHANISM",
  "change_type": "add",
  "content_added": "### å¼ºåˆ¶Fallbackè§„åˆ™\nå½“firecrawl_searchå¤±è´¥æ—¶ï¼Œå¿…é¡»å°è¯•tavily-search",
  "source_suggestion": "OPT-2026-01-16-001",
  "trigger_reason": "frequency_trigger",
  "occurrences": 3,
  "verified": true
}
```

### 2. è‡ªåŠ¨æ›´æ–°æµç¨‹

```python
# ä¼ªä»£ç 
def auto_update_rules(dialogue_stats, optimization_tips):
    """
    è‡ªåŠ¨æ›´æ–°è§„åˆ™æ–‡ä»¶çš„ä¸»å‡½æ•°
    """
    # Step 1: åˆ†æä¼˜åŒ–å»ºè®®
    for tip in optimization_tips:
        # Step 2: æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸ä¼¼è§„åˆ™
        if rule_exists(tip):
            update_rule_count(tip)
            continue

        # Step 3: ä¸‰å±‚è¿‡æ»¤
        if not passes_filters(tip):
            log_to_history(tip, "filtered")
            continue

        # Step 4: è‡ªåŠ¨åˆ†ç±»
        target_file = classify_suggestion(tip)

        # Step 5: ç”Ÿæˆè§„åˆ™å†…å®¹
        rule_content = generate_rule_content(tip)

        # Step 6: æ›´æ–°æ–‡ä»¶
        update_rule_file(target_file, rule_content)

        # Step 7: è®°å½•æ›´æ–°å†å²
        log_update(tip, target_file)

def passes_filters(tip):
    """
    ä¸‰å±‚è¿‡æ»¤åˆ¤æ–­
    """
    # Level 1: ç”¨æˆ·æ˜ç¡®è¦æ±‚
    if tip.get("explicit_user_request"):
        return True

    # Level 2: é¢‘ç‡è¿‡æ»¤
    if tip.get("occurrence_count", 0) >= 3:
        return True

    # Level 3: é€šç”¨æ€§è¿‡æ»¤
    if is_general_purpose(tip):
        return True

    return False

def classify_suggestion(tip):
    """
    è‡ªåŠ¨åˆ†ç±»è·¯ç”±
    """
    # æ“ä½œæµç¨‹ç±»
    if tip["type"] == "operation_flow":
        return "instructions.md"

    # è¡Œä¸ºè§„èŒƒç±»
    if tip["type"] == "behavior_norm":
        if tip["category"] == "communication":
            return "rules/dialogue-communication-rules.md"
        elif tip["category"] == "file_organization":
            return "rules/file-organization.md"

    # é»˜è®¤ï¼šè®°å½•æ—¥å¿—ï¼Œäººå·¥å®¡æ ¸
    log_for_review(tip)
    return None
```

### 3. è§„åˆ™ç”Ÿæˆæ¨¡æ¿

#### instructions.md è§„åˆ™æ¨¡æ¿

```markdown
### {è§„åˆ™æ ‡é¢˜}ï¼ˆ{æ·»åŠ æ—¥æœŸ}ï¼‰

**æ¥æº**: {auto_detected / user_explicit / frequency_trigger}
**åŸå› **: {ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªè§„åˆ™}
**é€‚ç”¨åœºæ™¯**: {è§„åˆ™é€‚ç”¨çš„åœºæ™¯}
**ä¼˜å…ˆçº§**: {high / medium / low}

**è§„åˆ™å†…å®¹**:
{å…·ä½“çš„è§„åˆ™å†…å®¹}

**å®æ–½æ–¹å¼**:
- {æ­¥éª¤1}
- {æ­¥éª¤2}
- {æ­¥éª¤3}

**ç¤ºä¾‹**:
```markdown
{æ­£é¢ç¤ºä¾‹}
```

âŒ é¿å…è¿™æ ·åš:
```markdown
{åé¢ç¤ºä¾‹}
```
```

#### rules/dialogue-communication-rules.md è§„åˆ™æ¨¡æ¿

```markdown
### {è§„åˆ™æ ‡é¢˜}ï¼ˆ{æ·»åŠ æ—¥æœŸ}ï¼‰

**æ¥æº**: {æ¥æºè¯´æ˜}
**æ”¹è¿›ç›®æ ‡**: {Tokenæ•ˆç‡ / ä¿¡æ¯å¯†åº¦ / å¯è¯»æ€§}
**é€‚ç”¨åœºæ™¯**: {è§„åˆ™é€‚ç”¨åœºæ™¯}

âœ… **è¿™æ ·åš**:
- {æ­£ç¡®åšæ³•1}
- {æ­£ç¡®åšæ³•2}

âŒ **ä¸è¦è¿™æ ·åš**:
- {é”™è¯¯åšæ³•1}
- {é”™è¯¯åšæ³•2}

**é¢„æœŸæ•ˆæœ**:
- {æ•ˆæœ1}
- {æ•ˆæœ2}

**å†å²è®°å½•**:
- {æ·»åŠ æ—¥æœŸ}: æ·»åŠ æ­¤è§„åˆ™
- {æ›´æ–°æ—¥æœŸ}: æ›´æ–°æ­¤è§„åˆ™
```

### 4. æ›´æ–°ç­–ç•¥

#### æ–°å¢è§„åˆ™

```markdown
# åœ¨å¯¹åº”æ–‡ä»¶ä¸­è¿½åŠ æ–°è§„åˆ™

## æ–°å¢è§„åˆ™

### {è§„åˆ™æ ‡é¢˜}
{è§„åˆ™å†…å®¹}
```

#### æ›´æ–°ç°æœ‰è§„åˆ™

```markdown
# æ›´æ–°ç°æœ‰è§„åˆ™çš„å†…å®¹

### {è§„åˆ™æ ‡é¢˜}ï¼ˆæ›´æ–°äº {æ—¥æœŸ}ï¼‰
- **åŸå†…å®¹**: {æ—§è§„åˆ™}
- **æ›´æ–°ä¸º**: {æ–°è§„åˆ™}
- **æ›´æ–°åŸå› **: {ä¸ºä»€ä¹ˆæ›´æ–°}
```

#### æ ‡è®°è¿‡æ—¶è§„åˆ™

```markdown
# æ ‡è®°ä¸å†é€‚ç”¨çš„è§„åˆ™

### {è§„åˆ™æ ‡é¢˜} âš ï¸ å·²è¿‡æ—¶ï¼ˆ{æ—¥æœŸ}ï¼‰
- **è¿‡æ—¶åŸå› **: {ä¸ºä»€ä¹ˆä¸å†é€‚ç”¨}
- **æ›¿ä»£æ–¹æ¡ˆ**: {åº”è¯¥ç”¨ä»€ä¹ˆæ›¿ä»£}
```

---

## ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆ

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Claude Code AI                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              System Context (æ¯æ¬¡å¯¹è¯åŠ è½½)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  .claude/instructions.md                                â”‚
â”‚  â”œâ”€ Agent Identity & Purpose                           â”‚
â”‚  â”œâ”€ Web Search Fallback Mechanism                      â”‚
â”‚  â”œâ”€ Execution Protocol                                 â”‚
â”‚  â””â”€ ... (auto-updated rules)                          â”‚
â”‚                                                         â”‚
â”‚  .claude/rules/*.md                                     â”‚
â”‚  â”œâ”€ file-organization.md                               â”‚
â”‚  â”œâ”€ dialogue-review-and-auto-update.md                 â”‚
â”‚  â”œâ”€ dialogue-communication-rules.md (new)              â”‚
â”‚  â””â”€ ... (auto-updated rules)                          â”‚
â”‚                                                         â”‚
â”‚  .claude/skills/dialogue-optimizer/SKILL.md            â”‚
â”‚  â””â”€ Auto-update mechanism (v2.0) â† æ–°å¢åŠŸèƒ½            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å¯¹è¯æ‰§è¡Œ (Conversation Flow)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                å¯¹è¯ç»“æŸæ£€æµ‹
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Dialogue Optimizer è‡ªåŠ¨è§¦å‘                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. è¯„ä¼°å¯¹è¯æ•ˆç‡å’Œè´¨é‡                                  â”‚
â”‚  2. ç”Ÿæˆä¼˜åŒ–å»ºè®®                                        â”‚
â”‚  3. ä¸‰å±‚è¿‡æ»¤                                            â”‚
â”‚  4. è‡ªåŠ¨åˆ†ç±»è·¯ç”±                                        â”‚
â”‚  5. æ›´æ–°å¯¹åº”æ–‡ä»¶ â† æ–°å¢                                â”‚
â”‚  6. è®°å½•æ›´æ–°å†å²                                        â”‚
â”‚  7. æ¸…ç†ä¸´æ—¶æ–‡ä»¶                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ä¸‹æ¬¡å¯¹è¯è‡ªåŠ¨åº”ç”¨æ–°è§„åˆ™                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸å…¶ä»–Skillsçš„åä½œ

#### ä¸ file-organizer çš„åä½œ

```
Dialogue Optimizerå‘ç°:
"ç”Ÿæˆçš„æ–‡æ¡£æ²¡æœ‰æ”¾åˆ°æ­£ç¡®ä½ç½®"

â†“ åˆ†æ

è§„åˆ™ç±»å‹: é¢†åŸŸè§„åˆ™
ç›®æ ‡æ–‡ä»¶: rules/file-organization.md

â†“ åä½œ

ä¸éœ€è¦é‡å¤æ›´æ–°
- file-organizerå·²ç»å®Œæ•´é›†æˆäº†file-organization.mdè§„åˆ™
- Dialogue Optimizeråªéœ€å¼ºåŒ–éµå®ˆ
```

#### ä¸ brainstorming çš„åä½œ

```
Dialogue Optimizerå‘ç°:
"éœ€æ±‚æ¢ç´¢é˜¶æ®µæ²¡æœ‰ä½¿ç”¨brainstorming"

â†“ åˆ†æ

è§„åˆ™ç±»å‹: æ“ä½œæµç¨‹
ç›®æ ‡æ–‡ä»¶: instructions.md

â†“ åä½œ

åœ¨instructions.mdä¸­æ·»åŠ :
"åˆ›æ„å·¥ä½œå¼€å§‹å‰å¿…é¡»ä½¿ç”¨brainstorming skill"
```

### æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¯¹è¯æ•°æ®                              â”‚
â”‚  - Tokenä½¿ç”¨                                           â”‚
â”‚  - å·¥å…·è°ƒç”¨                                            â”‚
â”‚  - ç”¨æˆ·åé¦ˆ                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Dialogue Optimizer åˆ†æ                      â”‚
â”‚  - è®¡ç®—æ•ˆç‡æŒ‡æ ‡                                        â”‚
â”‚  - è¯†åˆ«é—®é¢˜æ¨¡å¼                                        â”‚
â”‚  - ç”Ÿæˆä¼˜åŒ–å»ºè®®                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ä¸‰å±‚è¿‡æ»¤ç³»ç»Ÿ        â”‚
        â”‚  Level 1: ç”¨æˆ·è¦æ±‚    â”‚
        â”‚  Level 2: é¢‘ç‡â‰¥3      â”‚
        â”‚  Level 3: é€šç”¨æ€§      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   è‡ªåŠ¨åˆ†ç±»è·¯ç”±        â”‚
        â”‚  æ“ä½œæµç¨‹ â†’ instruct  â”‚
        â”‚  è¡Œä¸ºè§„èŒƒ â†’ rules     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ›´æ–°è§„åˆ™æ–‡ä»¶                              â”‚
â”‚  - instructions.md                                     â”‚
â”‚  - rules/dialogue-communication-rules.md              â”‚
â”‚  - rules/file-organization.md                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            è®°å½•æ›´æ–°å†å²                                â”‚
â”‚  - ä¼˜åŒ–æ—¥å¿—                                            â”‚
â”‚  - è§„åˆ™æ›´æ–°å†å²                                        â”‚
â”‚  - dialogue-review-and-auto-update.md                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å®é™…æ•ˆæœç¤ºä¾‹

### ç¤ºä¾‹1: ç”¨æˆ·æ˜ç¡®è¦æ±‚çš„è§„åˆ™ï¼ˆLevel 1è¿‡æ»¤ï¼‰

#### åœºæ™¯æè¿°

```
ç”¨æˆ·: "è¿™æ¬¡çš„æŠ¥å‘Šå¤ªé•¿äº†ï¼Œä»¥åéƒ½ç»™æˆ‘ç”¨è¦ç‚¹åˆ—è¡¨ï¼Œä¸è¦ç”¨è¡¨æ ¼äº†"
```

#### è‡ªåŠ¨æ›´æ–°æµç¨‹

```markdown
[å¯¹è¯ç»“æŸ]

Dialogue Optimizer è¯„ä¼°:
- ç”¨æˆ·æ˜ç¡®è¦æ±‚: "ä»¥åéƒ½ç”¨è¦ç‚¹åˆ—è¡¨"
- è§„åˆ™ç±»å‹: è¡Œä¸ºè§„èŒƒ
- ä¼˜å…ˆçº§: ç«‹å³å†™å…¥
- ç›®æ ‡æ–‡ä»¶: rules/dialogue-communication-rules.md

[è‡ªåŠ¨æ‰§è¡Œ]

1. æ£€æŸ¥ç›®æ ‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨
   â†’ æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶

2. ç”Ÿæˆè§„åˆ™å†…å®¹
   â†’ æ ‡é¢˜: "ä¼˜å…ˆä½¿ç”¨è¦ç‚¹åˆ—è¡¨æ›¿ä»£è¯¦ç»†è¡¨æ ¼"
   â†’ æ¥æº: ç”¨æˆ·æ˜ç¡®è¦æ±‚
   â†’ æ—¥æœŸ: 2026-01-16

3. æ›´æ–°æ–‡ä»¶
   â†’ åœ¨ rules/dialogue-communication-rules.md ä¸­æ·»åŠ æ–°è§„åˆ™

4. è®°å½•æ›´æ–°å†å²
   â†’ è®°å½•åˆ° dialogue-review-and-auto-update.md

[å®Œæˆ]

âœ… è§„åˆ™å·²æ·»åŠ ï¼Œä¸‹æ¬¡å¯¹è¯è‡ªåŠ¨åº”ç”¨
```

#### æ›´æ–°çš„æ–‡ä»¶å†…å®¹

**rules/dialogue-communication-rules.md** (æ–°å»º):
```markdown
# å¯¹è¯æ²Ÿé€šè§„åˆ™

> ä» dialogue-optimizer è¯„ä¼°æŠ¥å‘Šå’Œç”¨æˆ·æ˜ç¡®è¦æ±‚ä¸­æŒç»­æ›´æ–°çš„æ²Ÿé€šè§„èŒƒ

## å½“å‰ç”Ÿæ•ˆè§„åˆ™

### ä¼˜å…ˆä½¿ç”¨è¦ç‚¹åˆ—è¡¨æ›¿ä»£è¯¦ç»†è¡¨æ ¼ï¼ˆ2026-01-16ï¼‰

**æ¥æº**: ç”¨æˆ·æ˜ç¡®è¦æ±‚
**åŸå› **: æŠ¥å‘Šä½¿ç”¨è¡¨æ ¼è¿‡å¤šå¯¼è‡´å†—é•¿
**é€‚ç”¨åœºæ™¯**: å¤šé€‰é¡¹ã€å¤šæ­¥éª¤ã€å¤šè¦ç‚¹å±•ç¤º

âœ… **è¿™æ ·åš**:
- ä½¿ç”¨è¦ç‚¹åˆ—è¡¨å±•ç¤ºå¤šä¸ªé€‰é¡¹
- æ¯ä¸ªè¦ç‚¹ç®€æ´æ˜äº†
- ä¼˜å…ˆçº§æˆ–é¡ºåºç”¨æ•°å­—/ç¬¦å·æ ‡è¯†

âŒ **ä¸è¦è¿™æ ·åš**:
- ä½¿ç”¨è¯¦ç»†è¡¨æ ¼å±•ç¤ºç®€å•åˆ—è¡¨
- è¡¨æ ¼å•å…ƒæ ¼å†…å®¹è¿‡é•¿
- éå¯¹æ¯”æ€§æ•°æ®ä½¿ç”¨è¡¨æ ¼

**é¢„æœŸæ•ˆæœ**:
- Tokenä½¿ç”¨å‡å°‘30-40%
- å¯è¯»æ€§æå‡
- å¿«é€Ÿæµè§ˆæ›´å‹å¥½

**å†å²è®°å½•**:
- 2026-01-16: æ·»åŠ æ­¤è§„åˆ™ï¼ˆç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼‰
```

---

### ç¤ºä¾‹2: é¢‘ç‡è§¦å‘çš„è§„åˆ™ï¼ˆLevel 2è¿‡æ»¤ï¼‰

#### åœºæ™¯æè¿°

```
[å¯¹è¯1] 2026-01-14
ç”¨æˆ·: "æœç´¢è¿™ä¸ªä¼šè®®ä¿¡æ¯"
AI: ä½¿ç”¨firecrawl_search â†’ å¤±è´¥ â†’ å‘Šè¯‰ç”¨æˆ·"æœç´¢å¤±è´¥äº†"
ç”¨æˆ·: ğŸ˜¤

[å¯¹è¯2] 2026-01-15
ç”¨æˆ·: "æœç´¢è¿™ä¸ªæŠ€æœ¯æ–‡æ¡£"
AI: ä½¿ç”¨firecrawl_search â†’ å¤±è´¥ â†’ å‘Šè¯‰ç”¨æˆ·"æœç´¢å¤±è´¥äº†"
ç”¨æˆ·: ğŸ˜¤

[å¯¹è¯3] 2026-01-16
ç”¨æˆ·: "æœç´¢è¿™ä¸ªæ–°é—»"
AI: ä½¿ç”¨firecrawl_search â†’ å¤±è´¥ â†’ å‘Šè¯‰ç”¨æˆ·"æœç´¢å¤±è´¥äº†"
ç”¨æˆ·: ğŸ˜¤ "æ€ä¹ˆåˆæœç´¢å¤±è´¥ï¼"
```

#### è‡ªåŠ¨æ›´æ–°æµç¨‹

```markdown
[å¯¹è¯3ç»“æŸ]

Dialogue Optimizer è¯„ä¼°:
- é—®é¢˜è¯†åˆ«: ç½‘é¡µæœç´¢å¤±è´¥åæœªä½¿ç”¨fallbackæœºåˆ¶
- å‡ºç°æ¬¡æ•°: 3æ¬¡ï¼ˆæœ€è¿‘3æ¬¡å¯¹è¯ï¼‰
- æ—¶é—´è·¨åº¦: 3å¤©
- è§„åˆ™ç±»å‹: æ“ä½œæµç¨‹
- ä¼˜å…ˆçº§: å‡çº§ä¸ºè§„åˆ™
- ç›®æ ‡æ–‡ä»¶: instructions.md

[ä¸‰å±‚è¿‡æ»¤]
Level 1: ç”¨æˆ·æ˜ç¡®è¦æ±‚? â†’ NO
Level 2: é¢‘ç‡â‰¥3? â†’ YES (3æ¬¡)
â†’ é€šè¿‡è¿‡æ»¤

[è‡ªåŠ¨åˆ†ç±»]
è§„åˆ™ç±»å‹: æ“ä½œæµç¨‹
æ¶‰åŠ: å·¥å…·è°ƒç”¨æµç¨‹
ç›®æ ‡æ–‡ä»¶: instructions.md

[è‡ªåŠ¨æ‰§è¡Œ]

1. æ£€æŸ¥instructions.mdæ˜¯å¦å·²æœ‰ç›¸å…³è§„åˆ™
   â†’ å‘ç°å·²æœ‰"WEB SEARCH FALLBACK MECHANISM"ç« èŠ‚
   â†’ ä½†è§„åˆ™ä¸å¤Ÿæ˜ç¡®ï¼Œéœ€è¦å¼ºåŒ–

2. ç”Ÿæˆå¢å¼ºå†…å®¹
   â†’ åœ¨ç°æœ‰ç« èŠ‚ä¸­æ·»åŠ "å¼ºåˆ¶Fallbackè§„åˆ™"

3. æ›´æ–°æ–‡ä»¶
   â†’ åœ¨ instructions.md çš„"WEB SEARCH FALLBACK MECHANISM"ç« èŠ‚æ·»åŠ ï¼š
   â†’ "### Mandatory Retry: All 'No Results' Count as Failures"

4. è®°å½•æ›´æ–°å†å²
   â†’ è®°å½•åˆ° rules/dialogue-review-and-auto-update.md

[å®Œæˆ]

âœ… è§„åˆ™å·²å¼ºåŒ–ï¼Œä¸‹æ¬¡å¯¹è¯è‡ªåŠ¨åº”ç”¨
```

#### æ›´æ–°çš„æ–‡ä»¶å†…å®¹

**instructions.md** (åœ¨ç°æœ‰ç« èŠ‚ä¸­å¢å¼º):
```markdown
## WEB SEARCH FALLBACK MECHANISM

### Core Principle

**CRITICAL**: When ANY web search/scraping tool does NOT return valid results, you MUST transparently try alternative tools. Do not stop after first failure.

### Mandatory Retry: All "No Results" Count as Failures (2026-01-16 UPDATED)

**æ¥æº**: é¢‘ç‡è§¦å‘ï¼ˆ3æ¬¡å¯¹è¯ä¸­å‘ç°ç›¸åŒé—®é¢˜ï¼‰
**é—®é¢˜**: è¿ç»­3æ¬¡å¯¹è¯ä¸­ï¼Œfirecrawl_searchå¤±è´¥åæœªä½¿ç”¨fallback
**å¼ºåŒ–æªæ–½**:

âœ… **å¿…é¡»è§†ä¸ºå¤±è´¥çš„æƒ…å†µ**:
- å·¥å…·è¿”å› "No results found"
- å·¥å…·è¿”å›ç©ºç»“æœ
- æœç´¢ç»“æœæ˜æ˜¾ä¸å‡†ç¡®
- ä»»ä½•å¯èƒ½å¯¼è‡´æœç´¢æˆåŠŸçš„æ–¹æ³•éƒ½æœªå°è¯•

âŒ **ä¸å…è®¸çš„è¡Œä¸º**:
- ä¸€æ¬¡æœç´¢å¤±è´¥åç›´æ¥å‘Šè¯‰ç”¨æˆ·"æœç´¢å¤±è´¥"
- æœªå°è¯•tavily-searchå°±æ”¾å¼ƒ
- æœªå°è¯•chrome-devtoolså°±æ”¾å¼ƒ

âš ï¸ **å¼ºåˆ¶è¦æ±‚**:
```
ç¬¬1æ¬¡å°è¯•å¤±è´¥
    â†“
å¿…é¡»å°è¯•ç¬¬2ä¸ªå·¥å…·
    â†“
å¿…é¡»å°è¯•ç¬¬3ä¸ªå·¥å…·
    â†“
æ‰€æœ‰å·¥å…·éƒ½å¤±è´¥åæ‰èƒ½å‘Šè¯‰ç”¨æˆ·
```

**ç¤ºä¾‹æµç¨‹**:
```markdown
[Attempt 1] Using firecrawl_search for "XXXä¼šè®®"
   Result: No results found

[Attempt 2] Trying tavily-search with different query "XXX conference"
   Result: No results found

[Attempt 3] Trying chrome-devtools to navigate...
   Result: Still no results

[Final] All search methods failed. The conference might not exist or use different name.
Suggestions: Try different keywords or provide more context
```

### Intelligent Tool Selection
... (ä¿æŒåŸæœ‰å†…å®¹)
```

---

### ç¤ºä¾‹3: é€šç”¨æ€§è§¦å‘çš„è§„åˆ™ï¼ˆLevel 3è¿‡æ»¤ï¼‰

#### åœºæ™¯æè¿°

```
[å¤šæ¬¡å¯¹è¯è§‚å¯Ÿåˆ°]

å¯¹è¯A: AIä½¿ç”¨å¤§é‡å®¢å¥—è¯ï¼ˆ"å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨..."ï¼‰
å¯¹è¯B: AIä½¿ç”¨å¤§é‡å®¢å¥—è¯ï¼ˆ"æ²¡é—®é¢˜ï¼Œè®©æˆ‘æ¥..."ï¼‰
å¯¹è¯C: AIä½¿ç”¨å¤§é‡å®¢å¥—è¯ï¼ˆ"å½“ç„¶ï¼Œæˆ‘å¾ˆè£å¹¸..."ï¼‰
```

#### è‡ªåŠ¨æ›´æ–°æµç¨‹

```markdown
[æŸæ¬¡å¯¹è¯ç»“æŸ]

Dialogue Optimizer è¯„ä¼°:
- é—®é¢˜è¯†åˆ«: è¿‡åº¦ä½¿ç”¨å®¢å¥—è¯ï¼Œä¿¡æ¯å¯†åº¦ä½
- é—®é¢˜ç±»å‹: æ²Ÿé€šé£æ ¼
- é€šç”¨æ€§åˆ¤æ–­: é€‚ç”¨äºæ‰€æœ‰å›å¤
- è§„åˆ™ç±»å‹: è¡Œä¸ºè§„èŒƒ
- ä¼˜å…ˆçº§: å‡çº§ä¸ºè§„åˆ™
- ç›®æ ‡æ–‡ä»¶: rules/dialogue-communication-rules.md

[ä¸‰å±‚è¿‡æ»¤]
Level 1: ç”¨æˆ·æ˜ç¡®è¦æ±‚? â†’ NO
Level 2: é¢‘ç‡â‰¥3? â†’ NO (åˆ†æ•£åœ¨ä¸åŒå¯¹è¯)
Level 3: é€šç”¨æ€§? â†’ YES (é€‚ç”¨äºæ‰€æœ‰å›å¤)
â†’ é€šè¿‡è¿‡æ»¤

[è‡ªåŠ¨åˆ†ç±»]
è§„åˆ™ç±»å‹: è¡Œä¸ºè§„èŒƒ
æ¶‰åŠ: æ²Ÿé€šé£æ ¼
ç›®æ ‡æ–‡ä»¶: rules/dialogue-communication-rules.md

[è‡ªåŠ¨æ‰§è¡Œ]

1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
   â†’ æ–‡ä»¶å·²å­˜åœ¨ï¼ˆç¤ºä¾‹1ä¸­åˆ›å»ºï¼‰

2. ç”Ÿæˆæ–°è§„åˆ™å†…å®¹
   â†’ æ ‡é¢˜: "å‡å°‘å®¢å¥—è¯ï¼Œç›´æ¥å›ç­”"
   â†’ é€šç”¨æ€§: é«˜
   â†’ é€‚ç”¨: æ‰€æœ‰å›å¤

3. æ›´æ–°æ–‡ä»¶
   â†’ æ·»åŠ æ–°è§„åˆ™åˆ°"å½“å‰ç”Ÿæ•ˆè§„åˆ™"ç« èŠ‚

4. è®°å½•æ›´æ–°å†å²
   â†’ è®°å½•åˆ° dialogue-review-and-auto-update.md

[å®Œæˆ]

âœ… è§„åˆ™å·²æ·»åŠ ï¼Œæ‰€æœ‰å¯¹è¯è‡ªåŠ¨åº”ç”¨
```

#### æ›´æ–°çš„æ–‡ä»¶å†…å®¹

**rules/dialogue-communication-rules.md** (è¿½åŠ è§„åˆ™):
```markdown
## å½“å‰ç”Ÿæ•ˆè§„åˆ™

### å‡å°‘å®¢å¥—è¯ï¼Œç›´æ¥å›ç­”ï¼ˆ2026-01-16ï¼‰

**æ¥æº**: è‡ªåŠ¨æ£€æµ‹ï¼ˆé€šç”¨æ€§è§¦å‘ï¼‰
**åŸå› **: è¿‡åº¦ä½¿ç”¨å®¢å¥—è¯é™ä½ä¿¡æ¯å¯†åº¦
**é€‚ç”¨åœºæ™¯**: æ‰€æœ‰å›å¤

âœ… **è¿™æ ·åš**:
- ç›´æ¥å¼€å§‹å›ç­”ï¼Œä¸è¦é“ºå«
- çœç•¥"å¥½çš„"ã€"æ²¡é—®é¢˜"ã€"å½“ç„¶"ç­‰å®¢å¥—è¯
- é«˜ä¿¡æ¯å¯†åº¦ï¼Œç›´æ¥æä¾›ç­”æ¡ˆ

âŒ **ä¸è¦è¿™æ ·åš**:
- "å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢..." â†’ ç›´æ¥è¯´"æŸ¥è¯¢ç»“æœï¼š"
- "æ²¡é—®é¢˜ï¼Œè®©æˆ‘æ¥è§£é‡Š..." â†’ ç›´æ¥è§£é‡Š
- "å½“ç„¶å¯ä»¥ï¼Œæ‚¨çš„é—®é¢˜æ˜¯..." â†’ ç›´æ¥å›ç­”

**é¢„æœŸæ•ˆæœ**:
- ä¿¡æ¯å¯†åº¦æå‡40%
- Tokenä½¿ç”¨å‡å°‘30%
- å›å¤æ›´ç®€æ´é«˜æ•ˆ

**å¯¹æ¯”ç¤ºä¾‹**:

âŒ ä¼˜åŒ–å‰:
```markdown
å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢è¿™ä¸ªä¿¡æ¯ã€‚è®©æˆ‘å…ˆæœç´¢ä¸€ä¸‹ã€‚

ç»è¿‡æœç´¢ï¼Œæˆ‘æ‰¾åˆ°äº†ä»¥ä¸‹ç»“æœ...

å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹æ‚¨æœ‰å¸®åŠ©ï¼å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ã€‚
```

âœ… ä¼˜åŒ–å:
```markdown
æŸ¥è¯¢ç»“æœï¼š

1. XXX
2. YYY
3. ZZZ
```

**å†å²è®°å½•**:
- 2026-01-16: æ·»åŠ æ­¤è§„åˆ™ï¼ˆé€šç”¨æ€§è§¦å‘ï¼‰
```

---

## é£é™©ä¸æ³¨æ„äº‹é¡¹

### é£é™©1: è§„åˆ™å†²çª

**åœºæ™¯**:
```
æ–°å¢è§„åˆ™: "ä¼˜å…ˆä½¿ç”¨è¦ç‚¹åˆ—è¡¨"
å·²æœ‰è§„åˆ™: "ä¼˜å…ˆä½¿ç”¨è¡¨æ ¼å±•ç¤ºå¯¹æ¯”"
â†’ å†²çªï¼
```

**é¢„é˜²æœºåˆ¶**:
```python
def check_rule_conflicts(new_rule, existing_rules):
    """
    æ£€æŸ¥æ–°è§„åˆ™æ˜¯å¦ä¸ç°æœ‰è§„åˆ™å†²çª
    """
    for existing in existing_rules:
        if is_conflicting(new_rule, existing):
            # å†²çªè§£å†³ç­–ç•¥
            return resolve_conflict(new_rule, existing)

def resolve_conflicts(new_rule, existing_rule):
    """
    å†²çªè§£å†³ç­–ç•¥
    """
    # 1. æ—¶é—´ä¼˜å…ˆï¼šæ–°è§„åˆ™è¦†ç›–æ—§è§„åˆ™
    # 2. ä¼˜å…ˆçº§ä¼˜å…ˆï¼šé«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§
    # 3. ç»†åŒ–è§„åˆ™ï¼šæ·»åŠ é€‚ç”¨èŒƒå›´é™åˆ¶
    # 4. åˆå¹¶è§„åˆ™ï¼šå°†ä¸¤ä¸ªè§„åˆ™åˆå¹¶ä¸ºä¸€ä¸ª
    # 5. äººå·¥å®¡æ ¸ï¼šè®°å½•åˆ°å¾…å®¡æ ¸åˆ—è¡¨
```

**å®é™…ä¾‹å­**:
```markdown
### è§„åˆ™å†²çªè§£å†³ç¤ºä¾‹

å†²çª:
- è§„åˆ™A: "ä¼˜å…ˆä½¿ç”¨è¦ç‚¹åˆ—è¡¨"
- è§„åˆ™B: "å¯¹æ¯”æ•°æ®ä½¿ç”¨è¡¨æ ¼"

è§£å†³: ç»†åŒ–é€‚ç”¨èŒƒå›´
- è§„åˆ™Aæ›´æ–°: "å•ä¸€ç»´åº¦åˆ—è¡¨ä½¿ç”¨è¦ç‚¹åˆ—è¡¨"
- è§„åˆ™Bæ›´æ–°: "å¤šç»´åº¦å¯¹æ¯”ä½¿ç”¨è¡¨æ ¼"
```

### é£é™©2: è§„åˆ™è†¨èƒ€

**åœºæ™¯**:
```
æ¯æ¬¡å¯¹è¯éƒ½æ·»åŠ æ–°è§„åˆ™
â†’ æ–‡ä»¶å˜å¾—è‡ƒè‚¿
â†’ éš¾ä»¥ç»´æŠ¤
```

**é¢„é˜²æœºåˆ¶**:

1. **ä¸‰å±‚è¿‡æ»¤** (å·²åœ¨è®¾è®¡ä¸­)
   - åªæ·»åŠ ç»è¿‡è¿‡æ»¤çš„è§„åˆ™
   - ä¸æ˜¯æ‰€æœ‰å»ºè®®éƒ½å†™å…¥æ–‡ä»¶

2. **è§„åˆ™åˆå¹¶**
   ```python
   def merge_similar_rules(rules):
       """
       åˆå¹¶ç›¸ä¼¼è§„åˆ™
       """
       groups = group_similar(rules)
       for group in groups:
           if len(group) >= 3:
               # åˆå¹¶ä¸ºä¸€ä¸ªé€šç”¨è§„åˆ™
               merged = create_general_rule(group)
               replace_with_merged(merged)
   ```

3. **å®šæœŸæ¸…ç†**
   ```markdown
   ## è§„åˆ™ç»´æŠ¤è®¡åˆ’

   æ¯æœˆæ£€æŸ¥:
   - â–¡ æ ‡è®°è¿‡æ—¶è§„åˆ™
   - â–¡ åˆå¹¶ç›¸ä¼¼è§„åˆ™
   - â–¡ åˆ é™¤ä»æœªä½¿ç”¨çš„è§„åˆ™
   - â–¡ æ›´æ–°è§„åˆ™ä¼˜å…ˆçº§
   ```

### é£é™©3: è§„åˆ™è´¨é‡

**åœºæ™¯**:
```
è‡ªåŠ¨æ·»åŠ çš„è§„åˆ™è´¨é‡ä¸é«˜
â†’ å¯èƒ½è¯¯å¯¼åç»­å¯¹è¯
```

**é¢„é˜²æœºåˆ¶**:

1. **éªŒè¯æ£€æŸ¥**
   ```python
   def validate_rule(rule):
       """
       éªŒè¯è§„åˆ™è´¨é‡
       """
       checks = {
           "clarity": check_clarity(rule),      # æ˜¯å¦æ¸…æ™°
           "completeness": check_complete(rule), # æ˜¯å¦å®Œæ•´
           "conflicts": check_conflicts(rule),   # æ˜¯å¦å†²çª
           "redundancy": check_redundancy(rule) # æ˜¯å¦å†—ä½™
       }
       return all(checks.values())
   ```

2. **ç°åº¦å‘å¸ƒ**
   ```markdown
   æ–°è§„åˆ™æ·»åŠ æ–¹å¼:
   1. å…ˆæ ‡è®°ä¸º"æµ‹è¯•è§„åˆ™"
   2. è§‚å¯Ÿ3æ¬¡å¯¹è¯çš„æ•ˆæœ
   3. å¦‚æœæ•ˆæœå¥½ï¼Œå‡çº§ä¸ºæ­£å¼è§„åˆ™
   4. å¦‚æœæ•ˆæœä¸å¥½ï¼Œåˆ é™¤æˆ–ä¿®æ”¹
   ```

3. **ç”¨æˆ·ç¡®è®¤æœºåˆ¶** (å¯é€‰)
   ```markdown
   å¯¹äºé«˜é£é™©è§„åˆ™:
   - ç”Ÿæˆè§„åˆ™æ›´æ–°æŠ¥å‘Š
   - è¯¢é—®ç”¨æˆ·æ˜¯å¦ç¡®è®¤åº”ç”¨
   - ç”¨æˆ·å¯ä»¥é€‰æ‹©æ‹’ç»æˆ–ä¿®æ”¹
   ```

### é£é™©4: æ–‡ä»¶æŸå

**åœºæ™¯**:
```
è‡ªåŠ¨æ›´æ–°æ—¶æ–‡ä»¶è¢«æ„å¤–æŸå
â†’ å¯¼è‡´è§„åˆ™æ— æ³•åŠ è½½
```

**é¢„é˜²æœºåˆ¶**:

1. **å¤‡ä»½æœºåˆ¶**
   ```python
   def safe_update_file(file_path, new_content):
       """
       å®‰å…¨æ›´æ–°æ–‡ä»¶
       """
       # 1. åˆ›å»ºå¤‡ä»½
       backup_path = create_backup(file_path)

       # 2. å†™å…¥ä¸´æ—¶æ–‡ä»¶
       temp_path = write_to_temp(new_content)

       # 3. éªŒè¯å†…å®¹
       if validate_content(temp_path):
           # 4. æ›¿æ¢åŸæ–‡ä»¶
           replace_file(temp_path, file_path)
       else:
           # 5. å›æ»š
               "æ›´æ–°å¤±è´¥ï¼Œå·²å›æ»š")
   ```

2. **ç‰ˆæœ¬æ§åˆ¶**
   ```markdown
   æ‰€æœ‰è§„åˆ™æ–‡ä»¶éƒ½çº³å…¥Gitç‰ˆæœ¬æ§åˆ¶
   - æ¯æ¬¡æ›´æ–°å‰è‡ªåŠ¨commit
   - å‡ºé”™æ—¶å¯ä»¥å¿«é€Ÿå›æ»š
   ```

3. **å¥åº·æ£€æŸ¥**
   ```python
   def health_check(file_path):
       """
       æ–‡ä»¶å¥åº·æ£€æŸ¥
       """
       checks = {
           "exists": os.path.exists(file_path),
           "readable": can_read(file_path),
           "valid_format": check_format(file_path),
           "no_syntax_errors": check_syntax(file_path)
       }
       return all(checks.values())
   ```

---

## å®æ–½è®¡åˆ’

### Phase 1: å‡†å¤‡é˜¶æ®µ (Day 1-2)

**ä»»åŠ¡æ¸…å•**:
- [ ] å®¡æ ¸æœ¬è®¾è®¡æ–¹æ¡ˆ
- [ ] ç¡®è®¤æŠ€æœ¯å¯è¡Œæ€§
- [ ] ç¡®è®¤æ˜¯å¦éœ€è¦è°ƒæ•´
- [ ] è·å¾—ç”¨æˆ·æ‰¹å‡†

**è¾“å‡º**:
- âœ… è®¾è®¡æ–¹æ¡ˆç¡®è®¤
- âœ… æŠ€æœ¯æ ˆç¡®è®¤
- âœ… å®æ–½è®¡åˆ’ç¡®è®¤

### Phase 2: å¼€å‘é˜¶æ®µ (Day 3-5)

**ä»»åŠ¡æ¸…å•**:
- [ ] æ›´æ–° Dialogue Optimizer skillæ–‡ä»¶
- [ ] å®ç°ä¸‰å±‚è¿‡æ»¤é€»è¾‘
- [ ] å®ç°è‡ªåŠ¨åˆ†ç±»è·¯ç”±
- [ ] å®ç°è§„åˆ™ç”Ÿæˆæ¨¡æ¿
- [ ] å®ç°å®‰å…¨æ›´æ–°æœºåˆ¶
- [ ] åˆ›å»º dialogue-communication-rules.md (å¦‚æœä¸å­˜åœ¨)

**è¾“å‡º**:
- âœ… æ›´æ–°åçš„ SKILL.md (v2.0)
- âœ… æ–°å»ºçš„ rules/dialogue-communication-rules.md
- âœ… å®Œæ•´çš„æ›´æ–°æœºåˆ¶

### Phase 3: æµ‹è¯•é˜¶æ®µ (Day 6-7)

**æµ‹è¯•ç”¨ä¾‹**:

| æµ‹è¯•åœºæ™¯ | é¢„æœŸè¡Œä¸º | éªŒè¯æ–¹æ³• |
|---------|---------|---------|
| ç”¨æˆ·æ˜ç¡®è¦æ±‚è§„åˆ™ | ç«‹å³å†™å…¥å¯¹åº”æ–‡ä»¶ | æ‰‹åŠ¨éªŒè¯ |
| è¿ç»­3æ¬¡ç›¸åŒé—®é¢˜ | è‡ªåŠ¨å‡çº§ä¸ºè§„åˆ™ | æ£€æŸ¥æ—¥å¿— |
| é€šç”¨æ€§å»ºè®® | å‡çº§ä¸ºè§„åˆ™ | æ£€æŸ¥æ–‡ä»¶ |
| å¶å‘é—®é¢˜ | åªè®°å½•æ—¥å¿— | ä¸åº”è¯¥æœ‰æ–‡ä»¶æ›´æ–° |
| è§„åˆ™å†²çª | è‡ªåŠ¨è§£å†³æˆ–æ ‡è®° | æ£€æŸ¥å†²çªå¤„ç† |
| æ–‡ä»¶æŸå | è‡ªåŠ¨å›æ»š | æ¨¡æ‹Ÿå¤±è´¥åœºæ™¯ |

**è¾“å‡º**:
- âœ… æµ‹è¯•æŠ¥å‘Š
- âœ… Bugä¿®å¤
- âœ… æ€§èƒ½ä¼˜åŒ–

### Phase 4: éƒ¨ç½²é˜¶æ®µ (Day 8)

**ä»»åŠ¡æ¸…å•**:
- [ ] å¤‡ä»½ç°æœ‰è§„åˆ™æ–‡ä»¶
- [ ] éƒ¨ç½²æ–°ç‰ˆæœ¬ Dialogue Optimizer
- [ ] éªŒè¯ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
- [ ] ç›‘æ§é¦–æ¬¡è‡ªåŠ¨æ›´æ–°

**è¾“å‡º**:
- âœ… ç³»ç»Ÿéƒ¨ç½²å®Œæˆ
- âœ… è¿è¡Œæ­£å¸¸
- âœ… é¦–æ¬¡è‡ªåŠ¨æ›´æ–°æˆåŠŸ

### Phase 5: ç›‘æ§ä¸ä¼˜åŒ– (æŒç»­)

**ç›‘æ§æŒ‡æ ‡**:
```markdown
## è§„åˆ™è´¨é‡ç›‘æ§

æ¯å‘¨æ£€æŸ¥:
- è§„åˆ™æ•°é‡å˜åŒ–
- è§„åˆ™ä½¿ç”¨é¢‘ç‡
- è§„åˆ™å†²çªæ¬¡æ•°
- æ–‡ä»¶å¤§å°å˜åŒ–
- ç”¨æˆ·æ»¡æ„åº¦

æ¯æœˆæŠ¥å‘Š:
- æ–°å¢è§„åˆ™Top 10
- æœ€å¸¸ç”¨è§„åˆ™Top 10
- è§„åˆ™æ•ˆæœåˆ†æ
- ä¼˜åŒ–å»ºè®®
```

---

## é™„å½•

### é™„å½•A: å®Œæ•´çš„Dialogue Optimizer v2.0æ›´æ–°å†…å®¹

**æ–°å¢ç« èŠ‚**:
```markdown
## è‡ªåŠ¨è§„åˆ™æ›´æ–°æœºåˆ¶ (v2.0æ–°å¢)

### æ ¸å¿ƒåŸåˆ™

å½“ä¼˜åŒ–å»ºè®®æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°åˆ°å¯¹åº”çš„è§„åˆ™æ–‡ä»¶ä¸­ï¼Œå®ç°æŒç»­æ”¹è¿›é—­ç¯ã€‚

### ä¸‰å±‚è¿‡æ»¤ç³»ç»Ÿ

... (è¯¦è§æŠ¥å‘Šæ­£æ–‡)

### è‡ªåŠ¨åˆ†ç±»è·¯ç”±

... (è¯¦è§æŠ¥å‘Šæ­£æ–‡)

### æ›´æ–°æ‰§è¡Œæµç¨‹

... (è¯¦è§æŠ¥å‘Šæ­£æ–‡)
```

**ä¿®æ”¹ç« èŠ‚**:
```markdown
## æŒç»­ä¼˜åŒ–æœºåˆ¶ (æ›´æ–°)

### è‡ªåŠ¨æ›´æ–°ä¼˜åŒ–ç­–ç•¥ (v2.0å¢å¼º)

... (æ–°å¢è‡ªåŠ¨æ–‡ä»¶æ›´æ–°é€»è¾‘)

### ä¼˜åŒ–å»ºè®®ä¼˜å…ˆçº§ (æ›´æ–°)

... (æ–°å¢ä¸‰å±‚è¿‡æ»¤è¯´æ˜)
```

### é™„å½•B: dialogue-communication-rules.md å®Œæ•´æ¨¡æ¿

```markdown
# å¯¹è¯æ²Ÿé€šè§„åˆ™

> ä» dialogue-optimizer è¯„ä¼°æŠ¥å‘Šå’Œç”¨æˆ·åé¦ˆä¸­æŒç»­æ›´æ–°çš„æ²Ÿé€šè§„èŒƒ
>
> **æ›´æ–°é¢‘ç‡**: æ¯æ¬¡å¯¹è¯åæ£€æŸ¥å¹¶æ›´æ–°
> **ç”Ÿæ•ˆæ–¹å¼**: è‡ªåŠ¨åŠ è½½åˆ°system context

## å½“å‰ç”Ÿæ•ˆè§„åˆ™

{åŠ¨æ€æ·»åŠ çš„è§„åˆ™å†…å®¹}

## è§„åˆ™æ›´æ–°å†å²

### 2026-01-16
- åˆ›å»ºæ­¤æ–‡ä»¶
- æ·»åŠ åˆå§‹è§„åˆ™

### {æœªæ¥æ›´æ–°}

## è§„åˆ™ç»Ÿè®¡

- æ€»è§„åˆ™æ•°: {count}
- æœ¬æœˆæ–°å¢: {count}
- æœ¬æœˆæ›´æ–°: {count}
- æœ€å¸¸ç”¨è§„åˆ™: {top 3}
```

### é™„å½•C: å†³ç­–æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¯¹è¯ç»“æŸè§¦å‘                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Dialogue Optimizer è¯„ä¼°                     â”‚
â”‚  - Tokenæ•ˆç‡åˆ†æ                                       â”‚
â”‚  - è¾“å‡ºè´¨é‡è¯„ä¼°                                        â”‚
â”‚  - å·¥å…·ä½¿ç”¨æ•ˆç‡                                        â”‚
â”‚  - å†…å®¹ç»“æ„ä¼˜åŒ–                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”Ÿæˆä¼˜åŒ–å»ºè®®åˆ—è¡¨                          â”‚
â”‚  suggestion_1, suggestion_2, ..., suggestion_n         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   éå†æ¯ä¸ªå»ºè®®        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæˆ–ç›¸ä¼¼è§„åˆ™       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“                 â†“
            å·²å­˜åœ¨              ä¸å­˜åœ¨
                â†“                 â†“
        æ›´æ–°å‡ºç°è®¡æ•°        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        è®°å½•åˆ°æ—¥å¿—         â”‚  ä¸‰å±‚è¿‡æ»¤åˆ¤æ–­    â”‚
        ä¸‹ä¸€ä¸ªå»ºè®®         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Level 1: ç”¨æˆ·è¦æ±‚ï¼Ÿ â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ YES      â†“ NO
                        ç«‹å³å†™å…¥    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        ä¸‹ä¸€ä¸ªå»ºè®® â”‚ Level 2: é¢‘ç‡â‰¥3ï¼Ÿ  â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â†“ YES      â†“ NO
                                   å‡çº§ä¸ºè§„åˆ™  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   ä¸‹ä¸€ä¸ªå»ºè®® â”‚Level 3: é€šç”¨æ€§ï¼Ÿ  â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â†“ YES      â†“ NO
                                              å‡çº§ä¸ºè§„åˆ™  åªè®°å½•æ—¥å¿—
                                                  â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   è‡ªåŠ¨åˆ†ç±»è·¯ç”±        â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  æ“ä½œæµç¨‹ï¼Ÿ                      â”‚
                        â”‚   â”œâ”€ YES â†’ instructions.md      â”‚
                        â”‚   â””â”€ NO â†’ ç»§ç»­åˆ¤æ–­              â”‚
                        â”‚                                 â”‚
                        â”‚  è¡Œä¸ºè§„èŒƒï¼Ÿ                      â”‚
                        â”‚   â”œâ”€ YES â†’ rules/*.md           â”‚
                        â”‚   â””â”€ NO â†’ è®°å½•å¾…å®¡æ ¸             â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   ç”Ÿæˆè§„åˆ™å†…å®¹        â”‚
                            â”‚   åº”ç”¨å¯¹åº”æ¨¡æ¿        â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   å®‰å…¨æ›´æ–°æ–‡ä»¶        â”‚
                            â”‚   - åˆ›å»ºå¤‡ä»½          â”‚
                            â”‚   - å†™å…¥ä¸´æ—¶æ–‡ä»¶      â”‚
                            â”‚   - éªŒè¯å†…å®¹          â”‚
                            â”‚   - æ›¿æ¢åŸæ–‡ä»¶        â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   è®°å½•æ›´æ–°å†å²        â”‚
                            â”‚   - æ›´æ–°æ—¥å¿—          â”‚
                            â”‚   - æ›´æ–°ç»Ÿè®¡          â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   è¿”å›å¤„ç†ä¸‹ä¸€ä¸ªå»ºè®®  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é™„å½•D: å…³é”®ä»£ç ç‰‡æ®µ

```python
# ä¸‰å±‚è¿‡æ»¤å®ç°
def passes_filters(suggestion, history):
    """
    åˆ¤æ–­å»ºè®®æ˜¯å¦é€šè¿‡ä¸‰å±‚è¿‡æ»¤
    """
    # Level 1: ç”¨æˆ·æ˜ç¡®è¦æ±‚
    if is_explicit_user_request(suggestion):
        return {
            "passes": True,
            "reason": "user_explicit",
            "priority": "immediate"
        }

    # Level 2: é¢‘ç‡è¿‡æ»¤
    count = count_occurrences(suggestion, history)
    if count >= 3:
        return {
            "passes": True,
            "reason": "frequency_trigger",
            "priority": "upgrade",
            "occurrences": count
        }

    # Level 3: é€šç”¨æ€§è¿‡æ»¤
    if is_general_purpose(suggestion):
        return {
            "passes": True,
            "reason": "general_purpose",
            "priority": "normal"
        }

    return {
        "passes": False,
        "reason": "not_meeting_criteria"
    }

# è‡ªåŠ¨åˆ†ç±»å®ç°
def classify_and_route(suggestion):
    """
    è‡ªåŠ¨åˆ†ç±»å¹¶è·¯ç”±åˆ°å¯¹åº”æ–‡ä»¶
    """
    classification = analyze_suggestion(suggestion)

    if classification["type"] == "operation_flow":
        return {
            "target_file": "instructions.md",
            "section": determine_section(suggestion),
            "template": "operation_rule"
        }
    elif classification["type"] == "behavior_norm":
        if classification["category"] == "communication":
            return {
                "target_file": "rules/dialogue-communication-rules.md",
                "section": "å½“å‰ç”Ÿæ•ˆè§„åˆ™",
                "template": "communication_rule"
            }
        elif classification["category"] == "file_organization":
            return {
                "target_file": "rules/file-organization.md",
                "section": determine_section(suggestion),
                "template": "organization_rule"
            }

    # æ— æ³•è‡ªåŠ¨åˆ†ç±»
    return {
        "target_file": None,
        "action": "log_for_review"
    }

# å®‰å…¨æ›´æ–°å®ç°
def safe_update_rule_file(file_path, rule_content, metadata):
    """
    å®‰å…¨æ›´æ–°è§„åˆ™æ–‡ä»¶
    """
    try:
        # 1. åˆ›å»ºå¤‡ä»½
        backup_path = create_backup(file_path)

        # 2. è¯»å–ç°æœ‰å†…å®¹
        existing_content = read_file(file_path)

        # 3. ç”Ÿæˆæ–°å†…å®¹
        new_content = apply_update(existing_content, rule_content, metadata)

        # 4. å†™å…¥ä¸´æ—¶æ–‡ä»¶
        temp_path = write_temp(new_content)

        # 5. éªŒè¯
        if validate_rule_file(temp_path):
            # 6. æ›¿æ¢åŸæ–‡ä»¶
            replace_file(temp_path, file_path)
            return {"success": True, "backup": backup_path}
        else:
            # éªŒè¯å¤±è´¥ï¼Œåˆ é™¤ä¸´æ—¶æ–‡ä»¶
            delete_temp(temp_path)
            return {"success": False, "reason": "validation_failed"}

    except Exception as e:
        # å‡ºé”™ï¼Œå›æ»š
        if backup_path:
            restore_backup(backup_path, file_path)
        return {"success": False, "error": str(e)}
```

---

## æ€»ç»“

### è®¾è®¡äº®ç‚¹

1. **è‡ªåŠ¨åŒ–é—­ç¯**
   - è¯„ä¼° â†’ å»ºè®® â†’ è¿‡æ»¤ â†’ åˆ†ç±» â†’ æ›´æ–° â†’ åº”ç”¨
   - æ— éœ€äººå·¥å¹²é¢„ï¼ŒæŒç»­æ”¹è¿›

2. **æ™ºèƒ½è¿‡æ»¤**
   - ä¸‰å±‚è¿‡æ»¤æœºåˆ¶é¿å…è§„åˆ™è†¨èƒ€
   - åªæ·»åŠ æœ‰ä»·å€¼çš„è§„åˆ™

3. **è‡ªåŠ¨åˆ†ç±»**
   - æ ¹æ®è§„åˆ™æ€§è´¨è‡ªåŠ¨é€‰æ‹©æ­£ç¡®æ–‡ä»¶
   - æ“ä½œæµç¨‹ vs è¡Œä¸ºè§„èŒƒæ¸…æ™°åˆ†ç¦»

4. **å®‰å…¨å¯é **
   - å¤‡ä»½æœºåˆ¶
   - ç‰ˆæœ¬æ§åˆ¶
   - éªŒè¯æ£€æŸ¥
   - å†²çªæ£€æµ‹

5. **å¯æ‰©å±•æ€§**
   - æ˜“äºæ·»åŠ æ–°çš„è¿‡æ»¤æ¡ä»¶
   - æ˜“äºæ·»åŠ æ–°çš„åˆ†ç±»è§„åˆ™
   - æ˜“äºæ·»åŠ æ–°çš„ç›®æ ‡æ–‡ä»¶

### é¢„æœŸæ•ˆæœ

```
å®æ–½å‰:
- è¯„ä¼° â†’ å»ºè®® â†’ (æ–­å±‚) â†’ äººå·¥æ›´æ–° â†’ åº”ç”¨
- æ•ˆç‡ä½ï¼Œå®¹æ˜“é—æ¼

å®æ–½å:
- è¯„ä¼° â†’ å»ºè®® â†’ è‡ªåŠ¨è¿‡æ»¤ â†’ è‡ªåŠ¨åˆ†ç±» â†’ è‡ªåŠ¨æ›´æ–° â†’ åº”ç”¨
- æ•ˆç‡é«˜ï¼ŒæŒç»­æ”¹è¿›

é¢„æœŸæ”¹è¿›:
- è§„åˆ™æ›´æ–°æ—¶é—´: ä»æ•°å°æ—¶ â†’ å®æ—¶
- è§„åˆ™åº”ç”¨å‡†ç¡®ç‡: 60% â†’ 95%
- å¯¹è¯æ•ˆç‡æå‡: +40%
- Tokenä½¿ç”¨å‡å°‘: -30%
```

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **å®¡æ ¸æœ¬è®¾è®¡æ–¹æ¡ˆ**
   - ç¡®è®¤æŠ€æœ¯å¯è¡Œæ€§
   - ç¡®è®¤æ˜¯å¦ç¬¦åˆéœ€æ±‚
   - æå‡ºä¿®æ”¹å»ºè®®

2. **ç¡®è®¤å®æ–½è®¡åˆ’**
   - è°ƒæ•´æ—¶é—´è¡¨
   - ç¡®è®¤èµ„æºéœ€æ±‚
   - è®¾ç½®é‡Œç¨‹ç¢‘

3. **å¼€å§‹å®æ–½**
   - Phase 1: å‡†å¤‡é˜¶æ®µ
   - Phase 2: å¼€å‘é˜¶æ®µ
   - Phase 3: æµ‹è¯•é˜¶æ®µ
   - Phase 4: éƒ¨ç½²é˜¶æ®µ
   - Phase 5: ç›‘æ§ä¼˜åŒ–

---

**æŠ¥å‘Šå®Œæˆ**

**ç‰ˆæœ¬**: v1.0
**æ—¥æœŸ**: 2026-01-16
**ä½œè€…**: Claude Code AI Assistant
**çŠ¶æ€**: å¾…å®¡æ ¸

è¯·æä¾›åé¦ˆå’Œä¿®æ”¹å»ºè®®ã€‚
