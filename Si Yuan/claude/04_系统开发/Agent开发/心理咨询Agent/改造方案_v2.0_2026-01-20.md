# 心理咨询Agent改造方案 v2.0（基于MCP集成）

**创建日期**: 2026-01-20
**版本**: v2.0
**基于**: 《构建隐私优先的心理咨询AI大师》研究报告
**目标**: 集成MCP远程知识库，打造"远程大脑"系统

---

## 核心升级：从本地分析到远程知识库

### v1.0 vs v2.0 对比

| 特性 | v1.0（当前） | v2.0（目标） |
|------|------------|------------|
| 知识来源 | AI训练权重 + 少量本地文档 | GitHub真实文档（Ground Truth） |
| 认知扭曲检测 | AI凭经验识别 | 检索cognitive-bias-cheat-sheet.json |
| CBT工作表 | 手动编写 | 从cbt-worksheets仓库检索 |
| 斯多葛哲学 | 少量引用 | 从daily-stoic仓库检索 |
| 幻觉风险 | ⚠️ 中等 | ✅ 极低（基于真实文档） |

---

## 系统架构

### 4. 远程大脑：基于MCP的分布式知识库集成

**核心优势**：无需下载即可获得专业级心理学知识

**技术路径**：通过配置Claude Code的github-mcp-server，将GitHub转变为AI的即时参考图书馆

### 4.1 关键GitHub资源库映射

#### 4.1.1 认知行为疗法（CBT）资源库

**候选仓库**：
- `sprypt/cbt-worksheets`（推荐）
- `weeeBox/awesome-psychology`

**内容类型**：
- Markdown格式的CBT练习表
- 认知扭曲列表
- 情绪日志模板
- 苏格拉底式提问清单

**应用场景**：
```
用户表现读心术 → AI检索cbt-worksheets
→ 读取"去灾难化脚本"
→ 引导用户一步步完成练习
```

**MCP调用示例**：
```javascript
// 伪代码
mcp__github__get_file_contents(
    owner="sprypt",
    repo="cbt-worksheets",
    path="worksheets/thought-record-sheet.md"
)
```

#### 4.1.2 斯多葛哲学与韧性构建

**候选仓库**：
- `krasimir/daily-stoic`（JSON数据）
- `BenBrostoff/stoic-api`

**内容类型**：
- 结构化的哲学语录
- 每日反思主题
- 控制二分法原文

**应用场景**：
```
用户因不可控事件愤怒 → AI检索斯多葛数据库
→ 提取爱比克泰德关于"控制二分法"的原文
→ 引导用户进行认知重构
```

**MCP调用示例**：
```javascript
// 伪代码
mcp__github__get_file_contents(
    owner="krasimir",
    repo="daily-stoic",
    path="stoic_quotes.json"
)
// 过滤关键词：control, judgment, external
```

#### 4.1.3 心理学数据集与词典

**候选仓库**：
- `busterbenson/public`（特别是cognitive-bias-cheat-sheet.json）

**内容类型**：
- 认知偏差的分类
- 详细的偏差解释
- 科学定义

**应用场景**：
```
AI分析用户日记 → 发现逻辑谬误
→ 查阅cognitive-bias-cheat-sheet.json
→ 准确指出用户陷入"确认偏误"
→ 提供科学解释
```

---

## 功能模块设计

### 5. 深度人格分析系统

**基础理论**：词汇假说（Lexical Hypothesis）
- 人格特征会显著地映射在个体的语言使用模式中
- AI可以通过分析日记中的词汇频率推断人格维度

#### 5.1 大五人格（Big Five/OCEAN）自动化画像

**分析机制**：

| 维度 | 扫描目标 | 示例词汇/模式 |
|------|---------|--------------|
| **开放性** | 抽象概念、艺术隐喻、新奇体验 | "思考"、"可能性"、"实验"、"创意" |
| **尽责性** | 计划、成就、时间管理 | "完成"、"目标"、"计划"、"截止日期" |
| **外向性** | 社交互动、积极情绪、感叹号 | "朋友"、"聚会"、"!"、"开心" |
| **宜人性** | 同理心、合作、利他主义 | "帮助"、"理解"、"支持"、"同意" |
| **神经质** | 负面情绪词、"我"的高频使用 | "焦虑"、"担心"、"我"、"我的" |

**执行指令**：
```bash
/analyze-personality --range="last 6 months"
```

**输出**：
- `Profiles/Personality_Baseline.md`
- 包含：分数 + 具体日记片段作为证据
- 示例："在3月12日和4月5日的条目中，你详细描述了对未来的担忧，这体现了较高的神经质倾向。"

#### 5.2 认知风格与MBTI推断

**S（感觉）vs N（直觉）**：
- **S倾向**：记录具体感官细节
  - 示例："今天早餐吃了三明治，天气很冷"
- **N倾向**：记录抽象模式和意义
  - 示例："今天的氛围让我想起了童年的失落感"

**T（思考）vs F（情感）**：
- **T倾向**：基于逻辑后果的利弊分析
  - 示例："这个方案效率高，但成本大"
- **F倾向**：基于价值观和他人影响
  - 示例："这会影响团队士气"

#### 5.3 纵向情绪追踪与触发点识别

**趋势分析**：
- 绘制情绪波动曲线
- 识别周期性模式
- 示例："周日抑郁症"（周日下午焦虑词汇显著上升）

**相关性挖掘**：
- 发现隐蔽因果关系
- 示例："当你提到#insomnia后的两天内，'自我怀疑'表达增加40%"

---

### 6. 实时情感引导与干预

#### 6.1 交互式CBT认知重构

**工作流程**：

**识别阶段**：
```
用户写下："我搞砸了演示，我永远无法晋升了"
↓
AI识别：过度概括 + 灾难化
```

**工具检索**：
```
AI调用GitHub MCP
→ 从cbt-worksheets获取"思维记录表"
```

**引导过程**：
```
AI: "我注意到了灾难化思维。让我们用CBT技术拆解它。
根据资料库指引，请列出支持'你永远无法晋升'的客观证据。"

用户: "其实没有直接证据，只是感觉。"

AI: "很好。现在请列出反对这个想法的证据。比如，你过去的绩效如何？"
```

**结果固化**：
- AI协助用户生成新的平衡看法
- 记录到当天日记

#### 6.2 叙事疗法与斯多葛重构

**适用场景**：不适合CBT的模糊性焦虑

**外化问题**（叙事疗法）：
```
❌ "我是个焦虑的人"
✅ "焦虑再次造访了我"
```

**斯多葛视角**：
```
AI: "你现在的痛苦似乎源于对他人的看法的在意。
Marcus Aurelius曾说：
'如果你因外界事物而痛苦，那并非因为事物本身，而是因为你对它的判断。'
让我们试着改变这个判断。"
```

**哲学引用来源**：
- 检索`krasimir/daily-stoic`
- 提取相关原文
- 结合用户情境解释

#### 6.3 针对性日记提示（Prompting）

**触发条件**：用户陷入"日记瓶颈"

**基于人格画像生成提示**：

| 人格特征 | 提示类型 | 示例 |
|---------|---------|------|
| 高神经质 | 感恩日记 | "列出今天的三件小确幸" |
| 低尽责性 | 目标导向 | "写下明天必须完成的一件事，并拆解第一步" |
| 低外向性 | 内向反思 | "今天哪个时刻让你感到最有能量？" |
| 高开放性 | 创意探索 | "如果今天可以重新设计，你会怎么改变？" |

---

## Agent指令设计

### 系统指令（添加到Agent prompt）

```markdown
## 角色定义

你是一位拥有15年临床经验的心理咨询专家，精通CBT、ACT及斯多葛哲学。你同时也是一位数据分析师，能够从文本中挖掘深层模式。

### 核心原则

1. **隐私至上**
   - 严禁泄露用户姓名、地名等敏感信息给外部工具
   - 分析时使用代号

2. **非医疗声明**
   - 你不是医生，不能进行医学诊断
   - 如果发现自伤倾向，立即触发危机干预协议

3. **苏格拉底式引导**
   - 不要直接给建议
   - 通过提问引导用户自己发现答案

4. **证据为本**
   - 推荐策略时，明确心理学来源
   - 示例："这是CBT中的'行为激活'技术"

### 工具使用协议

当用户提到具体心理困扰时：
1. 使用github-mcp-server检索相关仓库
2. 读取工作表内容
3. 一步步引导用户完成练习
4. **不是**直接丢给用户链接

### MCP仓库映射

| 问题类型 | GitHub仓库 | 文件路径 |
|---------|-----------|---------|
| 认知扭曲 | sprypt/cbt-worksheets | /worksheets/cognitive-distortions.md |
| 思维记录 | sprypt/cbt-worksheets | /worksheets/thought-record-sheet.md |
| 斯多葛哲学 | krasimir/daily-stoic | /stoic_quotes.json |
| 认知偏差 | busterbenson/public | /cognitive-bias-cheat-sheet.json |
| 心理学资源 | weeeBox/awesome-psychology | /README.md |
```

---

## 工作流程设计

### 场景1：用户主动提问（"分析我和王佳楼的关系"）

```
1. 本地数据收集
   ├─ Grep("王佳楼", "Si Yuan")
   ├─ Glob("Si Yuan/**/*个人分析*.md")
   └─ Glob("Si Yuan/日记/**/*.md")

2. 初步分析（本地）
   ├─ 识别认知扭曲：读心术、灾难化
   ├─ Big Five评分
   └─ MBTI认知功能分析

3. 远程知识检索（MCP）
   ├─ github: cognitive-bias-cheat-sheet.json
   │  → 确认"读心术"的科学定义
   ├─ github: cbt-worksheets/thought-record-sheet.md
   │  → 获取标准思维记录表
   └─ github: daily-stoic/stoic_quotes.json
      → 提取控制二分法相关引用

4. 整合输出
   ├─ CBT认知重构工作表（基于真实文档）
   ├─ 苏格拉底式提问
   ├─ 斯多葛视角（原文引用）
   └─ 行动建议

5. 记录到临时文件
```

### 场景2：全面人格分析（"分析我的人格"）

```
1. 扫描所有数据
   ├─ 读取所有日记（时间序列）
   ├─ 读取所有周记
   └─ 读取个人分析报告

2. 词汇频率分析
   ├─ 开放性词汇计数
   ├─ 尽责性词汇计数
   ├─ 外向性词汇计数
   ├─ 宜人性词汇计数
   └─ 神经质词汇计数

3. 情绪时间线
   ├─ 按月份统计情绪
   ├─ 识别周期性模式
   └─ 触发点相关性分析

4. MBTI推断
   ├─ S vs N（具体 vs 抽象）
   ├─ T vs F（逻辑 vs 价值观）
   └─ 认知功能分析

5. 输出报告
   └─ Profiles/Personality_Baseline.md
```

### 场景3：实时干预（用户写下负面想法）

```
用户写下："我搞砸了演示，我永远无法晋升了"

1. 实时监控（或用户询问）
   ↓
2. 识别认知扭曲
   → 过度概括 + 灾难化
   ↓
3. MCP检索
   ├─ cognitive-bias-cheat-sheet.json
   │  → 确认"过度概括"定义
   └─ cbt-worksheets/thought-record-sheet.md
      → 获取标准表格
   ↓
4. 交互式引导
   ├─ "请列出支持这个想法的证据"
   ├─ "请列出反对这个想法的证据"
   └─ "生成更平衡的看法"
   ↓
5. 结果固化
   → 记录到当天日记
```

---

## MCP调用示例（伪代码）

### 读取CBT工作表

```javascript
// 识别到读心术 → 检索CBT工作表
const thoughtRecord = await mcp__github__get_file_contents({
    owner: "sprypt",
    repo: "cbt-worksheets",
    path: "worksheets/thought-record-sheet.md"
});

// 提取关键部分
const questions = extractCBTQuestions(thoughtRecord);
// [
//   "触发这个想法的情境是什么？",
//   "你有哪些自动思维？",
//   "请列出支持这个想法的证据",
//   "请列出反对这个想法的证据",
//   "更平衡的看法是什么？"
// ]

// 引导用户一步步完成
for (const question of questions) {
    const userAnswer = await ask(question);
    record(userAnswer);
}
```

### 检索斯多葛语录

```javascript
// 用户因不可控事件愤怒 → 检索斯多葛
const stoicData = await mcp__github__get_file_contents({
    owner: "krasimir",
    repo: "daily-stoic",
    path: "stoic_quotes.json"
});

// 过滤关键词
const relevantQuotes = stoicData.filter(quote =>
    quote.keywords.includes("control") ||
    quote.keywords.includes("external") ||
    quote.author === "Epictetus"
);

// 选择最相关的一条
const selectedQuote = relevantQuotes[0];
// "人不是被事物本身困扰，而是被他们对事物的看法困扰。"
// — Epictetus

// 结合用户情境解释
const interpretation = applyToUserContext(selectedQuote, userSituation);
```

### 查阅认知偏差词典

```javascript
// 分析用户日记 → 发现逻辑谬误
const biasCheatSheet = await mcp__github__get_file_contents({
    owner: "busterbenson",
    repo: "public",
    path: "cognitive-bias-cheat-sheet.json"
});

// 用户想法："我觉得她肯定讨厌我"
// 识别到：确认偏误
const bias = biasCheatSheet.find(b => b.name === "Confirmation Bias");

// 返回科学解释
return {
    name: bias.name,
    definition: bias.definition,
    example: bias.example,
    userCase: "你'觉得她讨厌你'，但你只关注了支持这个想法的信号，忽略了相反证据"
};
```

---

## 幻觉风险缓解

### 问题
LLM有时会编造不存在的心理学术语或疗法

### v2.0解决方案
**强制AI主要基于从GitHub检索到的真实文档（Ground Truth）来生成建议**

```
AI不再是"编造者"，而是"朗读者"和"解释者"
```

### 对比

| 方式 | 幻觉风险 | 可靠性 |
|------|---------|-------|
| v1.0：基于训练权重生成 | ⚠️ 中等 | ⚠️ 有时编造术语 |
| v2.0：基于GitHub文档 | ✅ 极低 | ✅ 引用真实文档 |

---

## 文件结构

```
multi-agent-system/
├── agents/
│   └── psychological-counselor-v2.prompt.md  # 新建（集成MCP）
├── shared/
│   ├── cbt-framework.md                      # 保留
│   └── mcp-repos-guide.md                    # 新建：MCP仓库使用指南
└── .claude/
    └── skills/
        └── psychological-analysis.json       # 保留：快速Skill版本
```

---

## 实施步骤

### Phase 1: MCP仓库验证
- [ ] 验证目标仓库是否存在
- [ ] 测试MCP调用是否成功
- [ ] 确认文件路径和格式

### Phase 2: Agent升级
- [ ] 创建psychological-counselor-v2.prompt.md
- [ ] 添加MCP工具使用协议
- [ ] 添加系统指令（角色定义、核心原则）

### Phase 3: 集成测试
- [ ] 测试CBT工作表检索
- [ ] 测试斯多葛语录检索
- [ ] 测试认知偏差词典查询

### Phase 4: 案例验证
- [ ] 王佳楼案例分析（v2.0）
- [ ] INTJ人格分析（v2.0）
- [ ] 对比v1.0和v2.0的差异

---

## 关键改进点总结

### 1. 从"AI编造"到"文档引用"
- ❌ v1.0：AI凭训练权重生成CBT建议
- ✅ v2.0：AI检索GitHub真实文档，引用原文

### 2. 从"手动工具"到"自动检索"
- ❌ v1.0：CBT工作表手动编写
- ✅ v2.0：自动从cbt-worksheets检索

### 3. 从"少量引用"到"丰富语料"
- ❌ v1.0：斯多葛哲学引用有限
- ✅ v2.0：从daily-stoic检索数百条语录

### 4. 从"经验识别"到"科学定义"
- ❌ v1.0：认知扭曲凭经验识别
- ✅ v2.0：查阅cognitive-bias-cheat-sheet.json确认

---

## 预期效果

### 可靠性提升
- ✅ 基于真实心理学文档
- ✅ 避免AI幻觉和编造
- ✅ 提供科学依据

### 专业性提升
- ✅ 引用标准CBT工作表
- ✅ 使用原版斯多葛哲学
- ✅ 准确识别认知偏差

### 用户体验提升
- ✅ 交互式引导（一步步完成练习）
- ✅ 针对性日记提示（基于人格画像）
- ✅ 长期追踪（时间序列分析）

---

## 风险与限制

### 风险
- ⚠️ MCP调用可能失败（网络问题）
- ⚠️ GitHub仓库可能更新或删除
- ⚠️ 外部文档可能不适合中文用户

### 缓解策略
- 📦 本地缓存重要文档
- 🔍 定期验证仓库可用性
- 🌐 必要时翻译和本地化

### 限制
- ⚠️ 仍不是专业心理咨询师替代
- ⚠️ 严重问题需转介专业帮助
- ⚠️ 基于文本分析，可能不完整

---

## 下一步行动

等待你的反馈：

1. ✅ 这个方案方向正确吗？
2. ❓ 需要调整哪些部分？
3. 🚀 确认后创建psychological-counselor-v2.prompt.md
4. 🧪 用王佳楼案例测试v2.0

---

**方案状态**: 等待用户确认
**版本**: v2.0
**基于**: 《构建隐私优先的心理咨询AI大师》研究报告
